!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.modifiers=e():t.modifiers=e()}(self,(()=>(()=>{"use strict";var t={d:(e,i)=>{for(var s in i)t.o(i,s)&&!t.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:i[s]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};t.r(e),t.d(e,{ConcurrentModifier:()=>s,EaseFunctions:()=>a,Modifier:()=>i,SequentialModifier:()=>r});class i{constructor(t,e,i,s,r){if(this.startTime=0,this.elapsedTime=0,Number.isNaN(t)||Math.abs(t)===1/0)throw new Error(t+"is not a valid parameter for 'from' parameter.");if(Number.isNaN(e)||Math.abs(e)===1/0)throw new Error(e+"is not a valid parameter for 'to' parameter.");if(Number.isNaN(i)||i===1/0||i<=0)throw new Error(i+"is not a valid parameter for 'duration' parameter.");this.from=t,this.diff=e-t,this.duration=i,this.modifyFunction=s,this.easeFunction=null!=r?r:t=>t}get Progress(){return this.elapsedTime/this.duration}get EndTime(){return this.startTime+this.duration}register(t=0){this.startTime=Date.now()+t,this.elapsedTime=0}tick(){this.elapsedTime=Date.now()-this.startTime,this.modify(this.from+this.easeFunction(Math.min(this.Progress,1))*this.diff)}modify(t){this.modifyFunction(t)}}class s extends i{constructor(t,...e){super(0,1,1,(()=>{})),this.modifiers=[t,...e]}get Progress(){return 0===this.modifiers.length?1:0}register(){for(const t of this.modifiers)t.register()}tick(){if(1!==this.Progress)for(const t of this.modifiers)t.Progress<1?t.tick():this.modifiers=this.modifiers.filter((e=>e===t))}}class r extends i{constructor(t,...e){super(0,1,1,(()=>{})),this.modifiers=[t,...e]}get Progress(){return 0===this.modifiers.length?1:0}register(){this.modifiers[0].register()}tick(){var t,e;if(1===this.Progress)return;const i=this.modifiers[0];if(i.Progress<1)i.tick();else{const i=this.modifiers.shift();null===(t=this.modifiers[0])||void 0===t||t.register(Date.now()-(null!==(e=null==i?void 0:i.EndTime)&&void 0!==e?e:0))}}}const o=t=>{const e=2.75,i=2.75*t;return 7.5625*(i<1?t*t:i<2?(t-=1.5/e)*t+.75:i<2.5?(t-=2.25/e)*t+.9375:(t-=2.625/e)*t+.984375)},a={EaseInSine:t=>1-Math.cos(t*Math.PI/2),EaseOutSine:t=>Math.sin(t*Math.PI/2),EaseInOutSine:t=>-(Math.cos(Math.PI*t)-1)/2,EaseInExpo:t=>0===t?0:Math.pow(2,10*t-10),EaseOutExpo:t=>1===t?1:1-Math.pow(2,-10*t),EaseInOutExpo:t=>0===t?0:1===t?1:t<.5?Math.pow(2,20*t-10)/2:(2-Math.pow(2,-20*t+10))/2,EaseInCirc:t=>1-Math.sqrt(1-Math.pow(t,2)),EaseOutCirc:t=>Math.sqrt(1-Math.pow(t-1,2)),EaseInOutCirc:t=>t<.5?(1-Math.sqrt(1-Math.pow(2*t,2)))/2:(Math.sqrt(1-Math.pow(-2*t+2,2))+1)/2,EaseInBack:t=>Math.pow(t,2)*(2.70158*t-1.70158),EaseOutBack:t=>1+Math.pow(t-1,2)*(2.70158*(t-1)+1.70158),EaseInOutBack:t=>(t<.5?Math.pow(2*t,2)*(7.189819*t-2.5949095):Math.pow(2*t-2,2)*(3.5949095*(2*t-2)+2.5949095)+2)/2,EaseInElastic:t=>0===t?0:1===t?1:-Math.pow(2,10*t-10)*Math.sin((10*t-10.75)*(2*Math.PI)/3),EaseOutElastic:t=>0===t?0:1===t?1:Math.pow(2,-10*t)*Math.sin((10*t-.75)*(2*Math.PI)/3)+1,EaseInOutElastic:t=>0===t?0:1===t?1:t<.5?-Math.pow(2,20*t-10)*Math.sin((20*t-11.125)*(2*Math.PI)/4.5)/2:Math.pow(2,-20*t+10)*Math.sin((20*t-11.125)*(2*Math.PI)/4.5)/2+1,EaseInBounce:t=>1-o(1-t),EaseOutBounce:o,EaseInOutBounce:t=>t<.5?(1-o(1-2*t))/2:(1+o(2*t-1))/2};return e})()));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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R0FBSzlCLEdBQUtQLEtBQUtrQyxLQUFVLEdBQUozQixFQUFTLE1BQVMsRUFBSVAsS0FBS2dDLElBQU8sR0FDcEUsRUFDTmlCLGlCQUFtQjFDLEdBQ1gsSUFBTkEsRUFDSSxFQUNNLElBQU5BLEVBQ0EsRUFDQUEsRUFBSSxJQUVGUCxLQUFLcUMsSUFBSSxFQUFHLEdBQUs5QixFQUFJLElBQ3JCUCxLQUFLa0MsS0FBTSxHQUFLM0IsRUFBSSxTQUFXLEVBQUlQLEtBQUtnQyxJQUFPLEtBQzdDLEVBQ0hoQyxLQUFLcUMsSUFBSSxHQUFJLEdBQUs5QixFQUFJLElBQ3JCUCxLQUFLa0MsS0FBTSxHQUFLM0IsRUFBSSxTQUFXLEVBQUlQLEtBQUtnQyxJQUFPLEtBQy9DLEVBQ0YsRUFDTmtCLGFBQWUzQyxHQUFjLEVBQUlvQixFQUFjLEVBQUlwQixHQUNuRG9CLGdCQUNBd0IsZ0JBQWtCNUMsR0FDaEJBLEVBQUksSUFDQyxFQUFJb0IsRUFBYyxFQUFJLEVBQUlwQixJQUFNLEdBQ2hDLEVBQUlvQixFQUFjLEVBQUlwQixFQUFJLElBQU0sRyIsInNvdXJjZXMiOlsid2VicGFjazovL2FydGlzdGljLWVuZ2luZS93ZWJwYWNrL3VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24iLCJ3ZWJwYWNrOi8vYXJ0aXN0aWMtZW5naW5lL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL2FydGlzdGljLWVuZ2luZS93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vYXJ0aXN0aWMtZW5naW5lL3dlYnBhY2svcnVudGltZS9oYXNPd25Qcm9wZXJ0eSBzaG9ydGhhbmQiLCJ3ZWJwYWNrOi8vYXJ0aXN0aWMtZW5naW5lL3dlYnBhY2svcnVudGltZS9tYWtlIG5hbWVzcGFjZSBvYmplY3QiLCJ3ZWJwYWNrOi8vYXJ0aXN0aWMtZW5naW5lLy4vc3JjL21vZGlmaWVycy9tb2RpZmllcnMvbW9kaWZpZXIudHMiLCJ3ZWJwYWNrOi8vYXJ0aXN0aWMtZW5naW5lLy4vc3JjL21vZGlmaWVycy9tb2RpZmllcnMvY29uY3VycmVudF9tb2RpZmllci50cyIsIndlYnBhY2s6Ly9hcnRpc3RpYy1lbmdpbmUvLi9zcmMvbW9kaWZpZXJzL21vZGlmaWVycy9zZXF1ZW50aWFsX21vZGlmaWVyLnRzIiwid2VicGFjazovL2FydGlzdGljLWVuZ2luZS8uL3NyYy9tb2RpZmllcnMvZWFzZS1mdW5jdGlvbi9pbmRleC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gd2VicGFja1VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24ocm9vdCwgZmFjdG9yeSkge1xuXHRpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSA9PT0gJ29iamVjdCcpXG5cdFx0bW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCk7XG5cdGVsc2UgaWYodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKVxuXHRcdGRlZmluZShbXSwgZmFjdG9yeSk7XG5cdGVsc2UgaWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnKVxuXHRcdGV4cG9ydHNbXCJtb2RpZmllcnNcIl0gPSBmYWN0b3J5KCk7XG5cdGVsc2Vcblx0XHRyb290W1wibW9kaWZpZXJzXCJdID0gZmFjdG9yeSgpO1xufSkoc2VsZiwgKCkgPT4ge1xucmV0dXJuICIsIi8vIFRoZSByZXF1aXJlIHNjb3BlXG52YXIgX193ZWJwYWNrX3JlcXVpcmVfXyA9IHt9O1xuXG4iLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSAoZXhwb3J0cywgZGVmaW5pdGlvbikgPT4ge1xuXHRmb3IodmFyIGtleSBpbiBkZWZpbml0aW9uKSB7XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGRlZmluaXRpb24sIGtleSkgJiYgIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBrZXkpKSB7XG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZGVmaW5pdGlvbltrZXldIH0pO1xuXHRcdH1cblx0fVxufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSAob2JqLCBwcm9wKSA9PiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCkpIiwiLy8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5yID0gKGV4cG9ydHMpID0+IHtcblx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG5cdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG5cdH1cblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbn07IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgTW9kaWZpZXIge1xyXG4gIHByaXZhdGUgZnJvbTogbnVtYmVyO1xyXG5cclxuICBwcml2YXRlIGRpZmY6IG51bWJlcjtcclxuXHJcbiAgcHJpdmF0ZSBkdXJhdGlvbjogbnVtYmVyO1xyXG5cclxuICBwcml2YXRlIHN0YXJ0VGltZSA9IDA7XHJcblxyXG4gIHByaXZhdGUgZWxhcHNlZFRpbWUgPSAwO1xyXG5cclxuICBwcml2YXRlIG1vZGlmeUZ1bmN0aW9uOiAodmFsdWU6IG51bWJlcikgPT4gdm9pZDtcclxuXHJcbiAgcHJpdmF0ZSBlYXNlRnVuY3Rpb246IChwcm9ncmVzczogbnVtYmVyKSA9PiBudW1iZXI7XHJcblxyXG4gIGNvbnN0cnVjdG9yKFxyXG4gICAgZnJvbTogbnVtYmVyLFxyXG4gICAgdG86IG51bWJlcixcclxuICAgIGR1cmF0aW9uOiBudW1iZXIsXHJcbiAgICBtb2RpZnk6ICh2YWx1ZTogbnVtYmVyKSA9PiB2b2lkLFxyXG4gICAgZWFzZUZ1bmN0aW9uPzogKHByb2dyZXNzOiBudW1iZXIpID0+IG51bWJlclxyXG4gICkge1xyXG4gICAgaWYgKE51bWJlci5pc05hTihmcm9tKSB8fCBNYXRoLmFicyhmcm9tKSA9PT0gSW5maW5pdHkpXHJcbiAgICAgIHRocm93IG5ldyBFcnJvcihmcm9tICsgXCJpcyBub3QgYSB2YWxpZCBwYXJhbWV0ZXIgZm9yICdmcm9tJyBwYXJhbWV0ZXIuXCIpO1xyXG4gICAgaWYgKE51bWJlci5pc05hTih0bykgfHwgTWF0aC5hYnModG8pID09PSBJbmZpbml0eSlcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKHRvICsgXCJpcyBub3QgYSB2YWxpZCBwYXJhbWV0ZXIgZm9yICd0bycgcGFyYW1ldGVyLlwiKTtcclxuICAgIGlmIChOdW1iZXIuaXNOYU4oZHVyYXRpb24pIHx8IGR1cmF0aW9uID09PSBJbmZpbml0eSB8fCBkdXJhdGlvbiA8PSAwKSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcihcclxuICAgICAgICBkdXJhdGlvbiArIFwiaXMgbm90IGEgdmFsaWQgcGFyYW1ldGVyIGZvciAnZHVyYXRpb24nIHBhcmFtZXRlci5cIlxyXG4gICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuZnJvbSA9IGZyb207XHJcbiAgICB0aGlzLmRpZmYgPSB0byAtIGZyb207XHJcbiAgICB0aGlzLmR1cmF0aW9uID0gZHVyYXRpb247XHJcbiAgICB0aGlzLm1vZGlmeUZ1bmN0aW9uID0gbW9kaWZ5O1xyXG4gICAgdGhpcy5lYXNlRnVuY3Rpb24gPSBlYXNlRnVuY3Rpb24gPz8gKChwKSA9PiBwKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFByb2dyZXNzIG9mIHRpbWVzIGVsYXBzZWQgc2luY2UgcmVnaXN0cmF0aW9uIG9mIHRoaXMgbW9kaWZpZXIgaW4gc2NhbGUgb2YgMS5cclxuICAgKi9cclxuICBwdWJsaWMgZ2V0IFByb2dyZXNzKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuZWxhcHNlZFRpbWUgLyB0aGlzLmR1cmF0aW9uO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogVU5JWCB0aW1lc3RhbXAgb2YgdGltZSB3aGVuIHRoZSBtb2RpZmllciB3aWxsIGVuZCB3aXRoIHByb2dyZXNzIDAuXHJcbiAgICovXHJcbiAgcHVibGljIGdldCBFbmRUaW1lKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuc3RhcnRUaW1lICsgdGhpcy5kdXJhdGlvbjtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFNldCB0aGUgY2FsbCB0aW1lIGFzIHRoZSBzdGFydCB0aW1lIG9mIHRoaXMgbW9kaWZpZXIgYW5kIGZpcmUge0BsaW5rIHRpY2t9IGZvciBldmVyeSByZW5kZXJpbmcgY3ljbGUuXHJcbiAgICogT2Zmc2V0IGNhbiBiZSBwcm92aWRlZCB0byBkZWxheS9wcm9tcHQgc3RhcnQgdGltZSBmcm9tIHRoZSBjYWxsIHRpbWUuXHJcbiAgICogQHBhcmFtIG9mZnNldCBPZmZzZXQgYXBwbGllZCB0byBzdGFydCB0aW1lIG9uIGNhbGwuXHJcbiAgICovXHJcbiAgcHVibGljIHJlZ2lzdGVyKG9mZnNldDogbnVtYmVyID0gMCkge1xyXG4gICAgdGhpcy5zdGFydFRpbWUgPSBEYXRlLm5vdygpICsgb2Zmc2V0O1xyXG4gICAgdGhpcy5lbGFwc2VkVGltZSA9IDA7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBAaW50ZXJuYWxcclxuICAgKi9cclxuICBwdWJsaWMgdGljaygpIHtcclxuICAgIHRoaXMuZWxhcHNlZFRpbWUgPSBEYXRlLm5vdygpIC0gdGhpcy5zdGFydFRpbWU7XHJcbiAgICB0aGlzLm1vZGlmeShcclxuICAgICAgdGhpcy5mcm9tICsgdGhpcy5lYXNlRnVuY3Rpb24oTWF0aC5taW4odGhpcy5Qcm9ncmVzcywgMSkpICogdGhpcy5kaWZmXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgcHJvdGVjdGVkIG1vZGlmeSh2YWx1ZTogbnVtYmVyKSB7XHJcbiAgICB0aGlzLm1vZGlmeUZ1bmN0aW9uKHZhbHVlKTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IE1vZGlmaWVyIGZyb20gXCIuL21vZGlmaWVyXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDb25jdXJyZW50TW9kaWZpZXIgZXh0ZW5kcyBNb2RpZmllciB7XHJcbiAgcHJvdGVjdGVkIG1vZGlmaWVyczogTW9kaWZpZXJbXTtcclxuXHJcbiAgY29uc3RydWN0b3IobW9kaWZpZXI6IE1vZGlmaWVyLCAuLi5tb2RpZmllcnM6IE1vZGlmaWVyW10pIHtcclxuICAgIHN1cGVyKDAsIDEsIDEsICgpID0+IHt9KTtcclxuICAgIHRoaXMubW9kaWZpZXJzID0gW21vZGlmaWVyLCAuLi5tb2RpZmllcnNdO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIG92ZXJyaWRlIGdldCBQcm9ncmVzcygpOiBudW1iZXIge1xyXG4gICAgcmV0dXJuIHRoaXMubW9kaWZpZXJzLmxlbmd0aCA9PT0gMCA/IDEgOiAwO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIG92ZXJyaWRlIHJlZ2lzdGVyKCk6IHZvaWQge1xyXG4gICAgZm9yIChjb25zdCBtb2RpZmllciBvZiB0aGlzLm1vZGlmaWVycykge1xyXG4gICAgICBtb2RpZmllci5yZWdpc3RlcigpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHVibGljIG92ZXJyaWRlIHRpY2soKTogdm9pZCB7XHJcbiAgICBpZiAodGhpcy5Qcm9ncmVzcyA9PT0gMSkgcmV0dXJuO1xyXG4gICAgZm9yIChjb25zdCBtb2RpZmllciBvZiB0aGlzLm1vZGlmaWVycykge1xyXG4gICAgICBpZiAobW9kaWZpZXIuUHJvZ3Jlc3MgPCAxKSBtb2RpZmllci50aWNrKCk7XHJcbiAgICAgIGVsc2Uge1xyXG4gICAgICAgIHRoaXMubW9kaWZpZXJzID0gdGhpcy5tb2RpZmllcnMuZmlsdGVyKChtKSA9PiBtID09PSBtb2RpZmllcik7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IE1vZGlmaWVyIGZyb20gXCIuL21vZGlmaWVyXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTZXF1ZW50aWFsTW9kaWZpZXIgZXh0ZW5kcyBNb2RpZmllciB7XHJcbiAgcHJvdGVjdGVkIG1vZGlmaWVyczogTW9kaWZpZXJbXTtcclxuXHJcbiAgY29uc3RydWN0b3IobW9kaWZpZXI6IE1vZGlmaWVyLCAuLi5tb2RpZmllcnM6IE1vZGlmaWVyW10pIHtcclxuICAgIHN1cGVyKDAsIDEsIDEsICgpID0+IHt9KTtcclxuICAgIHRoaXMubW9kaWZpZXJzID0gW21vZGlmaWVyLCAuLi5tb2RpZmllcnNdO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIG92ZXJyaWRlIGdldCBQcm9ncmVzcygpOiBudW1iZXIge1xyXG4gICAgcmV0dXJuIHRoaXMubW9kaWZpZXJzLmxlbmd0aCA9PT0gMCA/IDEgOiAwO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIG92ZXJyaWRlIHJlZ2lzdGVyKCk6IHZvaWQge1xyXG4gICAgdGhpcy5tb2RpZmllcnNbMF0ucmVnaXN0ZXIoKTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBvdmVycmlkZSB0aWNrKCk6IHZvaWQge1xyXG4gICAgaWYgKHRoaXMuUHJvZ3Jlc3MgPT09IDEpIHJldHVybjtcclxuICAgIGNvbnN0IGN1cnJlbnRNb2RpZmllciA9IHRoaXMubW9kaWZpZXJzWzBdO1xyXG4gICAgaWYgKGN1cnJlbnRNb2RpZmllci5Qcm9ncmVzcyA8IDEpIGN1cnJlbnRNb2RpZmllci50aWNrKCk7XHJcbiAgICBlbHNlIHtcclxuICAgICAgY29uc3QgcHJldmlvdXNNb2RpZmllciA9IHRoaXMubW9kaWZpZXJzLnNoaWZ0KCk7XHJcbiAgICAgIHRoaXMubW9kaWZpZXJzWzBdPy5yZWdpc3RlcihcclxuICAgICAgICBEYXRlLm5vdygpIC0gKHByZXZpb3VzTW9kaWZpZXI/LkVuZFRpbWUgPz8gMClcclxuICAgICAgKTtcclxuICAgIH1cclxuICB9XHJcbn1cclxuIiwiY29uc3QgRWFzZU91dEJvdW5jZSA9IChwOiBudW1iZXIpID0+IHtcclxuICBjb25zdCBkMSA9IDIuNzU7XHJcbiAgY29uc3QgYzEgPSBwICogMi43NTtcclxuICByZXR1cm4gKFxyXG4gICAgKGMxIDwgMVxyXG4gICAgICA/IHAgKiBwXHJcbiAgICAgIDogYzEgPCAyXHJcbiAgICAgID8gKHAgLT0gMS41IC8gZDEpICogcCArIDAuNzVcclxuICAgICAgOiBjMSA8IDIuNVxyXG4gICAgICA/IChwIC09IDIuMjUgLyBkMSkgKiBwICsgMC45Mzc1XHJcbiAgICAgIDogKHAgLT0gMi42MjUgLyBkMSkgKiBwICsgMC45ODQzNzUpICogNy41NjI1XHJcbiAgKTtcclxufTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IHtcclxuICBFYXNlSW5TaW5lOiAocDogbnVtYmVyKSA9PiAxIC0gTWF0aC5jb3MoKHAgKiBNYXRoLlBJKSAvIDIpLFxyXG4gIEVhc2VPdXRTaW5lOiAocDogbnVtYmVyKSA9PiBNYXRoLnNpbigocCAqIE1hdGguUEkpIC8gMiksXHJcbiAgRWFzZUluT3V0U2luZTogKHA6IG51bWJlcikgPT4gLShNYXRoLmNvcyhNYXRoLlBJICogcCkgLSAxKSAvIDIsXHJcbiAgRWFzZUluRXhwbzogKHA6IG51bWJlcikgPT4gKHAgPT09IDAgPyAwIDogTWF0aC5wb3coMiwgMTAgKiBwIC0gMTApKSxcclxuICBFYXNlT3V0RXhwbzogKHA6IG51bWJlcikgPT4gKHAgPT09IDEgPyAxIDogMSAtIE1hdGgucG93KDIsIC0xMCAqIHApKSxcclxuICBFYXNlSW5PdXRFeHBvOiAocDogbnVtYmVyKSA9PlxyXG4gICAgcCA9PT0gMFxyXG4gICAgICA/IDBcclxuICAgICAgOiBwID09PSAxXHJcbiAgICAgID8gMVxyXG4gICAgICA6IHAgPCAwLjVcclxuICAgICAgPyBNYXRoLnBvdygyLCAyMCAqIHAgLSAxMCkgLyAyXHJcbiAgICAgIDogKDIgLSBNYXRoLnBvdygyLCAtMjAgKiBwICsgMTApKSAvIDIsXHJcbiAgRWFzZUluQ2lyYzogKHA6IG51bWJlcikgPT4gMSAtIE1hdGguc3FydCgxIC0gTWF0aC5wb3cocCwgMikpLFxyXG4gIEVhc2VPdXRDaXJjOiAocDogbnVtYmVyKSA9PiBNYXRoLnNxcnQoMSAtIE1hdGgucG93KHAgLSAxLCAyKSksXHJcbiAgRWFzZUluT3V0Q2lyYzogKHA6IG51bWJlcikgPT5cclxuICAgIHAgPCAwLjVcclxuICAgICAgPyAoMSAtIE1hdGguc3FydCgxIC0gTWF0aC5wb3coMiAqIHAsIDIpKSkgLyAyXHJcbiAgICAgIDogKE1hdGguc3FydCgxIC0gTWF0aC5wb3coLTIgKiBwICsgMiwgMikpICsgMSkgLyAyLFxyXG4gIEVhc2VJbkJhY2s6IChwOiBudW1iZXIpID0+IE1hdGgucG93KHAsIDIpICogKDIuNzAxNTggKiBwIC0gMS43MDE1OCksXHJcbiAgRWFzZU91dEJhY2s6IChwOiBudW1iZXIpID0+XHJcbiAgICAxICsgTWF0aC5wb3cocCAtIDEsIDIpICogKDIuNzAxNTggKiAocCAtIDEpICsgMS43MDE1OCksXHJcbiAgRWFzZUluT3V0QmFjazogKHA6IG51bWJlcikgPT5cclxuICAgIChwIDwgMC41XHJcbiAgICAgID8gTWF0aC5wb3coMiAqIHAsIDIpICogKDcuMTg5ODE5ICogcCAtIDIuNTk0OTA5NSlcclxuICAgICAgOiBNYXRoLnBvdygyICogcCAtIDIsIDIpICogKDMuNTk0OTA5NSAqIChwICogMiAtIDIpICsgMi41OTQ5MDk1KSArIDIpIC8gMixcclxuICBFYXNlSW5FbGFzdGljOiAocDogbnVtYmVyKSA9PlxyXG4gICAgcCA9PT0gMFxyXG4gICAgICA/IDBcclxuICAgICAgOiBwID09PSAxXHJcbiAgICAgID8gMVxyXG4gICAgICA6IC1NYXRoLnBvdygyLCAxMCAqIHAgLSAxMCkgKlxyXG4gICAgICAgIE1hdGguc2luKCgocCAqIDEwIC0gMTAuNzUpICogKDIgKiBNYXRoLlBJKSkgLyAzKSxcclxuICBFYXNlT3V0RWxhc3RpYzogKHA6IG51bWJlcikgPT5cclxuICAgIHAgPT09IDBcclxuICAgICAgPyAwXHJcbiAgICAgIDogcCA9PT0gMVxyXG4gICAgICA/IDFcclxuICAgICAgOiBNYXRoLnBvdygyLCAtMTAgKiBwKSAqIE1hdGguc2luKCgocCAqIDEwIC0gMC43NSkgKiAoMiAqIE1hdGguUEkpKSAvIDMpICtcclxuICAgICAgICAxLFxyXG4gIEVhc2VJbk91dEVsYXN0aWM6IChwOiBudW1iZXIpID0+XHJcbiAgICBwID09PSAwXHJcbiAgICAgID8gMFxyXG4gICAgICA6IHAgPT09IDFcclxuICAgICAgPyAxXHJcbiAgICAgIDogcCA8IDAuNVxyXG4gICAgICA/IC0oXHJcbiAgICAgICAgICBNYXRoLnBvdygyLCAyMCAqIHAgLSAxMCkgKlxyXG4gICAgICAgICAgTWF0aC5zaW4oKCgyMCAqIHAgLSAxMS4xMjUpICogKDIgKiBNYXRoLlBJKSkgLyA0LjUpXHJcbiAgICAgICAgKSAvIDJcclxuICAgICAgOiAoTWF0aC5wb3coMiwgLTIwICogcCArIDEwKSAqXHJcbiAgICAgICAgICBNYXRoLnNpbigoKDIwICogcCAtIDExLjEyNSkgKiAoMiAqIE1hdGguUEkpKSAvIDQuNSkpIC9cclxuICAgICAgICAgIDIgK1xyXG4gICAgICAgIDEsXHJcbiAgRWFzZUluQm91bmNlOiAocDogbnVtYmVyKSA9PiAxIC0gRWFzZU91dEJvdW5jZSgxIC0gcCksXHJcbiAgRWFzZU91dEJvdW5jZSxcclxuICBFYXNlSW5PdXRCb3VuY2U6IChwOiBudW1iZXIpID0+XHJcbiAgICBwIDwgMC41XHJcbiAgICAgID8gKDEgLSBFYXNlT3V0Qm91bmNlKDEgLSAyICogcCkpIC8gMlxyXG4gICAgICA6ICgxICsgRWFzZU91dEJvdW5jZSgyICogcCAtIDEpKSAvIDIsXHJcbn07XHJcbiJdLCJuYW1lcyI6WyJyb290IiwiZmFjdG9yeSIsImV4cG9ydHMiLCJtb2R1bGUiLCJkZWZpbmUiLCJhbWQiLCJzZWxmIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsImRlZmluaXRpb24iLCJrZXkiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0Iiwib2JqIiwicHJvcCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJNb2RpZmllciIsImNvbnN0cnVjdG9yIiwiZnJvbSIsInRvIiwiZHVyYXRpb24iLCJtb2RpZnkiLCJlYXNlRnVuY3Rpb24iLCJzdGFydFRpbWUiLCJlbGFwc2VkVGltZSIsIk51bWJlciIsImlzTmFOIiwiTWF0aCIsImFicyIsIkluZmluaXR5IiwiRXJyb3IiLCJ0aGlzIiwiZGlmZiIsIm1vZGlmeUZ1bmN0aW9uIiwicCIsIlByb2dyZXNzIiwiRW5kVGltZSIsInJlZ2lzdGVyIiwib2Zmc2V0IiwiRGF0ZSIsIm5vdyIsInRpY2siLCJtaW4iLCJDb25jdXJyZW50TW9kaWZpZXIiLCJtb2RpZmllciIsIm1vZGlmaWVycyIsInN1cGVyIiwibGVuZ3RoIiwiZmlsdGVyIiwibSIsIlNlcXVlbnRpYWxNb2RpZmllciIsImN1cnJlbnRNb2RpZmllciIsInByZXZpb3VzTW9kaWZpZXIiLCJzaGlmdCIsIkVhc2VPdXRCb3VuY2UiLCJkMSIsImMxIiwiRWFzZUluU2luZSIsImNvcyIsIlBJIiwiRWFzZU91dFNpbmUiLCJzaW4iLCJFYXNlSW5PdXRTaW5lIiwiRWFzZUluRXhwbyIsInBvdyIsIkVhc2VPdXRFeHBvIiwiRWFzZUluT3V0RXhwbyIsIkVhc2VJbkNpcmMiLCJzcXJ0IiwiRWFzZU91dENpcmMiLCJFYXNlSW5PdXRDaXJjIiwiRWFzZUluQmFjayIsIkVhc2VPdXRCYWNrIiwiRWFzZUluT3V0QmFjayIsIkVhc2VJbkVsYXN0aWMiLCJFYXNlT3V0RWxhc3RpYyIsIkVhc2VJbk91dEVsYXN0aWMiLCJFYXNlSW5Cb3VuY2UiLCJFYXNlSW5PdXRCb3VuY2UiXSwic291cmNlUm9vdCI6IiJ9