!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.main=e():t.main=e()}(self,(()=>(()=>{"use strict";var t={d:(e,s)=>{for(var i in s)t.o(s,i)&&!t.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:s[i]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};t.r(e),t.d(e,{Engine:()=>m,Entity:()=>o,Scenes:()=>s,Sprite:()=>u,Transform:()=>l,Vector:()=>i});var s={};t.r(s),t.d(s,{BlankScene:()=>c});var i={};t.r(i),t.d(i,{Vector2D:()=>n,Vector3D:()=>d,Vector4D:()=>v});class r{constructor(...t){this.values=[...t],this.size=t.length}get Size(){return this.size}copy(t,e=!1){if(this.size>t.size&&!e)throw new Error(`Copying vector of size ${this.size} to ${t.size} will cause data loss.\nInclude force option if intended.`);return t.overwrite(this.values),t}isequal(t,e){if(this.size!==t.size)return!1;const s=this.values.slice(),i=t.values.slice();return s.every(((t,s)=>null==e?t==i[s]:t.toFixed(e)==i[s].toFixed(e)))}shift(t=1){t%=this.size;const e=this.values.slice(0,-t);return e.unshift(...this.values.slice(-t)),this.values=e,this}overwrite(t){let e=0;this.values=this.values.map((function(){return t[e++]||0}))}}class n extends r{constructor(t=0,e=0){super(t,e)}get X(){return this.values[0]}get Y(){return this.values[1]}set X(t){this.values[0]=t}set Y(t){this.values[1]=t}}class h{constructor(){this.children=[],this.parent=null}get Parent(){return this.parent}get Children(){return this.children.slice()}attachChildren(t,e=1/0){var s;let i=-1;if(Array.isArray(t)){const s=Math.max(0,Math.min(e,this.children.length));for(let e=0;e<t.length;e++)i=this.attachChildren(t[e],s+e)}else{for(let e=this;null!==e;e=e.parent)if(e===t)throw new Error("Loop of parent-child relationships detected.");null===(s=t.parent)||void 0===s||s.detachChildren(t),this.children.push(t),t.parent=this,i=this.setChildIndex(t,e)}return i}detachChildren(t){if(Array.isArray(t))for(const e of t)this.detachChildren(e);else{const e=this.children.indexOf(t);e>-1&&(this.children.splice(e,1),t.parent=null)}}getChildIndex(t){return this.children.indexOf(t)}setChildIndex(t,e){const s=this.getChildIndex(t);if(-1===s)throw new Error("I AM NOT YOUR FATHER");this.children.splice(s,1);const i=Math.max(0,Math.min(e,this.children.length));return this.children.splice(i,0,t),i}setParent(t=null){var e;null==t?null===(e=this.parent)||void 0===e||e.detachChildren(this):t.attachChildren(this)}}class o extends h{constructor(t){var e,s,i,r;super(),this.dimension=new n,this.position=new n,t&&(this.dimension.X=null!==(e=t.W)&&void 0!==e?e:0,this.dimension.Y=null!==(s=t.H)&&void 0!==s?s:0,this.position.X=null!==(i=t.X)&&void 0!==i?i:0,this.position.Y=null!==(r=t.Y)&&void 0!==r?r:0)}get Position(){return this.position}get X(){return this.position.X}get Y(){return this.position.Y}get Dimension(){return this.dimension}get W(){return this.dimension.X}get H(){return this.dimension.Y}get Width(){return this.dimension.X}get Height(){return this.dimension.Y}get AbsoluteX(){var t,e;return(null!==(e=null===(t=this.parent)||void 0===t?void 0:t.AbsoluteX)&&void 0!==e?e:0)+this.position.X}get AbsoluteY(){var t,e;return(null!==(e=null===(t=this.parent)||void 0===t?void 0:t.AbsoluteY)&&void 0!==e?e:0)+this.position.Y}set Position(t){this.position=t}set X(t){this.position.X=t}set Y(t){this.position.Y=t}set Dimension(t){this.dimension=t}set W(t){this.dimension.X=t}set H(t){this.dimension.Y=t}set Width(t){this.dimension.X=t}set Height(t){this.dimension.Y=t}}const a=t=>{if(null!=t.reset)return!0;t.save();let e=0;const s=t.save,i=t.restore;return t.save=function(){s.call(this),e++},t.restore=function(){e>0&&(i.call(this),e--)},t.reset=function(){!function(t){for(let s=e;s>-1;s--)i.call(t);e=-1}(t),this.moveTo(0,0),this.beginPath(),this.closePath(),this.resetTransform(),this.clearRect(0,0,this.canvas.width,this.canvas.height),this.save()},!1};class l{constructor(t=1,e=0,s=0,i=1,r=0,n=0){this.values=[t,e,s,i,r,n]}get m11(){return this.values[0]}get m12(){return this.values[1]}get m21(){return this.values[2]}get m22(){return this.values[3]}get ox(){return this.values[4]}get oy(){return this.values[5]}get Determinant(){return this.m11*this.m22-this.m12*this.m21}get isInvertible(){return 0!==this.Determinant}get isIdentity(){return 1===this.m11&&1===this.m22&&0===this.m12&&0===this.m21&&0===this.ox&&0===this.oy}set m11(t){this.values[0]=t}set m12(t){this.values[1]=t}set m21(t){this.values[2]=t}set m22(t){this.values[3]=t}set ox(t){this.values[4]=t}set oy(t){this.values[5]=t}static fromDOM(t){return new this(t.a,t.c,t.b,t.d,t.e,t.f)}translate(t,e){return this.ox+=t,this.oy+=e,this}scale(t,e){return void 0===e?this.scale(t,t):([0,1,4].forEach((e=>{this.values[e]*=t})),[2,3,5].forEach((t=>{this.values[t]*=e})),this)}linear(t,e,s,i,r,n){return this.values=[t*this.m11+e*this.m21,t*this.m12+e*this.m22,s*this.m11+i*this.m21,s*this.m12+i*this.m22,t*this.ox+e*this.oy+r,s*this.ox+i*this.oy+n],this}rotate(t,e=0,s=0){t=t*Math.PI/180;const i=Math.sin(t),r=Math.cos(t);return this.translate(-e,-s).linear(r,i,-i,r,0,0).translate(e,s)}apply(t,e){let s;if(t instanceof n)s=t,e=t.Y,t=t.X,s.X=this.m11*t+this.m12*e+this.ox,s.Y=this.m21*t+this.m22*e+this.oy;else{if(void 0===e)throw new Error("Transform#apply method requires two number parameters or one Vector2D.");s=new n(this.m11*t+this.m12*e+this.ox,this.m21*t+this.m22*e+this.oy)}return s}multiply(t){return this.linear(...t.values)}invert(){const t=this.Determinant;if(0===t)throw new Error("This transform is not invertible");const e=this.m22/t,s=-1*this.m12/t,i=(this.m12*this.oy-this.m22*this.ox)/t,r=-1*this.m21/t,n=this.m11/t,h=-1*(this.m11*this.oy-this.m21*this.ox)/t;return this.m11=e,this.m12=s,this.ox=i,this.m21=r,this.m22=n,this.oy=h,this}skew(t=0,e=0){return this.linear(1,t,e,1,0,0),this}copy(){return new l(...this.values)}toDOM(){return new DOMMatrix([this.m11,this.m21,this.m12,this.m22,this.ox,this.oy])}}class u extends o{constructor(){super(...arguments),this.draw=(t,e)=>{t.save(),t.translate(this.AbsoluteX,this.AbsoluteY),this.transform&&t.transform(this.transform.m11,this.transform.m21,this.transform.m12,this.transform.m22,this.transform.ox,this.transform.oy),this.region&&(this.beforeClip(t,e),t.beginPath(),t.rect(0,0,this.region.Width,this.region.Height),t.clip()),this.onDraw(t,e),t.restore(),this.afterRestore(t,e);for(const s of this.Children)s instanceof u&&s.draw(t,e)}}get Transform(){return this.transform||(this.transform=new l),this.transform}get Region(){return this.region}get isSelfRegion(){return this.region===this}set Transform(t){this.transform=t}set Region(t){this.region=t}beforeClip(t,e){}afterRestore(t,e){}resetTransform(){this.transform=new l}}class c extends u{onDraw(){}}class m{constructor(t){let e;if(this.previousTimestamp=0,this.animationId=-1,this.scene=new c,this.camera=new l,this.modifiers=[],e="string"==typeof t?document.querySelector(t):t,null===e)throw new Error("Unable to identify canvas.");this.canvas=e,this.subReset=()=>{};const s=this.canvas.getContext("2d");this.context=s,(t=>{const e={context_reset:a(this.Context)};Object.freeze(e)})()}get Canvas(){return this.canvas}get Context(){return this.context}get Scene(){return this.scene}get Camera(){return this.camera}set Scene(t){t instanceof o&&t.setParent(null),this.scene=t}set Camera(t){this.camera=t}setSubResetFunction(t){this.subReset=t}resizeCanvas(t){var e,s;t instanceof n?(this.Canvas.width=t.X,this.Canvas.height=t.Y):(this.Canvas.width=null!==(e=null==t?void 0:t.w)&&void 0!==e?e:window.innerWidth,this.Canvas.height=null!==(s=null==t?void 0:t.h)&&void 0!==s?s:window.innerHeight)}start(){this.render(this.previousTimestamp)}stop(){cancelAnimationFrame(this.animationId)}registerModifier(t){t.register(),this.modifiers.push(t)}unregisterModifier(t){this.modifiers=this.modifiers.filter((e=>e!==t))}render(t){var e;const s=t-this.previousTimestamp;this.previousTimestamp=t;const i=[];for(const t of this.modifiers)t.Progress<1?t.tick():i.push(t);this.modifiers=this.modifiers.filter((t=>!i.includes(t))),this.context.reset(),this.subReset(this.context),this.context.transform(this.camera.m11,this.camera.m21,this.camera.m12,this.camera.m22,this.camera.ox,this.camera.oy),null===(e=this.scene)||void 0===e||e.draw(this.context,s),this.animationId=requestAnimationFrame(this.render.bind(this))}}class d extends r{constructor(t=0,e=0,s=0){super(t,e,s)}get X(){return this.values[0]}get Y(){return this.values[1]}get Z(){return this.values[2]}set X(t){this.values[0]=t}set Y(t){this.values[1]=t}set Z(t){this.values[2]=t}}class v extends r{constructor(t=0,e=0,s=0,i=0){super(t,e,s,i)}get X(){return this.values[0]}get Y(){return this.values[1]}get Z(){return this.values[2]}get W(){return this.values[3]}set X(t){this.values[0]=t}set Y(t){this.values[1]=t}set Z(t){this.values[2]=t}set W(t){this.values[3]=t}}return e})()));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFLMkIsQ0FDbkIsQ0FFV0ksTUFBRUgsR0FDWDNCLEtBQUtELE9BQU8sR0FBSzRCLENBQ25CLENBRVdrSyxNQUFFRCxHQUNYNUwsS0FBS0QsT0FBTyxHQUFLNkwsQ0FDbkIsQ0FFVy9ILE1BQUV1RyxHQUNYcEssS0FBS0QsT0FBTyxHQUFLcUssQ0FDbkIsRSIsInNvdXJjZXMiOlsid2VicGFjazovL2FydGlzdGljLWVuZ2luZS93ZWJwYWNrL3VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24iLCJ3ZWJwYWNrOi8vYXJ0aXN0aWMtZW5naW5lL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL2FydGlzdGljLWVuZ2luZS93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vYXJ0aXN0aWMtZW5naW5lL3dlYnBhY2svcnVudGltZS9oYXNPd25Qcm9wZXJ0eSBzaG9ydGhhbmQiLCJ3ZWJwYWNrOi8vYXJ0aXN0aWMtZW5naW5lL3dlYnBhY2svcnVudGltZS9tYWtlIG5hbWVzcGFjZSBvYmplY3QiLCJ3ZWJwYWNrOi8vYXJ0aXN0aWMtZW5naW5lLy4vc3JjL3ZlY3Rvci92ZWN0b3IudHMiLCJ3ZWJwYWNrOi8vYXJ0aXN0aWMtZW5naW5lLy4vc3JjL3ZlY3Rvci92ZWN0b3IyRC50cyIsIndlYnBhY2s6Ly9hcnRpc3RpYy1lbmdpbmUvLi9zcmMvdHJlZWl0ZW0vaW5kZXgudHMiLCJ3ZWJwYWNrOi8vYXJ0aXN0aWMtZW5naW5lLy4vc3JjL2VudGl0eS9lbnRpdHkudHMiLCJ3ZWJwYWNrOi8vYXJ0aXN0aWMtZW5naW5lLy4vc3JjL2NvbXBhdGliaWxpdHkvY29udGV4dF9yZXNldC50cyIsIndlYnBhY2s6Ly9hcnRpc3RpYy1lbmdpbmUvLi9zcmMvdHJhbnNmb3JtL3RyYW5zZm9ybS50cyIsIndlYnBhY2s6Ly9hcnRpc3RpYy1lbmdpbmUvLi9zcmMvc3ByaXRlL3Nwcml0ZS50cyIsIndlYnBhY2s6Ly9hcnRpc3RpYy1lbmdpbmUvLi9zcmMvc2NlbmVzL2JsYW5rX3NjZW5lLnRzIiwid2VicGFjazovL2FydGlzdGljLWVuZ2luZS8uL3NyYy9lbmdpbmUudHMiLCJ3ZWJwYWNrOi8vYXJ0aXN0aWMtZW5naW5lLy4vc3JjL2NvbXBhdGliaWxpdHkvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vYXJ0aXN0aWMtZW5naW5lLy4vc3JjL3ZlY3Rvci92ZWN0b3IzRC50cyIsIndlYnBhY2s6Ly9hcnRpc3RpYy1lbmdpbmUvLi9zcmMvdmVjdG9yL3ZlY3RvcjRELnRzIl0sInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiB3ZWJwYWNrVW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbihyb290LCBmYWN0b3J5KSB7XG5cdGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlID09PSAnb2JqZWN0Jylcblx0XHRtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoKTtcblx0ZWxzZSBpZih0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpXG5cdFx0ZGVmaW5lKFtdLCBmYWN0b3J5KTtcblx0ZWxzZSBpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcpXG5cdFx0ZXhwb3J0c1tcIm1haW5cIl0gPSBmYWN0b3J5KCk7XG5cdGVsc2Vcblx0XHRyb290W1wibWFpblwiXSA9IGZhY3RvcnkoKTtcbn0pKHNlbGYsICgpID0+IHtcbnJldHVybiAiLCIvLyBUaGUgcmVxdWlyZSBzY29wZVxudmFyIF9fd2VicGFja19yZXF1aXJlX18gPSB7fTtcblxuIiwiLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbnMgZm9yIGhhcm1vbnkgZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gKGV4cG9ydHMsIGRlZmluaXRpb24pID0+IHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gKG9iaiwgcHJvcCkgPT4gKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApKSIsIi8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uciA9IChleHBvcnRzKSA9PiB7XG5cdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuXHR9XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG59OyIsImV4cG9ydCBkZWZhdWx0IGFic3RyYWN0IGNsYXNzIFZlY3RvciB7XHJcbiAgcHJvdGVjdGVkIHJlYWRvbmx5IHNpemU6IG51bWJlcjtcclxuXHJcbiAgcHJvdGVjdGVkIHZhbHVlczogbnVtYmVyW107XHJcblxyXG4gIGNvbnN0cnVjdG9yKC4uLnZhbHVlczogbnVtYmVyW10pIHtcclxuICAgIHRoaXMudmFsdWVzID0gWy4uLnZhbHVlc107XHJcbiAgICB0aGlzLnNpemUgPSB2YWx1ZXMubGVuZ3RoO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGdldCBTaXplKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuc2l6ZTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBjb3B5PFQgZXh0ZW5kcyBWZWN0b3I+KHRvOiBULCBmb3JjZTogYm9vbGVhbiA9IGZhbHNlKTogVCB7XHJcbiAgICBpZiAodGhpcy5zaXplID4gdG8uc2l6ZSAmJiAhZm9yY2UpIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKFxyXG4gICAgICAgIGBDb3B5aW5nIHZlY3RvciBvZiBzaXplICR7dGhpcy5zaXplfSB0byAke3RvLnNpemV9IHdpbGwgY2F1c2UgZGF0YSBsb3NzLlxcbkluY2x1ZGUgZm9yY2Ugb3B0aW9uIGlmIGludGVuZGVkLmBcclxuICAgICAgKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRvLm92ZXJ3cml0ZSh0aGlzLnZhbHVlcyk7XHJcbiAgICAgIHJldHVybiB0bztcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHB1YmxpYyBpc2VxdWFsPFQgZXh0ZW5kcyBWZWN0b3I+KG90aGVyOiBULCBwcmVjaXNlPzogbnVtYmVyKTogYm9vbGVhbiB7XHJcbiAgICBpZiAodGhpcy5zaXplICE9PSBvdGhlci5zaXplKSByZXR1cm4gZmFsc2U7XHJcbiAgICBjb25zdCB0aGlzQXJyYXkgPSB0aGlzLnZhbHVlcy5zbGljZSgpO1xyXG4gICAgY29uc3Qgb3RoZXJBcnJheSA9IG90aGVyLnZhbHVlcy5zbGljZSgpO1xyXG4gICAgcmV0dXJuIHRoaXNBcnJheS5ldmVyeSgodiwgaSkgPT4ge1xyXG4gICAgICBpZiAocHJlY2lzZSA9PSBudWxsKSB7XHJcbiAgICAgICAgcmV0dXJuIHYgPT0gb3RoZXJBcnJheVtpXTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICByZXR1cm4gdi50b0ZpeGVkKHByZWNpc2UpID09IG90aGVyQXJyYXlbaV0udG9GaXhlZChwcmVjaXNlKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgc2hpZnQobW92ZTogbnVtYmVyID0gMSkge1xyXG4gICAgbW92ZSAlPSB0aGlzLnNpemU7XHJcbiAgICBjb25zdCB0ZW1wID0gdGhpcy52YWx1ZXMuc2xpY2UoMCwgLW1vdmUpO1xyXG4gICAgdGVtcC51bnNoaWZ0KC4uLnRoaXMudmFsdWVzLnNsaWNlKC1tb3ZlKSk7XHJcbiAgICAvLyBJdCBjaGFuZ2VzIGl0c2VsZiAocmVmZXJlbmNlKSwgZG9lcyBub3QgcmV0dXJuIG5ldyB2YWx1ZVxyXG4gICAgLy8gSWYgeW91IHdhbnQgdG8gbGV0IGl0IHJldHVybiBuZXcgdmFsdWUsIHlvdSBzaG91bGQgbW9kaWZ5IHRoaXMgc2VjdGlvblxyXG4gICAgdGhpcy52YWx1ZXMgPSB0ZW1wO1xyXG4gICAgcmV0dXJuIHRoaXM7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIG92ZXJ3cml0ZSh2YWx1ZXM6IG51bWJlcltdKSB7XHJcbiAgICBsZXQgY291bnRlciA9IDA7XHJcbiAgICB0aGlzLnZhbHVlcyA9IHRoaXMudmFsdWVzLm1hcChmdW5jdGlvbiAoKSB7XHJcbiAgICAgIGNvbnN0IG5ld1ZhbHVlID0gdmFsdWVzW2NvdW50ZXIrK107XHJcbiAgICAgIGlmIChuZXdWYWx1ZSkgcmV0dXJuIG5ld1ZhbHVlO1xyXG4gICAgICBlbHNlIHJldHVybiAwO1xyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBWZWN0b3IgZnJvbSBcIi4vdmVjdG9yXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBWZWN0b3IyRCBleHRlbmRzIFZlY3RvciB7XHJcbiAgY29uc3RydWN0b3IoeDogbnVtYmVyID0gMCwgeTogbnVtYmVyID0gMCkge1xyXG4gICAgc3VwZXIoeCwgeSk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgZ2V0IFgoKSB7XHJcbiAgICByZXR1cm4gdGhpcy52YWx1ZXNbMF07XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgZ2V0IFkoKSB7XHJcbiAgICByZXR1cm4gdGhpcy52YWx1ZXNbMV07XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgc2V0IFgoeDogbnVtYmVyKSB7XHJcbiAgICB0aGlzLnZhbHVlc1swXSA9IHg7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgc2V0IFkoeTogbnVtYmVyKSB7XHJcbiAgICB0aGlzLnZhbHVlc1sxXSA9IHk7XHJcbiAgfVxyXG59XHJcbiIsInR5cGUgVHJlZTxUPiA9IFQgJiBUcmVlSXRlbTxUPjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGFic3RyYWN0IGNsYXNzIFRyZWVJdGVtPFQ+IHtcclxuICBwcm90ZWN0ZWQgY2hpbGRyZW46IFRyZWU8VD5bXSA9IFtdO1xyXG5cclxuICBwcm90ZWN0ZWQgcGFyZW50OiBUcmVlPFQ+IHwgbnVsbCA9IG51bGw7XHJcblxyXG4gIHB1YmxpYyBnZXQgUGFyZW50KCkge1xyXG4gICAgcmV0dXJuIHRoaXMucGFyZW50O1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGdldCBDaGlsZHJlbigpIHtcclxuICAgIHJldHVybiB0aGlzLmNoaWxkcmVuLnNsaWNlKCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBDcmVhdGVzIHBhcmVudC1jaGlsZCByZWxhdGlvbiBiZXR3ZWVuIHRoaXMgZW50aXR5IGFuZCBlbnRpdGllcyBwYXNzZWQgdGhyb3VnaCB0aGUgcGFyYW1ldGVyLlxyXG4gICAqIElmIGNoaWxkcmVuIHBhc3NlZCBhbHJlYWR5IGhhcyBhIHBhcmVudCwgdGhlIHByZXZpb3VzIHJlbGF0aW9uIGlzIG92ZXJ3cml0dGVkLlxyXG4gICAqIHpfaW5kZXggY2FuIGJlIHNwZWNpZmllZCB0byBjb25maWd1cmUgcmVuZGVyaW5nIHNlcXVlbmNlIGJldHdlZW4gY2hpbGRyZW4uXHJcbiAgICogQHBhcmFtIGNoaWxkcmVuIFNpbmdsZSBlbnRpdHkgb3IgYW4gYXJyYXkgb2YgZW50aXRpZXMgdG8gYXR0YWNoLlxyXG4gICAqIEBwYXJhbSB6X2luZGV4IEluZGV4IGluIGFycmF5IG9mIGFsbCBjaGlsZHJlbiBpbiB0aGlzIGVudGl0eS4gVGhlIGhpZ2hlciBnZXRzIHJlbmRlcmQgbGF0ZXIuXHJcbiAgICogQHJldHVybnMgVGhlIHBvc2l0aW9uIGdpdmVuIGNoaWxkIGVudGl0eSBpcyBwdXQuXHJcbiAgICovXHJcbiAgcHVibGljIGF0dGFjaENoaWxkcmVuKFxyXG4gICAgdGhpczogVHJlZTxUPixcclxuICAgIGNoaWxkcmVuOiBUcmVlPFQ+W10gfCBUcmVlPFQ+LFxyXG4gICAgel9pbmRleDogbnVtYmVyID0gSW5maW5pdHlcclxuICApOiBudW1iZXIge1xyXG4gICAgbGV0IGxhc3RJbmRleDogbnVtYmVyID0gLTE7XHJcbiAgICBpZiAoQXJyYXkuaXNBcnJheShjaGlsZHJlbikpIHtcclxuICAgICAgY29uc3Qgc2FmZUluZGV4ID0gTWF0aC5tYXgoMCwgTWF0aC5taW4oel9pbmRleCwgdGhpcy5jaGlsZHJlbi5sZW5ndGgpKTtcclxuICAgICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IGNoaWxkcmVuLmxlbmd0aDsgaW5kZXgrKykge1xyXG4gICAgICAgIGxhc3RJbmRleCA9IHRoaXMuYXR0YWNoQ2hpbGRyZW4oY2hpbGRyZW5baW5kZXhdLCBzYWZlSW5kZXggKyBpbmRleCk7XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGZvciAoXHJcbiAgICAgICAgbGV0IHRlbXBQYXJlbnQ6IFRyZWU8VD4gfCBudWxsID0gdGhpcztcclxuICAgICAgICB0ZW1wUGFyZW50ICE9PSBudWxsO1xyXG4gICAgICAgIHRlbXBQYXJlbnQgPSB0ZW1wUGFyZW50LnBhcmVudFxyXG4gICAgICApIHtcclxuICAgICAgICBpZiAodGVtcFBhcmVudCA9PT0gY2hpbGRyZW4pIHtcclxuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkxvb3Agb2YgcGFyZW50LWNoaWxkIHJlbGF0aW9uc2hpcHMgZGV0ZWN0ZWQuXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICBjaGlsZHJlbi5wYXJlbnQ/LmRldGFjaENoaWxkcmVuKGNoaWxkcmVuKTtcclxuICAgICAgLy8gVE9ETzogTWF5YmUgZ29vZCBpZiB0aGVyZSdzIG9wdGlvbiB3aGljaCBkZWNpZGVzXHJcbiAgICAgIC8vICAgICAgIHdoZXRoZXIgaXQgZGV0YWNoZXMgYW5kIHJlLWF0dGFjaGVzIG9yIHRocm93cyBlcnJvclxyXG4gICAgICB0aGlzLmNoaWxkcmVuLnB1c2goY2hpbGRyZW4pO1xyXG4gICAgICBjaGlsZHJlbi5wYXJlbnQgPSB0aGlzO1xyXG4gICAgICBsYXN0SW5kZXggPSB0aGlzLnNldENoaWxkSW5kZXgoY2hpbGRyZW4sIHpfaW5kZXgpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGxhc3RJbmRleDsgLy8gaWYgcmV0dXJucyAtMSwgZW1wdHkgYXJyYXkgaGFzIGJlZW4gaW5wdXQuXHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBSZW1vdmVzIHBhcmVudC1jaGlsZCByZWxhdGlvbiBiZXR3ZWVuIHRoaXMgZW50aXR5IGFuZCBlbnRpdGllcyBwYXNzZWQgdGhyb3VnaCB0aGUgcGFyYW1ldGVyLlxyXG4gICAqIEBwYXJhbSBjaGlsZHJlbiBTaW5nbGUgZW50aXR5IG9yIGFuIGFycmF5IG9mIGVudGl0aWVzIHRvIGRldHRhY2guXHJcbiAgICovXHJcbiAgcHVibGljIGRldGFjaENoaWxkcmVuKGNoaWxkcmVuOiBUcmVlPFQ+W10gfCBUcmVlPFQ+KSB7XHJcbiAgICBpZiAoQXJyYXkuaXNBcnJheShjaGlsZHJlbikpIHtcclxuICAgICAgZm9yIChjb25zdCBjaGlsZCBvZiBjaGlsZHJlbikge1xyXG4gICAgICAgIHRoaXMuZGV0YWNoQ2hpbGRyZW4oY2hpbGQpO1xyXG4gICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBjb25zdCBpbmRleCA9IHRoaXMuY2hpbGRyZW4uaW5kZXhPZihjaGlsZHJlbik7XHJcbiAgICAgIGlmIChpbmRleCA+IC0xKSB7XHJcbiAgICAgICAgdGhpcy5jaGlsZHJlbi5zcGxpY2UoaW5kZXgsIDEpO1xyXG4gICAgICAgIGNoaWxkcmVuLnBhcmVudCA9IG51bGw7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFJldHJpZXZlcyBjaGlsZCBpbmRleCBvZiB0aGUgZW50aXR5IHBhc3NlZCB0aHJvdWdoIHRoZSBwYXJhbWV0ZXIgaW4gdGhlIGNoaWxkcmVuIGxpc3Qgb2YgdGhpcyBlbnRpdHkuXHJcbiAgICogSWYgY2hpbGRyZW4gcGFzc2VkIGlzIG5vdCBjaGlsZCBvZiB0aGlzIGluc3RhbmNlLCBhbiBlcnJvciBpcyB0aHJvd24uXHJcbiAgICogQHBhcmFtIGNoaWxkIFNpbmdsZSBlbnRpdHkgd2hpY2ggcmVxdWlyZSB0aGUgaW5kZXguXHJcbiAgICogQHJldHVybnMgVGhlIHBvc2l0aW9uIG9mIHRoZSBnaXZlbiBjaGlsZCBlbnRpdHkuXHJcbiAgICovXHJcbiAgcHVibGljIGdldENoaWxkSW5kZXgoY2hpbGQ6IFRyZWU8VD4pOiBudW1iZXIge1xyXG4gICAgcmV0dXJuIHRoaXMuY2hpbGRyZW4uaW5kZXhPZihjaGlsZCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBCYXNlZCBvbiBhbHJlYWR5IGV4aXN0aW5nIHBhcmVudC1jaGlsZCByZWxhdGlvbiwgdGhpcyBtZXRob2QgbW9kaWZpZXMgdGhlIGluZGV4IG9mIGdpdmVuIGNoaWxkIGluIHRoZSBjaGlsZHJlbiBsaXN0IG9mIHRoaXMgZW50aXR5LlxyXG4gICAqIEBwYXJhbSBjaGlsZCBTaW5nbGUgZW50aXR5IHRvIG1vZGlmeSBpbmRleC5cclxuICAgKiBAcGFyYW0gel9pbmRleCBJbmRleCBpbiBhcnJheSBvZiBjaGlsZHJlbiBpbiB0aGlzIGVudGl0eS4gVGhlIGhpZ2hlciBnZXRzIHJlbmRlcmQgbGF0ZXIuXHJcbiAgICogQHJldHVybnMgVGhlIHBvc2l0aW9uIGdpdmVuIGNoaWxkIGVudGl0eSBpcyBtb3ZlZCB0by5cclxuICAgKi9cclxuICBwdWJsaWMgc2V0Q2hpbGRJbmRleChjaGlsZDogVHJlZTxUPiwgaW5kZXg6IG51bWJlcik6IG51bWJlciB7XHJcbiAgICBjb25zdCBjdXJyZW50SW5kZXggPSB0aGlzLmdldENoaWxkSW5kZXgoY2hpbGQpO1xyXG4gICAgaWYgKGN1cnJlbnRJbmRleCA9PT0gLTEpIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSSBBTSBOT1QgWU9VUiBGQVRIRVJcIik7IC8vIHRvZG86IGJldHRlciBlcnJvciBtZXNzYWdlP1xyXG4gICAgfVxyXG4gICAgdGhpcy5jaGlsZHJlbi5zcGxpY2UoY3VycmVudEluZGV4LCAxKTtcclxuICAgIGNvbnN0IHNhZmVJbmRleCA9IE1hdGgubWF4KDAsIE1hdGgubWluKGluZGV4LCB0aGlzLmNoaWxkcmVuLmxlbmd0aCkpO1xyXG4gICAgdGhpcy5jaGlsZHJlbi5zcGxpY2Uoc2FmZUluZGV4LCAwLCBjaGlsZCk7XHJcbiAgICByZXR1cm4gc2FmZUluZGV4O1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQWxpYXMgb2YgYXR0YWNoQ2hpbGRyZW4uIHRoaXMgZW50aXR5IGlzIGRldHRhY2hlZCBmcm9tIHBhcmVudCBpZiBudWxsIGlzIHBhc3NlZC5cclxuICAgKiBAZXhhbXBsZVxyXG4gICAqIFRoZSBmb2xsb3dpbmcgdHdvIGxpbmVzZSBvZiBjb2RlIG1lYW5zIGV4YWN0bHkgc2FtZS5cclxuICAgKiBgYGB0c1xyXG4gICAqIEEuc2V0UGFyZW50KEIpO1xyXG4gICAqIEIuYXR0YWNoQ2hpbGRyZW4oQSk7XHJcbiAgICogYGBgXHJcbiAgICogQHBhcmFtIHBhcmVudCBwYXJlbnQgaW5zdGFuY2UgdG8gc2V0IGFzIHBhcmVudCBvZiB0aGlzIGVudGl0eS5cclxuICAgKi9cclxuICBwdWJsaWMgc2V0UGFyZW50KHRoaXM6IFRyZWU8VD4sIHBhcmVudDogVHJlZTxUPiB8IG51bGwgPSBudWxsKSB7XHJcbiAgICBpZiAocGFyZW50ID09IG51bGwpIHtcclxuICAgICAgdGhpcy5wYXJlbnQ/LmRldGFjaENoaWxkcmVuKHRoaXMpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcGFyZW50LmF0dGFjaENoaWxkcmVuKHRoaXMpO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgeyBWZWN0b3IyRCB9IGZyb20gXCIuLi92ZWN0b3JcIjtcclxuaW1wb3J0IElFbnRpdHkgZnJvbSBcIi4vaWVudGl0eVwiO1xyXG5pbXBvcnQgVHJlZUl0ZW0gZnJvbSBcIi4uL3RyZWVpdGVtXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBFbnRpdHkgZXh0ZW5kcyBUcmVlSXRlbTxFbnRpdHk+IGltcGxlbWVudHMgSUVudGl0eSB7XHJcbiAgcHJvdGVjdGVkIGRpbWVuc2lvbjogVmVjdG9yMkQgPSBuZXcgVmVjdG9yMkQoKTtcclxuXHJcbiAgcHJvdGVjdGVkIHBvc2l0aW9uOiBWZWN0b3IyRCA9IG5ldyBWZWN0b3IyRCgpO1xyXG5cclxuICBwdWJsaWMgY29uc3RydWN0b3IoY29uZmlnPzogSUVudGl0eSB8IHVuZGVmaW5lZCkge1xyXG4gICAgc3VwZXIoKTtcclxuICAgIGlmIChjb25maWcpIHtcclxuICAgICAgdGhpcy5kaW1lbnNpb24uWCA9IGNvbmZpZy5XID8/IDA7XHJcbiAgICAgIHRoaXMuZGltZW5zaW9uLlkgPSBjb25maWcuSCA/PyAwO1xyXG4gICAgICB0aGlzLnBvc2l0aW9uLlggPSBjb25maWcuWCA/PyAwO1xyXG4gICAgICB0aGlzLnBvc2l0aW9uLlkgPSBjb25maWcuWSA/PyAwO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHVibGljIGdldCBQb3NpdGlvbigpIHtcclxuICAgIHJldHVybiB0aGlzLnBvc2l0aW9uO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGdldCBYKCkge1xyXG4gICAgcmV0dXJuIHRoaXMucG9zaXRpb24uWDtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBnZXQgWSgpIHtcclxuICAgIHJldHVybiB0aGlzLnBvc2l0aW9uLlk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgZ2V0IERpbWVuc2lvbigpIHtcclxuICAgIHJldHVybiB0aGlzLmRpbWVuc2lvbjtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBnZXQgVygpIHtcclxuICAgIHJldHVybiB0aGlzLmRpbWVuc2lvbi5YO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGdldCBIKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuZGltZW5zaW9uLlk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgZ2V0IFdpZHRoKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuZGltZW5zaW9uLlg7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgZ2V0IEhlaWdodCgpIHtcclxuICAgIHJldHVybiB0aGlzLmRpbWVuc2lvbi5ZO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGdldCBBYnNvbHV0ZVgoKTogbnVtYmVyIHtcclxuICAgIGNvbnN0IHBhcmVudFggPSB0aGlzLnBhcmVudD8uQWJzb2x1dGVYID8/IDA7XHJcbiAgICByZXR1cm4gcGFyZW50WCArIHRoaXMucG9zaXRpb24uWDtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBnZXQgQWJzb2x1dGVZKCk6IG51bWJlciB7XHJcbiAgICBjb25zdCBwYXJlbnRZID0gdGhpcy5wYXJlbnQ/LkFic29sdXRlWSA/PyAwO1xyXG4gICAgcmV0dXJuIHBhcmVudFkgKyB0aGlzLnBvc2l0aW9uLlk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgc2V0IFBvc2l0aW9uKHBvc2l0aW9uOiBWZWN0b3IyRCkge1xyXG4gICAgdGhpcy5wb3NpdGlvbiA9IHBvc2l0aW9uO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIHNldCBYKHg6IG51bWJlcikge1xyXG4gICAgdGhpcy5wb3NpdGlvbi5YID0geDtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBzZXQgWSh5OiBudW1iZXIpIHtcclxuICAgIHRoaXMucG9zaXRpb24uWSA9IHk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgc2V0IERpbWVuc2lvbihkaW1lbnNpb246IFZlY3RvcjJEKSB7XHJcbiAgICB0aGlzLmRpbWVuc2lvbiA9IGRpbWVuc2lvbjtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBzZXQgVyh3aWR0aDogbnVtYmVyKSB7XHJcbiAgICB0aGlzLmRpbWVuc2lvbi5YID0gd2lkdGg7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgc2V0IEgoaGVpZ2h0OiBudW1iZXIpIHtcclxuICAgIHRoaXMuZGltZW5zaW9uLlkgPSBoZWlnaHQ7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgc2V0IFdpZHRoKHdpZHRoOiBudW1iZXIpIHtcclxuICAgIHRoaXMuZGltZW5zaW9uLlggPSB3aWR0aDtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBzZXQgSGVpZ2h0KGhlaWdodDogbnVtYmVyKSB7XHJcbiAgICB0aGlzLmRpbWVuc2lvbi5ZID0gaGVpZ2h0O1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCAoY29udGV4dDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEKSA9PiB7XHJcbiAgaWYgKCg8YW55PmNvbnRleHQpLnJlc2V0ICE9IG51bGwpIHtcclxuICAgIHJldHVybiB0cnVlO1xyXG4gIH1cclxuXHJcbiAgLy8gQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEI3Jlc2V0IGlzIGEgZXhwZXJpbWVudGFsIG1ldGhvZC4gd2hpY2ggbWF5IG5vdCBiZSBpbmNsdWRlZCBpbiBzb21lIGJyb3dzZXJzIGluY2x1ZGluZyBmaXJlZm94LlxyXG4gIC8vIFRoaXMgYmxvY2sgd2lsbCBjcmVhdGUgcmVzZXQgbWV0aG9kIG1vY2tpbmcgdGhlIGJlaGF2aW9yIGRlc2NyaWJlZCBpbiBDaHJvbWl1bSBzb3VyY2UgY29kZS5cclxuICAvLyBJbiBvcmRlciB0byBrZWVwIHRyYWNrIG9mIGRlZmF1bHQgc3RhdGUgc3RhY2sgaW4gY29udGV4dCwgcmVsZXZhbnQgbWV0aG9kcyBhcmUgbW9kaWZlaWVkL2FkZGVkIGFzIGEgc2lkZSBlZmZlY3QuXHJcbiAgY29udGV4dC5zYXZlKCk7XHJcbiAgbGV0IHN0YXRlQ291bnQgPSAwO1xyXG5cclxuICBjb25zdCB0ZW1wU2F2ZSA9IGNvbnRleHQuc2F2ZTtcclxuICBjb25zdCB0ZW1wUmVzdG9yZSA9IGNvbnRleHQucmVzdG9yZTtcclxuXHJcbiAgY29udGV4dC5zYXZlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdGVtcFNhdmUuY2FsbCh0aGlzKTtcclxuICAgIHN0YXRlQ291bnQrKztcclxuICB9O1xyXG5cclxuICBjb250ZXh0LnJlc3RvcmUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICBpZiAoc3RhdGVDb3VudCA+IDApIHtcclxuICAgICAgdGVtcFJlc3RvcmUuY2FsbCh0aGlzKTtcclxuICAgICAgc3RhdGVDb3VudC0tO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIGNvbnN0IHJlc3RvcmVSb290ID0gZnVuY3Rpb24gKF9jb250ZXh0OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQpIHtcclxuICAgIGZvciAobGV0IGNvdW50ID0gc3RhdGVDb3VudDsgY291bnQgPiAtMTsgY291bnQtLSkge1xyXG4gICAgICB0ZW1wUmVzdG9yZS5jYWxsKF9jb250ZXh0KTtcclxuICAgIH1cclxuICAgIHN0YXRlQ291bnQgPSAtMTtcclxuICB9O1xyXG5cclxuICAoPGFueT5jb250ZXh0KS5yZXNldCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHJlc3RvcmVSb290KGNvbnRleHQpO1xyXG4gICAgdGhpcy5tb3ZlVG8oMCwgMCk7XHJcbiAgICB0aGlzLmJlZ2luUGF0aCgpO1xyXG4gICAgdGhpcy5jbG9zZVBhdGgoKTtcclxuICAgIHRoaXMucmVzZXRUcmFuc2Zvcm0oKTtcclxuICAgIHRoaXMuY2xlYXJSZWN0KDAsIDAsIHRoaXMuY2FudmFzLndpZHRoLCB0aGlzLmNhbnZhcy5oZWlnaHQpO1xyXG4gICAgdGhpcy5zYXZlKCk7XHJcbiAgfTtcclxuICByZXR1cm4gZmFsc2U7XHJcbn07XHJcbiIsImltcG9ydCB7IFZlY3RvcjJEIH0gZnJvbSBcIi4uL3ZlY3RvclwiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVHJhbnNmb3JtIHtcclxuICBwcml2YXRlIHZhbHVlczogW251bWJlciwgbnVtYmVyLCBudW1iZXIsIG51bWJlciwgbnVtYmVyLCBudW1iZXJdO1xyXG5cclxuICBjb25zdHJ1Y3RvcihcclxuICAgIG0xMTogbnVtYmVyID0gMSxcclxuICAgIG0xMjogbnVtYmVyID0gMCxcclxuICAgIG0yMTogbnVtYmVyID0gMCxcclxuICAgIG0yMjogbnVtYmVyID0gMSxcclxuICAgIG94OiBudW1iZXIgPSAwLFxyXG4gICAgb3k6IG51bWJlciA9IDBcclxuICApIHtcclxuICAgIHRoaXMudmFsdWVzID0gW20xMSwgbTEyLCBtMjEsIG0yMiwgb3gsIG95XTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEdldHRlciBwcm9wZXJ0eSBvZiBtMTFcclxuICAgKi9cclxuICBnZXQgbTExKCk6IG51bWJlciB7XHJcbiAgICByZXR1cm4gdGhpcy52YWx1ZXNbMF07XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBHZXR0ZXIgcHJvcGVydHkgb2YgbTEyXHJcbiAgICovXHJcbiAgZ2V0IG0xMigpOiBudW1iZXIge1xyXG4gICAgcmV0dXJuIHRoaXMudmFsdWVzWzFdO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogR2V0dGVyIHByb3BlcnR5IG9mIG0yMVxyXG4gICAqL1xyXG4gIGdldCBtMjEoKTogbnVtYmVyIHtcclxuICAgIHJldHVybiB0aGlzLnZhbHVlc1syXTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEdldHRlciBwcm9wZXJ0eSBvZiBtMjJcclxuICAgKi9cclxuICBnZXQgbTIyKCk6IG51bWJlciB7XHJcbiAgICByZXR1cm4gdGhpcy52YWx1ZXNbM107XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBHZXR0ZXIgcHJvcGVydHkgb2Ygb2Zmc2V0IHhcclxuICAgKi9cclxuICBnZXQgb3goKTogbnVtYmVyIHtcclxuICAgIHJldHVybiB0aGlzLnZhbHVlc1s0XTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEdldHRlciBwcm9wZXJ0eSBvZiBvZmZzZXQgeVxyXG4gICAqL1xyXG4gIGdldCBveSgpOiBudW1iZXIge1xyXG4gICAgcmV0dXJuIHRoaXMudmFsdWVzWzVdO1xyXG4gIH1cclxuXHJcbiAgZ2V0IERldGVybWluYW50KCk6IG51bWJlciB7XHJcbiAgICByZXR1cm4gdGhpcy5tMTEgKiB0aGlzLm0yMiAtIHRoaXMubTEyICogdGhpcy5tMjE7XHJcbiAgfVxyXG5cclxuICBnZXQgaXNJbnZlcnRpYmxlKCk6IGJvb2xlYW4ge1xyXG4gICAgcmV0dXJuIHRoaXMuRGV0ZXJtaW5hbnQgIT09IDA7XHJcbiAgfVxyXG5cclxuICBnZXQgaXNJZGVudGl0eSgpOiBib29sZWFuIHtcclxuICAgIHJldHVybiAoXHJcbiAgICAgIHRoaXMubTExID09PSAxICYmXHJcbiAgICAgIHRoaXMubTIyID09PSAxICYmXHJcbiAgICAgIHRoaXMubTEyID09PSAwICYmXHJcbiAgICAgIHRoaXMubTIxID09PSAwICYmXHJcbiAgICAgIHRoaXMub3ggPT09IDAgJiZcclxuICAgICAgdGhpcy5veSA9PT0gMFxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFNldHRlciBwcm9wZXJ0eSBvZiBtMTFcclxuICAgKi9cclxuICBzZXQgbTExKHZhbHVlOiBudW1iZXIpIHtcclxuICAgIHRoaXMudmFsdWVzWzBdID0gdmFsdWU7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBTZXR0ZXIgcHJvcGVydHkgb2YgbTEyXHJcbiAgICovXHJcbiAgc2V0IG0xMih2YWx1ZTogbnVtYmVyKSB7XHJcbiAgICB0aGlzLnZhbHVlc1sxXSA9IHZhbHVlO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogU2V0dGVyIHByb3BlcnR5IG9mIG0yMVxyXG4gICAqL1xyXG4gIHNldCBtMjEodmFsdWU6IG51bWJlcikge1xyXG4gICAgdGhpcy52YWx1ZXNbMl0gPSB2YWx1ZTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFNldHRlciBwcm9wZXJ0eSBvZiBtMjJcclxuICAgKi9cclxuICBzZXQgbTIyKHZhbHVlOiBudW1iZXIpIHtcclxuICAgIHRoaXMudmFsdWVzWzNdID0gdmFsdWU7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBTZXR0ZXIgcHJvcGVydHkgb2Ygb2Zmc2V0IHhcclxuICAgKi9cclxuICBzZXQgb3godmFsdWU6IG51bWJlcikge1xyXG4gICAgdGhpcy52YWx1ZXNbNF0gPSB2YWx1ZTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFNldHRlciBwcm9wZXJ0eSBvZiBvZmZzZXQgeVxyXG4gICAqL1xyXG4gIHNldCBveSh2YWx1ZTogbnVtYmVyKSB7XHJcbiAgICB0aGlzLnZhbHVlc1s1XSA9IHZhbHVlO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIHN0YXRpYyBmcm9tRE9NKGRvbTogRE9NTWF0cml4KSB7XHJcbiAgICByZXR1cm4gbmV3IHRoaXMoZG9tLmEsIGRvbS5jLCBkb20uYiwgZG9tLmQsIGRvbS5lLCBkb20uZik7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBUcmFuc2xhdGUgY3VycmVudCBjb29yZGluYXRlIHN5c3RlbSBieSBnaXZlbiBvZmZzZXQuXHJcbiAgICogQHBhcmFtIHggLSBYIHZhbHVlIG9mIHRoZSBtb3ZlbWVudC5cclxuICAgKiBAcGFyYW0geSAtIFkgdmFsdWUgb2YgdGhlIG1vdmVtZW50LlxyXG4gICAqIEByZXR1cm5zIEl0c2VsZiB3aGljaCBnb3QgbW92ZWQuXHJcbiAgICovXHJcbiAgcHVibGljIHRyYW5zbGF0ZSh4OiBudW1iZXIsIHk6IG51bWJlcik6IHRoaXMge1xyXG4gICAgdGhpcy5veCArPSB4O1xyXG4gICAgdGhpcy5veSArPSB5O1xyXG4gICAgcmV0dXJuIHRoaXM7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBTY2FsZXMgdGhlIHdob2xlIHNjZW5lLiBCaWdnZXIgdGhlIHZhbHVlIGlzLCBCaWdnZXIgdGhlIGVudGl0aWVzIHNob3cuXHJcbiAgICogQHBhcmFtIHZhbHVlIC0gU2NhbGUgcmF0aW8gb2YgYm90aCBkaXJlY3Rpb24uXHJcbiAgICogQHJldHVybnMgSXRzZWxmIHdoaWNoIGdvdCBzY2FsZWQuXHJcbiAgICovXHJcbiAgcHVibGljIHNjYWxlKHZhbHVlOiBudW1iZXIpOiB0aGlzO1xyXG4gIC8qKlxyXG4gICAqIFNjYWxlcyB0aGUgd2hvbGUgc2NlbmUuIEJpZ2dlciB0aGUgdmFsdWUgaXMsIEJpZ2dlciB0aGUgb2JqZWN0cyBzaG93LlxyXG4gICAqIEBwYXJhbSB4IC0gU2NhbGUgcmF0aW8gb2YgWCBkaXJlY3Rpb24uXHJcbiAgICogQHBhcmFtIHkgLSBTY2FsZSByYXRpbyBvZiBZIGRpcmVjdGlvbi5cclxuICAgKiBAcmV0dXJucyBJdHNlbGYgd2hpY2ggZ290IHNjYWxlZC5cclxuICAgKi9cclxuICBwdWJsaWMgc2NhbGUoeDogbnVtYmVyLCB5OiBudW1iZXIpOiB0aGlzO1xyXG4gIHB1YmxpYyBzY2FsZSh4OiBudW1iZXIsIHk/OiBudW1iZXIpOiB0aGlzIHtcclxuICAgIGlmICh5ID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgcmV0dXJuIHRoaXMuc2NhbGUoeCwgeCk7XHJcbiAgICB9XHJcbiAgICBbMCwgMSwgNF0uZm9yRWFjaCgodikgPT4ge1xyXG4gICAgICB0aGlzLnZhbHVlc1t2XSAqPSB4O1xyXG4gICAgfSk7XHJcbiAgICBbMiwgMywgNV0uZm9yRWFjaCgodikgPT4ge1xyXG4gICAgICB0aGlzLnZhbHVlc1t2XSAqPSB5O1xyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gdGhpcztcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEFwcGx5IGxpbmVhciB0cmFuc2Zvcm1hdGlvbi5cclxuICAgKiBAcGFyYW0gbTExIC0gRWxlbWVudCBvZiB0aGUgbWF0cml4IGF0IGAoMSwgMSlgLlxyXG4gICAqIEBwYXJhbSBtMTIgLSBFbGVtZW50IG9mIHRoZSBtYXRyaXggYXQgYCgxLCAyKWAuXHJcbiAgICogQHBhcmFtIG0yMSAtIEVsZW1lbnQgb2YgdGhlIG1hdHJpeCBhdCBgKDIsIDEpYC5cclxuICAgKiBAcGFyYW0gbTIyIC0gRWxlbWVudCBvZiB0aGUgbWF0cml4IGF0IGAoMiwgMilgLlxyXG4gICAqIEBwYXJhbSBveCAtIEVsZW1lbnQgb2YgdGhlIG1hdHJpeCBhdCBgKDMsIDEpYC5cclxuICAgKiBAcGFyYW0gb3kgLSBFbGVtZW50IG9mIHRoZSBtYXRyaXggYXQgYCgzLCAyKWAuXHJcbiAgICogQHJldHVybnMgSXRzZWxmIHdoaWNoIGdvdCBhcHBsaWVkLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBsaW5lYXIoXHJcbiAgICBtMTE6IG51bWJlcixcclxuICAgIG0xMjogbnVtYmVyLFxyXG4gICAgbTIxOiBudW1iZXIsXHJcbiAgICBtMjI6IG51bWJlcixcclxuICAgIG94OiBudW1iZXIsXHJcbiAgICBveTogbnVtYmVyXHJcbiAgKTogdGhpcyB7XHJcbiAgICB0aGlzLnZhbHVlcyA9IFtcclxuICAgICAgbTExICogdGhpcy5tMTEgKyBtMTIgKiB0aGlzLm0yMSxcclxuICAgICAgbTExICogdGhpcy5tMTIgKyBtMTIgKiB0aGlzLm0yMixcclxuICAgICAgbTIxICogdGhpcy5tMTEgKyBtMjIgKiB0aGlzLm0yMSxcclxuICAgICAgbTIxICogdGhpcy5tMTIgKyBtMjIgKiB0aGlzLm0yMixcclxuICAgICAgbTExICogdGhpcy5veCArIG0xMiAqIHRoaXMub3kgKyBveCxcclxuICAgICAgbTIxICogdGhpcy5veCArIG0yMiAqIHRoaXMub3kgKyBveSxcclxuICAgIF07XHJcbiAgICByZXR1cm4gdGhpcztcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFJvdGF0ZSB0aGUgY2FtZXJhIGNvdW50Y2xvY2t3aXNlLlxyXG4gICAqIEBwYXJhbSBhbmdsZSAtIFRoZSByb3RhdGlvbiBhbmdsZSB5b3Ugd2FudC4gKGluICpkZWdyZWVzKilcclxuICAgKiBAcmV0dXJucyBJdHNlbGYgd2hpY2ggZ290IHJvdGF0ZWQuXHJcbiAgICovXHJcbiAgcHVibGljIHJvdGF0ZShhbmdsZTogbnVtYmVyLCBwb2ludFg6IG51bWJlciA9IDAsIHBvaW50WTogbnVtYmVyID0gMCk6IHRoaXMge1xyXG4gICAgYW5nbGUgPSAoYW5nbGUgKiBNYXRoLlBJKSAvIDE4MDtcclxuICAgIGNvbnN0IHNpblZhbHVlID0gTWF0aC5zaW4oYW5nbGUpO1xyXG4gICAgY29uc3QgY29zVmFsdWUgPSBNYXRoLmNvcyhhbmdsZSk7XHJcbiAgICByZXR1cm4gdGhpcy50cmFuc2xhdGUoLXBvaW50WCwgLXBvaW50WSlcclxuICAgICAgLmxpbmVhcihjb3NWYWx1ZSwgc2luVmFsdWUsIC1zaW5WYWx1ZSwgY29zVmFsdWUsIDAsIDApXHJcbiAgICAgIC50cmFuc2xhdGUocG9pbnRYLCBwb2ludFkpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQXBwbHkgdHJhbnNmb3JtIHRvIHRoZSBnaWVuIGNvb3JkaW5hdGUgdmFsdWVzLlxyXG4gICAqIEBwYXJhbSB4IC0gWCB2YWx1ZSBvZiB0aGUgY29vcmRpbmF0ZS5cclxuICAgKiBAcGFyYW0geSAtIFkgdmFsdWUgb2YgdGhlIGNvb3JkaW5hdGUuXHJcbiAgICogQHJldHVybnMgQWN0dWFsIGNvb3JkaW5hdGUgdmFsdWVzIHlvdXIgY29vcmRpbmF0ZSB3aWxsIGFwcGVhciBhdC5cclxuICAgKi9cclxuICBwdWJsaWMgYXBwbHkoeDogbnVtYmVyIHwgVmVjdG9yMkQsIHk/OiBudW1iZXIpOiBWZWN0b3IyRCB7XHJcbiAgICBsZXQgdjogVmVjdG9yMkQ7XHJcbiAgICBpZiAoeCBpbnN0YW5jZW9mIFZlY3RvcjJEKSB7XHJcbiAgICAgIHYgPSB4O1xyXG4gICAgICB5ID0geC5ZO1xyXG4gICAgICB4ID0geC5YO1xyXG4gICAgICB2LlggPSB0aGlzLm0xMSAqIHggKyB0aGlzLm0xMiAqIHkgKyB0aGlzLm94O1xyXG4gICAgICB2LlkgPSB0aGlzLm0yMSAqIHggKyB0aGlzLm0yMiAqIHkgKyB0aGlzLm95O1xyXG4gICAgfSBlbHNlIGlmICh5ICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgdiA9IG5ldyBWZWN0b3IyRChcclxuICAgICAgICB0aGlzLm0xMSAqIHggKyB0aGlzLm0xMiAqIHkgKyB0aGlzLm94LFxyXG4gICAgICAgIHRoaXMubTIxICogeCArIHRoaXMubTIyICogeSArIHRoaXMub3lcclxuICAgICAgKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcihcclxuICAgICAgICBcIlRyYW5zZm9ybSNhcHBseSBtZXRob2QgcmVxdWlyZXMgdHdvIG51bWJlciBwYXJhbWV0ZXJzIG9yIG9uZSBWZWN0b3IyRC5cIlxyXG4gICAgICApO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHY7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBNdWx0aXBseSBnaXZlbiB0cmFuc2Zvcm0gdG8gdGhpcyB0cmFuc2Zvcm0uIEEgPSBBQiB3aGVyZSB0aGlzIGlzIEEgYW5kIGdpdmVuIHBhcmFtIGlzIEIuXHJcbiAgICogQHBhcmFtIEIgLSBYIHZhbHVlIG9mIHRoZSBjb29yZGluYXRlLlxyXG4gICAqIEByZXR1cm5zIHRoaXMgdHJhbnNmb3JtIGFmdGVyIHRyYW5zZm9ybWF0aW9uLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBtdWx0aXBseShCOiBUcmFuc2Zvcm0pOiB0aGlzIHtcclxuICAgIHJldHVybiB0aGlzLmxpbmVhciguLi5CLnZhbHVlcyk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBJbnZlcnQgdGhpcyBtYXRyaXggaWYgaW52ZXJ0aWJsZS5cclxuICAgKiBAcmV0dXJucyB0aGlzIHRyYW5zZm9ybS5cclxuICAgKi9cclxuICBwdWJsaWMgaW52ZXJ0KCkge1xyXG4gICAgY29uc3QgZGV0ID0gdGhpcy5EZXRlcm1pbmFudDtcclxuICAgIGlmIChkZXQgPT09IDApIHRocm93IG5ldyBFcnJvcihcIlRoaXMgdHJhbnNmb3JtIGlzIG5vdCBpbnZlcnRpYmxlXCIpO1xyXG4gICAgY29uc3QgbTExID0gdGhpcy5tMjIgLyBkZXQ7XHJcbiAgICBjb25zdCBtMTIgPSAodGhpcy5tMTIgKiAtMSkgLyBkZXQ7XHJcbiAgICBjb25zdCBveCA9ICh0aGlzLm0xMiAqIHRoaXMub3kgLSB0aGlzLm0yMiAqIHRoaXMub3gpIC8gZGV0O1xyXG4gICAgY29uc3QgbTIxID0gKHRoaXMubTIxICogLTEpIC8gZGV0O1xyXG4gICAgY29uc3QgbTIyID0gdGhpcy5tMTEgLyBkZXQ7XHJcbiAgICBjb25zdCBveSA9ICgodGhpcy5tMTEgKiB0aGlzLm95IC0gdGhpcy5tMjEgKiB0aGlzLm94KSAqIC0xKSAvIGRldDtcclxuXHJcbiAgICB0aGlzLm0xMSA9IG0xMTtcclxuICAgIHRoaXMubTEyID0gbTEyO1xyXG4gICAgdGhpcy5veCA9IG94O1xyXG4gICAgdGhpcy5tMjEgPSBtMjE7XHJcbiAgICB0aGlzLm0yMiA9IG0yMjtcclxuICAgIHRoaXMub3kgPSBveTtcclxuICAgIHJldHVybiB0aGlzO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogU2tld3MgdGhlIHNwcml0ZS5cclxuICAgKiBAcGFyYW0geF9zbG9wZSAtIEhvdyBtdWNoIHlvdSB3YW50IHRvIHNrZXcgdG8gWC1heGlzLlxyXG4gICAqIEBwYXJhbSB5X3Nsb3BlIC0gSG93IG11Y2ggeW91IHdhbnQgdG8gc2tldyB0byBZLWF4aXMuXHJcbiAgICogQHJldHVybnMgSXRzZWxmIHNrZXdlZC5cclxuICAgKi9cclxuICBwdWJsaWMgc2tldyh4X3Nsb3BlOiBudW1iZXIgPSAwLCB5X3Nsb3BlOiBudW1iZXIgPSAwKTogdGhpcyB7XHJcbiAgICB0aGlzLmxpbmVhcigxLCB4X3Nsb3BlLCB5X3Nsb3BlLCAxLCAwLCAwKTtcclxuICAgIHJldHVybiB0aGlzO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogTWFrZXMgYSBjb3B5IG9mIHRoaXMgdHJhbnNmb3JtLlxyXG4gICAqIEByZXR1cm5zIGEgY29weSBvZiB0aGlzIG1hdHJpeFxyXG4gICAqL1xyXG4gIHB1YmxpYyBjb3B5KCk6IFRyYW5zZm9ybSB7XHJcbiAgICByZXR1cm4gbmV3IFRyYW5zZm9ybSguLi50aGlzLnZhbHVlcyk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBbYERPTU1hdHJpeGBdOiBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvRE9NTWF0cml4XHJcbiAgICogW2BET01NYXRyaXhgXSBnZXR0ZXIgbWV0aG9kLlxyXG4gICAqIEByZXR1cm5zIFtgRE9NTWF0cml4YF0gb2JqZWN0IG1hZGUgZnJvbSB0aGlzIHZhbHVlcy5cclxuICAgKi9cclxuICBwdWJsaWMgdG9ET00oKTogRE9NTWF0cml4IHtcclxuICAgIHJldHVybiBuZXcgRE9NTWF0cml4KFtcclxuICAgICAgdGhpcy5tMTEsXHJcbiAgICAgIHRoaXMubTIxLFxyXG4gICAgICB0aGlzLm0xMixcclxuICAgICAgdGhpcy5tMjIsXHJcbiAgICAgIHRoaXMub3gsXHJcbiAgICAgIHRoaXMub3ksXHJcbiAgICBdKTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgRW50aXR5IH0gZnJvbSBcIi4uL2VudGl0eVwiO1xyXG5pbXBvcnQgeyBUcmFuc2Zvcm0gfSBmcm9tIFwiLi4vdHJhbnNmb3JtXCI7XHJcbmltcG9ydCBJRHJhd2FibGUgZnJvbSBcIi4vaWRyYXdhYmxlXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBhYnN0cmFjdCBjbGFzcyBTcHJpdGUgZXh0ZW5kcyBFbnRpdHkgaW1wbGVtZW50cyBJRHJhd2FibGUge1xyXG4gIHByaXZhdGUgcmVnaW9uOiBFbnRpdHkgfCB1bmRlZmluZWQ7XHJcblxyXG4gIHByaXZhdGUgdHJhbnNmb3JtOiBUcmFuc2Zvcm0gfCB1bmRlZmluZWQ7XHJcblxyXG4gIC8qKlxyXG4gICAqIEdldHRlciBwcm9wZXJ0eSBmb3IgdHJhbnNmb3JtLlxyXG4gICAqIEByZXR1cm5zIFRoZSBtYXRyaXggdHJhbnNmb3JtIGFwcGxpZWQgdG8gdGhpcyBzcHJpdGUuXHJcbiAgICovXHJcbiAgcHVibGljIGdldCBUcmFuc2Zvcm0oKTogVHJhbnNmb3JtIHtcclxuICAgIGlmICghdGhpcy50cmFuc2Zvcm0pIHRoaXMudHJhbnNmb3JtID0gbmV3IFRyYW5zZm9ybSgpO1xyXG4gICAgcmV0dXJuIHRoaXMudHJhbnNmb3JtO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogR2V0dGVyIHByb3BlcnR5IGZvciByZWdpb24uXHJcbiAgICogQHJldHVybnMgVGhlIGRyYXdpbmcgcmVnaW9uIHRoaXMgc3ByaXRlIGlzIGluZGljYXRpbmcuIFNwcml0ZXMgYXJlIGNsaXBwZWQgYnkgdGhlaXIgcmVnaW9uLlxyXG4gICAqIEBzZWUgW0NhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCNjbGlwXShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEL2NsaXApXHJcbiAgICovXHJcbiAgcHVibGljIGdldCBSZWdpb24oKTogRW50aXR5IHwgdW5kZWZpbmVkIHtcclxuICAgIHJldHVybiB0aGlzLnJlZ2lvbjtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEByZXR1cm5zIEJvb2xlYW4gdGhhdCBkZXRlcm1pbmVzIHdoZXRoZXIgdGhlIHJlZ2lvbiBvZiB0aGlzIHNwcml0ZSBpbmRpY2F0ZXMgaXQgc2VsZi5cclxuICAgKiBAc2VlIHtAbGluayBSZWdpb259XHJcbiAgICovXHJcbiAgcHVibGljIGdldCBpc1NlbGZSZWdpb24oKTogYm9vbGVhbiB7XHJcbiAgICByZXR1cm4gdGhpcy5yZWdpb24gPT09IHRoaXM7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBTZXR0ZXIgcHJvcGVydHkgZm9yIHRyYW5zZm9ybS5cclxuICAgKi9cclxuICBwdWJsaWMgc2V0IFRyYW5zZm9ybSh0cmFuc2Zvcm06IFRyYW5zZm9ybSkge1xyXG4gICAgdGhpcy50cmFuc2Zvcm0gPSB0cmFuc2Zvcm07XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBTZXR0ZXIgcHJvcGVydHkgZm9yIHJlZ2lvbi5cclxuICAgKi9cclxuICBwdWJsaWMgc2V0IFJlZ2lvbihyZWdpb246IEVudGl0eSB8IHVuZGVmaW5lZCkge1xyXG4gICAgdGhpcy5yZWdpb24gPSByZWdpb247XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBAaW5oZXJpdGRvY1xyXG4gICAqL1xyXG4gIHB1YmxpYyByZWFkb25seSBkcmF3ID0gKGNvbnRleHQ6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCwgZGVsYXk6IG51bWJlcikgPT4ge1xyXG4gICAgY29udGV4dC5zYXZlKCk7XHJcblxyXG4gICAgY29udGV4dC50cmFuc2xhdGUodGhpcy5BYnNvbHV0ZVgsIHRoaXMuQWJzb2x1dGVZKTtcclxuXHJcbiAgICBpZiAodGhpcy50cmFuc2Zvcm0pIHtcclxuICAgICAgY29udGV4dC50cmFuc2Zvcm0oXHJcbiAgICAgICAgdGhpcy50cmFuc2Zvcm0ubTExLFxyXG4gICAgICAgIHRoaXMudHJhbnNmb3JtLm0yMSxcclxuICAgICAgICB0aGlzLnRyYW5zZm9ybS5tMTIsXHJcbiAgICAgICAgdGhpcy50cmFuc2Zvcm0ubTIyLFxyXG4gICAgICAgIHRoaXMudHJhbnNmb3JtLm94LFxyXG4gICAgICAgIHRoaXMudHJhbnNmb3JtLm95XHJcbiAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHRoaXMucmVnaW9uKSB7XHJcbiAgICAgIHRoaXMuYmVmb3JlQ2xpcChjb250ZXh0LCBkZWxheSk7XHJcbiAgICAgIGNvbnRleHQuYmVnaW5QYXRoKCk7XHJcbiAgICAgIGNvbnRleHQucmVjdCgwLCAwLCB0aGlzLnJlZ2lvbi5XaWR0aCwgdGhpcy5yZWdpb24uSGVpZ2h0KTtcclxuICAgICAgY29udGV4dC5jbGlwKCk7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5vbkRyYXcoY29udGV4dCwgZGVsYXkpO1xyXG5cclxuICAgIGNvbnRleHQucmVzdG9yZSgpO1xyXG5cclxuICAgIHRoaXMuYWZ0ZXJSZXN0b3JlKGNvbnRleHQsIGRlbGF5KTtcclxuICAgIGZvciAoY29uc3QgY2hpbGQgb2YgdGhpcy5DaGlsZHJlbikge1xyXG4gICAgICBpZiAoIShjaGlsZCBpbnN0YW5jZW9mIFNwcml0ZSkpIGNvbnRpbnVlO1xyXG4gICAgICBjaGlsZC5kcmF3KGNvbnRleHQsIGRlbGF5KTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICAvKipcclxuICAgKiBQcmUtY2xpcCB0YXNrcyBwZXJmb3JtZWQgZm9yIGNhbnZhcyBjb250ZXh0IHJlc2V0LlxyXG4gICAqIHRoaXMgbWV0aG9kIGlzIGNhbGxlZCBhdXRvbWF0aWNhbGx5IGJ5IGVuZ2luZSBpZiBhdHRhY2hlZC5cclxuICAgKiBAcGFyYW0gY29udGV4dCBDYW52YXMgY29udGV4dCB0byBwZXJmb3JtIHJlc2V0IG9uLlxyXG4gICAqIEBwYXJhbSBkZWxheSB0aW1lIGluIG1pbGxpc2Vjb25kcyBwYXNzZWQgZnJvbSB0aGUgcHJldmlvdXMgZnJhbWUgY2FsbC5cclxuICAgKi9cclxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVudXNlZC12YXJzXHJcbiAgcHVibGljIGJlZm9yZUNsaXAoY29udGV4dDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJELCBkZWxheTogbnVtYmVyKSB7fVxyXG5cclxuICAvKipcclxuICAgKiBQb3N0LXJlc3RvcmUgdGFza3MgcGVyZm9ybWVkIGZvciBjYW52YXMgY29udGV4dCByZXN0b3JlLlxyXG4gICAqIHRoaXMgbWV0aG9kIGlzIGNhbGxlZCBhdXRvbWF0aWNhbGx5IGJ5IGVuZ2luZSBpZiBhdHRhY2hlZC5cclxuICAgKiBAcGFyYW0gY29udGV4dCBDYW52YXMgY29udGV4dCB0byBwZXJmb3JtIHJlc2V0IG9uLlxyXG4gICAqIEBwYXJhbSBkZWxheSB0aW1lIGluIG1pbGxpc2Vjb25kcyBwYXNzZWQgZnJvbSB0aGUgcHJldmlvdXMgZnJhbWUgY2FsbC5cclxuICAgKi9cclxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVudXNlZC12YXJzXHJcbiAgcHVibGljIGFmdGVyUmVzdG9yZShjb250ZXh0OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQsIGRlbGF5OiBudW1iZXIpIHt9XHJcblxyXG4gIHB1YmxpYyByZXNldFRyYW5zZm9ybSgpIHtcclxuICAgIHRoaXMudHJhbnNmb3JtID0gbmV3IFRyYW5zZm9ybSgpO1xyXG4gIH1cclxuICAvKipcclxuICAgKiBSZW5kZXIgdGFza3MgcGVyZm9ybWVkIGZvciBjYW52YXMgY29udGV4dC5cclxuICAgKiB0aGlzIG1ldGhvZCBpcyBjYWxsZWQgYXV0b21hdGljYWxseSBieSBlbmdpbmUgaWYgYXR0YWNoZWQuXHJcbiAgICogQHBhcmFtIGNvbnRleHQgQ2FudmFzIGNvbnRleHQgdG8gcGVyZm9ybSByZXNldCBvbi5cclxuICAgKiBAcGFyYW0gZGVsYXkgdGltZSBpbiBtaWxsaXNlY29uZHMgcGFzc2VkIGZyb20gdGhlIHByZXZpb3VzIGZyYW1lIGNhbGwuXHJcbiAgICovXHJcbiAgcHVibGljIGFic3RyYWN0IG9uRHJhdyhcclxuICAgIGNvbnRleHQ6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCxcclxuICAgIGRlbGF5OiBudW1iZXJcclxuICApOiB2b2lkO1xyXG59XHJcbiIsImltcG9ydCB7IFNwcml0ZSB9IGZyb20gXCIuLi9zcHJpdGVcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEJsYW5rU2NlbmUgZXh0ZW5kcyBTcHJpdGUge1xyXG4gIHB1YmxpYyBvbkRyYXcoKTogdm9pZCB7fVxyXG59XHJcbiIsImltcG9ydCBDYW52YXNDb25maWcgZnJvbSBcIi4vY2FudmFzX2NvbmZpZ1wiO1xyXG5pbXBvcnQgeyBFbnRpdHkgfSBmcm9tIFwiLi9lbnRpdHlcIjtcclxuaW1wb3J0IHsgSURyYXdhYmxlIH0gZnJvbSBcIi4vc3ByaXRlXCI7XHJcbmltcG9ydCB7IFZlY3RvcjJEIH0gZnJvbSBcIi4vdmVjdG9yXCI7XHJcbmltcG9ydCBjaGVja0NvbXBhdGliaWxpdHkgZnJvbSBcIi4vY29tcGF0aWJpbGl0eVwiO1xyXG5pbXBvcnQgeyBCbGFua1NjZW5lIH0gZnJvbSBcIi4vc2NlbmVzXCI7XHJcbmltcG9ydCB7IE1vZGlmaWVyIH0gZnJvbSBcIi4vbW9kaWZpZXJzL21vZGlmaWVyc1wiO1xyXG5pbXBvcnQgeyBUcmFuc2Zvcm0gfSBmcm9tIFwiLi90cmFuc2Zvcm1cIjtcclxuXHJcbmludGVyZmFjZSBFeHRlbmRlZENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCBleHRlbmRzIENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCB7XHJcbiAgcmVzZXQoKTogdm9pZDtcclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRW5naW5lIHtcclxuICBwcml2YXRlIGNhbnZhczogSFRNTENhbnZhc0VsZW1lbnQ7XHJcblxyXG4gIHByaXZhdGUgY29udGV4dDogRXh0ZW5kZWRDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQ7XHJcblxyXG4gIHByaXZhdGUgcHJldmlvdXNUaW1lc3RhbXA6IG51bWJlciA9IDA7XHJcblxyXG4gIHByaXZhdGUgYW5pbWF0aW9uSWQ6IG51bWJlciA9IC0xO1xyXG5cclxuICBwcml2YXRlIHNjZW5lOiBJRHJhd2FibGUgPSBuZXcgQmxhbmtTY2VuZSgpO1xyXG5cclxuICBwcml2YXRlIHN1YlJlc2V0OiAoY29udGV4dDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEKSA9PiB2b2lkO1xyXG5cclxuICBwcml2YXRlIGNhbWVyYTogVHJhbnNmb3JtID0gbmV3IFRyYW5zZm9ybSgpO1xyXG5cclxuICBwcml2YXRlIG1vZGlmaWVyczogTW9kaWZpZXJbXSA9IFtdO1xyXG5cclxuICAvKipcclxuICAgKiBDb25zdHJ1Y3RvciB3aWxsIGJpbmQgRW5naW5lIG9iamVjdCB0byBhIGdpdmVuIGNhbnZhcyBhbmQgY2hlY2sgZm9yIGluY29tcGF0aWJsZSBjYW52YXMgZmVhdHVyZXMgYW5kIGNvdmVyLlxyXG4gICAqIEBwYXJhbSBjYW52YXNJZGVudGlmaWVyIG9uZSBvZiBIVE1MQ25hdmFzRWxlbWVudCBvciBjc3Mgc2VsZWN0b3Igc3RyaW5nIHRoYXQgaW5kaWNhdGVzIGNhbnZhcyBlbGVtZW50LlxyXG4gICAqL1xyXG4gIHB1YmxpYyBjb25zdHJ1Y3RvcihjYW52YXNJZGVudGlmaWVyOiBIVE1MQ2FudmFzRWxlbWVudCB8IHN0cmluZyB8IG51bGwpIHtcclxuICAgIC8vIGxvY2F0ZSBjYW52YXMgYnkgSFRNTENhbnZhc0VsZW1lbnQgb3IgQ1NTIHNlbGVjdG9yXHJcbiAgICBsZXQgY2FudmFzOiBIVE1MQ2FudmFzRWxlbWVudCB8IG51bGw7XHJcbiAgICBpZiAodHlwZW9mIGNhbnZhc0lkZW50aWZpZXIgPT09IFwic3RyaW5nXCIpIHtcclxuICAgICAgY2FudmFzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgICBjYW52YXNJZGVudGlmaWVyXHJcbiAgICAgICkgYXMgSFRNTENhbnZhc0VsZW1lbnQgfCBudWxsO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgY2FudmFzID0gY2FudmFzSWRlbnRpZmllcjtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoY2FudmFzID09PSBudWxsKSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlVuYWJsZSB0byBpZGVudGlmeSBjYW52YXMuXCIpO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuY2FudmFzID0gY2FudmFzO1xyXG4gICAgdGhpcy5zdWJSZXNldCA9ICgpID0+IHt9O1xyXG5cclxuICAgIC8vIHJlcXVlc3QgY29udGV4dCBmcm9tIGdpdmVuIGNhbnZhc1xyXG4gICAgY29uc3QgY29udGV4dCA9IHRoaXMuY2FudmFzLmdldENvbnRleHQoXHJcbiAgICAgIFwiMmRcIlxyXG4gICAgKSBhcyBFeHRlbmRlZENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRDtcclxuXHJcbiAgICB0aGlzLmNvbnRleHQgPSBjb250ZXh0O1xyXG5cclxuICAgIGNoZWNrQ29tcGF0aWJpbGl0eSh0aGlzKTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBnZXQgQ2FudmFzKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuY2FudmFzO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGdldCBDb250ZXh0KCkge1xyXG4gICAgcmV0dXJuIHRoaXMuY29udGV4dDtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBnZXQgU2NlbmUoKTogSURyYXdhYmxlIHtcclxuICAgIHJldHVybiB0aGlzLnNjZW5lO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGdldCBDYW1lcmEoKTogVHJhbnNmb3JtIHtcclxuICAgIHJldHVybiB0aGlzLmNhbWVyYTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBzZXQgU2NlbmUoc2NlbmU6IElEcmF3YWJsZSkge1xyXG4gICAgaWYgKHNjZW5lIGluc3RhbmNlb2YgRW50aXR5KSB7XHJcbiAgICAgIHNjZW5lLnNldFBhcmVudChudWxsKTtcclxuICAgIH1cclxuICAgIHRoaXMuc2NlbmUgPSBzY2VuZTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBzZXQgQ2FtZXJhKGNhbWVyYTogVHJhbnNmb3JtKSB7XHJcbiAgICB0aGlzLmNhbWVyYSA9IGNhbWVyYTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFJlZ2lzdGVyIGEgY2FsbGJhY2sgdGhhdCB3aWxsIGJlIGNhbGxlZCBvbiBlYWNoIGZyYW1lLlxyXG4gICAqIEBwYXJhbSBmdW5jIFVzZXIgZGVmaW5lZCBjYWxsYmFjayB0aGF0IHdpbGwgYmUgZXhlY3V0ZWQgYWZ0ZXIgZWFjaCBmcmFtZSBpcyByZXNldCBjb21wbGV0ZWx5XHJcbiAgICovXHJcbiAgcHVibGljIHNldFN1YlJlc2V0RnVuY3Rpb24oXHJcbiAgICBmdW5jOiAoY29udGV4dDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEKSA9PiB2b2lkXHJcbiAgKSB7XHJcbiAgICB0aGlzLnN1YlJlc2V0ID0gZnVuYztcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFNldCBjYW52YXMgd2lkdGggYW5kIGhlaWdodCB0byBnaXZlbiBkaW1lbnNpb24uIENhbnZhcyB3aWxsIHRyeSB0byBtYXRjaCB3aW5kb3cgc2l6ZSB3aGVuIG5vIGFyZ3VtZW50cyBhcmUgcGFzc2VkLlxyXG4gICAqIEBwYXJhbSBjb25maWcgQ2FudmFzIHNpemUgZGltZW5zaW9uLlxyXG4gICAqL1xyXG4gIHB1YmxpYyByZXNpemVDYW52YXMoY29uZmlnPzogQ2FudmFzQ29uZmlnIHwgVmVjdG9yMkQpIHtcclxuICAgIGlmIChjb25maWcgaW5zdGFuY2VvZiBWZWN0b3IyRCkge1xyXG4gICAgICB0aGlzLkNhbnZhcy53aWR0aCA9IGNvbmZpZy5YO1xyXG4gICAgICB0aGlzLkNhbnZhcy5oZWlnaHQgPSBjb25maWcuWTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuQ2FudmFzLndpZHRoID0gY29uZmlnPy53ID8/IHdpbmRvdy5pbm5lcldpZHRoO1xyXG4gICAgICB0aGlzLkNhbnZhcy5oZWlnaHQgPSBjb25maWc/LmggPz8gd2luZG93LmlubmVySGVpZ2h0O1xyXG4gICAgfVxyXG4gICAgLy8gVE9ETzogZW1pdCBjYW52YXMgcmVzaXplIGV2ZW50XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBNYWtlcyBib3VuZCBjYW52YXMgYmVnaW4gcmVmcmVzaGluZyB3aXRoIGdpdmVuIGNvbnRleHQuIFRoaXMgd2lsbCBhbHNvIHN0YXJ0IG1vZGlmaWVycyB0byB1cGRhdGUuXHJcbiAgICovXHJcbiAgcHVibGljIHN0YXJ0KCkge1xyXG4gICAgLy8gbWF5IGJlIGVycm9yIGNoZWNrLlxyXG4gICAgdGhpcy5yZW5kZXIodGhpcy5wcmV2aW91c1RpbWVzdGFtcCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBNYWtlcyBib3VuZCBjYW52YXMgdG8gc3RvcCByZWZyZXNoaW5nLiBUaGlzIHdpbGwgYWxzbyBzdG9wIG1vZGlmaWVycyB0byB1cGRhdGUuXHJcbiAgICovXHJcbiAgcHVibGljIHN0b3AoKSB7XHJcbiAgICBjYW5jZWxBbmltYXRpb25GcmFtZSh0aGlzLmFuaW1hdGlvbklkKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFJlZ2lzdGVyIGFuZCBzdGFydCBnaXZlbiBtb2RpZmllciBmcm9tIHRoaXMgZW5naW5lLlxyXG4gICAqIEBwYXJhbSBtb2RpZmllciBNb2RpZmllciB0byBoYWx0IGV4ZWN1dGlvbi5cclxuICAgKi9cclxuICBwdWJsaWMgcmVnaXN0ZXJNb2RpZmllcihtb2RpZmllcjogTW9kaWZpZXIpIHtcclxuICAgIG1vZGlmaWVyLnJlZ2lzdGVyKCk7XHJcbiAgICB0aGlzLm1vZGlmaWVycy5wdXNoKG1vZGlmaWVyKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFN0b3BzIGFuZCByZW1vdmVzIGdpdmVuIG1vZGlmaWVyIGZyb20gdXBkYXRlIHBvb2wgaW4gdGhpcyBlbmdpbmUuXHJcbiAgICogQHBhcmFtIG1vZGlmaWVyIE1vZGlmaWVyIHRvIGhhbHQgZXhlY3V0aW9uLlxyXG4gICAqL1xyXG4gIHB1YmxpYyB1bnJlZ2lzdGVyTW9kaWZpZXIobW9kaWZpZXI6IE1vZGlmaWVyKSB7XHJcbiAgICB0aGlzLm1vZGlmaWVycyA9IHRoaXMubW9kaWZpZXJzLmZpbHRlcigobSkgPT4gbSAhPT0gbW9kaWZpZXIpO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSByZW5kZXIodGltZXN0YW1wOiBudW1iZXIpIHtcclxuICAgIGNvbnN0IGVsYXBzZWRUaW1lID0gdGltZXN0YW1wIC0gdGhpcy5wcmV2aW91c1RpbWVzdGFtcDtcclxuICAgIHRoaXMucHJldmlvdXNUaW1lc3RhbXAgPSB0aW1lc3RhbXA7XHJcblxyXG4gICAgY29uc3QgbW9kaWZpZXJzVG9SZW1vdmU6IE1vZGlmaWVyW10gPSBbXTtcclxuICAgIGZvciAoY29uc3QgbW9kaWZpZXIgb2YgdGhpcy5tb2RpZmllcnMpIHtcclxuICAgICAgaWYgKG1vZGlmaWVyLlByb2dyZXNzIDwgMSkge1xyXG4gICAgICAgIG1vZGlmaWVyLnRpY2soKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBtb2RpZmllcnNUb1JlbW92ZS5wdXNoKG1vZGlmaWVyKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgdGhpcy5tb2RpZmllcnMgPSB0aGlzLm1vZGlmaWVycy5maWx0ZXIoXHJcbiAgICAgIChtKSA9PiAhbW9kaWZpZXJzVG9SZW1vdmUuaW5jbHVkZXMobSlcclxuICAgICk7XHJcblxyXG4gICAgdGhpcy5jb250ZXh0LnJlc2V0KCk7XHJcbiAgICB0aGlzLnN1YlJlc2V0KHRoaXMuY29udGV4dCk7XHJcblxyXG4gICAgdGhpcy5jb250ZXh0LnRyYW5zZm9ybShcclxuICAgICAgdGhpcy5jYW1lcmEubTExLFxyXG4gICAgICB0aGlzLmNhbWVyYS5tMjEsXHJcbiAgICAgIHRoaXMuY2FtZXJhLm0xMixcclxuICAgICAgdGhpcy5jYW1lcmEubTIyLFxyXG4gICAgICB0aGlzLmNhbWVyYS5veCxcclxuICAgICAgdGhpcy5jYW1lcmEub3lcclxuICAgICk7XHJcblxyXG4gICAgdGhpcy5zY2VuZT8uZHJhdyh0aGlzLmNvbnRleHQsIGVsYXBzZWRUaW1lKTtcclxuXHJcbiAgICB0aGlzLmFuaW1hdGlvbklkID0gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKHRoaXMucmVuZGVyLmJpbmQodGhpcykpO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgRW5naW5lIGZyb20gXCIuLi9lbmdpbmVcIjtcclxuaW1wb3J0IGNvbnRleHRSZXNldCBmcm9tIFwiLi9jb250ZXh0X3Jlc2V0XCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCAoZW5naW5lOiBFbmdpbmUpID0+IHtcclxuICBjb25zdCBjb21wYXRPYmplY3QgPSB7XHJcbiAgICBjb250ZXh0X3Jlc2V0OiBjb250ZXh0UmVzZXQoZW5naW5lLkNvbnRleHQpLFxyXG4gIH07XHJcbiAgT2JqZWN0LmZyZWV6ZShjb21wYXRPYmplY3QpO1xyXG4gIHJldHVybiBjb21wYXRPYmplY3Q7XHJcbn07XHJcbiIsImltcG9ydCBWZWN0b3IgZnJvbSBcIi4vdmVjdG9yXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBWZWN0b3IzRCBleHRlbmRzIFZlY3RvciB7XHJcbiAgY29uc3RydWN0b3IoeDogbnVtYmVyID0gMCwgeTogbnVtYmVyID0gMCwgejogbnVtYmVyID0gMCkge1xyXG4gICAgc3VwZXIoeCwgeSwgeik7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgZ2V0IFgoKSB7XHJcbiAgICByZXR1cm4gdGhpcy52YWx1ZXNbMF07XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgZ2V0IFkoKSB7XHJcbiAgICByZXR1cm4gdGhpcy52YWx1ZXNbMV07XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgZ2V0IFooKSB7XHJcbiAgICByZXR1cm4gdGhpcy52YWx1ZXNbMl07XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgc2V0IFgoeDogbnVtYmVyKSB7XHJcbiAgICB0aGlzLnZhbHVlc1swXSA9IHg7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgc2V0IFkoeTogbnVtYmVyKSB7XHJcbiAgICB0aGlzLnZhbHVlc1sxXSA9IHk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgc2V0IFooejogbnVtYmVyKSB7XHJcbiAgICB0aGlzLnZhbHVlc1syXSA9IHo7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBWZWN0b3IgZnJvbSBcIi4vdmVjdG9yXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBWZWN0b3I0RCBleHRlbmRzIFZlY3RvciB7XHJcbiAgY29uc3RydWN0b3IoeDogbnVtYmVyID0gMCwgeTogbnVtYmVyID0gMCwgejogbnVtYmVyID0gMCwgdzogbnVtYmVyID0gMCkge1xyXG4gICAgc3VwZXIoeCwgeSwgeiwgdyk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgZ2V0IFgoKSB7XHJcbiAgICByZXR1cm4gdGhpcy52YWx1ZXNbMF07XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgZ2V0IFkoKSB7XHJcbiAgICByZXR1cm4gdGhpcy52YWx1ZXNbMV07XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgZ2V0IFooKSB7XHJcbiAgICByZXR1cm4gdGhpcy52YWx1ZXNbMl07XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgZ2V0IFcoKSB7XHJcbiAgICByZXR1cm4gdGhpcy52YWx1ZXNbM107XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgc2V0IFgoeDogbnVtYmVyKSB7XHJcbiAgICB0aGlzLnZhbHVlc1swXSA9IHg7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgc2V0IFkoeTogbnVtYmVyKSB7XHJcbiAgICB0aGlzLnZhbHVlc1sxXSA9IHk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgc2V0IFooejogbnVtYmVyKSB7XHJcbiAgICB0aGlzLnZhbHVlc1syXSA9IHo7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgc2V0IFcodzogbnVtYmVyKSB7XHJcbiAgICB0aGlzLnZhbHVlc1szXSA9IHc7XHJcbiAgfVxyXG59XHJcbiJdLCJuYW1lcyI6WyJyb290IiwiZmFjdG9yeSIsImV4cG9ydHMiLCJtb2R1bGUiLCJkZWZpbmUiLCJhbWQiLCJzZWxmIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsImRlZmluaXRpb24iLCJrZXkiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0Iiwib2JqIiwicHJvcCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJWZWN0b3IiLCJjb25zdHJ1Y3RvciIsInZhbHVlcyIsInRoaXMiLCJzaXplIiwibGVuZ3RoIiwiU2l6ZSIsImNvcHkiLCJ0byIsImZvcmNlIiwiRXJyb3IiLCJvdmVyd3JpdGUiLCJpc2VxdWFsIiwib3RoZXIiLCJwcmVjaXNlIiwidGhpc0FycmF5Iiwic2xpY2UiLCJvdGhlckFycmF5IiwiZXZlcnkiLCJ2IiwiaSIsInRvRml4ZWQiLCJzaGlmdCIsIm1vdmUiLCJ0ZW1wIiwidW5zaGlmdCIsImNvdW50ZXIiLCJtYXAiLCJWZWN0b3IyRCIsIngiLCJ5Iiwic3VwZXIiLCJYIiwiWSIsIlRyZWVJdGVtIiwiY2hpbGRyZW4iLCJwYXJlbnQiLCJQYXJlbnQiLCJDaGlsZHJlbiIsImF0dGFjaENoaWxkcmVuIiwiel9pbmRleCIsIkluZmluaXR5IiwibGFzdEluZGV4IiwiQXJyYXkiLCJpc0FycmF5Iiwic2FmZUluZGV4IiwiTWF0aCIsIm1heCIsIm1pbiIsImluZGV4IiwidGVtcFBhcmVudCIsImRldGFjaENoaWxkcmVuIiwicHVzaCIsInNldENoaWxkSW5kZXgiLCJjaGlsZCIsImluZGV4T2YiLCJzcGxpY2UiLCJnZXRDaGlsZEluZGV4IiwiY3VycmVudEluZGV4Iiwic2V0UGFyZW50IiwiRW50aXR5IiwiY29uZmlnIiwiZGltZW5zaW9uIiwicG9zaXRpb24iLCJXIiwiSCIsIlBvc2l0aW9uIiwiRGltZW5zaW9uIiwiV2lkdGgiLCJIZWlnaHQiLCJBYnNvbHV0ZVgiLCJBYnNvbHV0ZVkiLCJ3aWR0aCIsImhlaWdodCIsImNvbnRleHQiLCJyZXNldCIsInNhdmUiLCJzdGF0ZUNvdW50IiwidGVtcFNhdmUiLCJ0ZW1wUmVzdG9yZSIsInJlc3RvcmUiLCJfY29udGV4dCIsImNvdW50IiwicmVzdG9yZVJvb3QiLCJtb3ZlVG8iLCJiZWdpblBhdGgiLCJjbG9zZVBhdGgiLCJyZXNldFRyYW5zZm9ybSIsImNsZWFyUmVjdCIsImNhbnZhcyIsIlRyYW5zZm9ybSIsIm0xMSIsIm0xMiIsIm0yMSIsIm0yMiIsIm94Iiwib3kiLCJEZXRlcm1pbmFudCIsImlzSW52ZXJ0aWJsZSIsImlzSWRlbnRpdHkiLCJzdGF0aWMiLCJkb20iLCJhIiwiYyIsImIiLCJkIiwiZSIsImYiLCJ0cmFuc2xhdGUiLCJzY2FsZSIsInVuZGVmaW5lZCIsImZvckVhY2giLCJsaW5lYXIiLCJyb3RhdGUiLCJhbmdsZSIsInBvaW50WCIsInBvaW50WSIsIlBJIiwic2luVmFsdWUiLCJzaW4iLCJjb3NWYWx1ZSIsImNvcyIsImFwcGx5IiwibXVsdGlwbHkiLCJCIiwiaW52ZXJ0IiwiZGV0Iiwic2tldyIsInhfc2xvcGUiLCJ5X3Nsb3BlIiwidG9ET00iLCJET01NYXRyaXgiLCJTcHJpdGUiLCJkcmF3IiwiZGVsYXkiLCJ0cmFuc2Zvcm0iLCJyZWdpb24iLCJiZWZvcmVDbGlwIiwicmVjdCIsImNsaXAiLCJvbkRyYXciLCJhZnRlclJlc3RvcmUiLCJSZWdpb24iLCJpc1NlbGZSZWdpb24iLCJCbGFua1NjZW5lIiwiRW5naW5lIiwiY2FudmFzSWRlbnRpZmllciIsInByZXZpb3VzVGltZXN0YW1wIiwiYW5pbWF0aW9uSWQiLCJzY2VuZSIsImNhbWVyYSIsIm1vZGlmaWVycyIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsInN1YlJlc2V0IiwiZ2V0Q29udGV4dCIsImVuZ2luZSIsImNvbXBhdE9iamVjdCIsImNvbnRleHRfcmVzZXQiLCJDb250ZXh0IiwiZnJlZXplIiwiQ2FudmFzIiwiU2NlbmUiLCJDYW1lcmEiLCJzZXRTdWJSZXNldEZ1bmN0aW9uIiwiZnVuYyIsInJlc2l6ZUNhbnZhcyIsInciLCJ3aW5kb3ciLCJpbm5lcldpZHRoIiwiaCIsImlubmVySGVpZ2h0Iiwic3RhcnQiLCJyZW5kZXIiLCJzdG9wIiwiY2FuY2VsQW5pbWF0aW9uRnJhbWUiLCJyZWdpc3Rlck1vZGlmaWVyIiwibW9kaWZpZXIiLCJyZWdpc3RlciIsInVucmVnaXN0ZXJNb2RpZmllciIsImZpbHRlciIsIm0iLCJ0aW1lc3RhbXAiLCJlbGFwc2VkVGltZSIsIm1vZGlmaWVyc1RvUmVtb3ZlIiwiUHJvZ3Jlc3MiLCJ0aWNrIiwiaW5jbHVkZXMiLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJiaW5kIiwiVmVjdG9yM0QiLCJ6IiwiWiIsIlZlY3RvcjREIl0sInNvdXJjZVJvb3QiOiIifQ==