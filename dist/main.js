var ArtisticEngine;(()=>{"use strict";var t={d:(s,e)=>{for(var i in e)t.o(e,i)&&!t.o(s,i)&&Object.defineProperty(s,i,{enumerable:!0,get:e[i]})},o:(t,s)=>Object.prototype.hasOwnProperty.call(t,s),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},s={};t.r(s),t.d(s,{Engine:()=>u,Entity:()=>n,Sprite:()=>a,Vector:()=>e});var e={};t.r(e),t.d(e,{Vector2D:()=>r,Vector3D:()=>c,Vector4D:()=>m});class i{constructor(...t){this.values=[...t],this.size=t.length}get Size(){return this.size}copy(t,s=!1){if(this.size>t.size&&!s)throw new Error(`Copying vector of size ${this.size} to ${t.size} will cause data loss.\nInclude force option if intended.`);return t.overwrite(this.values),t}isequal(t,s){if(this.size!==t.size)return!1;const e=this.values.slice(),i=t.values.slice();return e.every(((t,e)=>null==s?t==i[e]:t.toFixed(s)==i[e].toFixed(s)))}shift(t=1){t%=this.size;const s=this.values.slice(0,-t);return s.unshift(...this.values.slice(-t)),this.values=s,this}overwrite(t){let s=0;this.values=this.values.map((function(){return t[s++]||0}))}}class r extends i{constructor(t=0,s=0){super(t,s)}get X(){return this.values[0]}get Y(){return this.values[1]}set X(t){this.values[0]=t}set Y(t){this.values[1]=t}}class n{constructor(t){var s,e,i,n;this.children=[],this.parent=null,this.dimension=new r,this.position=new r,t&&(this.dimension.X=null!==(s=t.W)&&void 0!==s?s:0,this.dimension.Y=null!==(e=t.H)&&void 0!==e?e:0,this.position.X=null!==(i=t.X)&&void 0!==i?i:0,this.position.Y=null!==(n=t.Y)&&void 0!==n?n:0)}get Position(){return this.position}get X(){return this.position.X}get Y(){return this.position.Y}get AbsoluteX(){var t,s;return(null!==(s=null===(t=this.parent)||void 0===t?void 0:t.AbsoluteX)&&void 0!==s?s:0)+this.position.X}get AbsoluteY(){var t,s;return(null!==(s=null===(t=this.parent)||void 0===t?void 0:t.AbsoluteY)&&void 0!==s?s:0)+this.position.Y}get Dimension(){return this.dimension}get W(){return this.dimension.X}get H(){return this.dimension.Y}get Width(){return this.dimension.X}get Height(){return this.dimension.Y}get Parent(){return this.parent}get Children(){return this.children.slice()}set Position(t){this.position=t}set X(t){this.position.X=t}set Y(t){this.position.Y=t}set Dimension(t){this.dimension=t}set W(t){this.dimension.X=t}set H(t){this.dimension.Y=t}set Width(t){this.dimension.X=t}set Height(t){this.dimension.Y=t}attachChildren(t,s=1/0){var e;let i=-1;if(Array.isArray(t)){const e=Math.max(0,Math.min(s,this.children.length));for(let s=0;s<t.length;s++)i=this.attachChildren(t[s],e+s)}else{for(let s=this;null!==s;s=s.parent)if(s===t)throw new Error("Loop of parent-child relationships detected.");null===(e=t.parent)||void 0===e||e.detachChildren(t),this.children.push(t),t.parent=this,i=this.setChildIndex(t,s)}return i}detachChildren(t){if(Array.isArray(t))for(const s of t)this.detachChildren(s);else{const s=this.children.indexOf(t);s>-1&&(this.children.splice(s,1),t.parent=null)}}getChildIndex(t){return this.children.indexOf(t)}setChildIndex(t,s){const e=this.getChildIndex(t);if(-1===e)throw new Error("I AM NOT YOUR FATHER");this.children.splice(e,1);const i=Math.max(0,Math.min(s,this.children.length));return this.children.splice(i,0,t),i}setParent(t=null){var s;null==t?null===(s=this.parent)||void 0===s||s.detachChildren(this):t.attachChildren(this)}}const h=t=>{if(null!=t.reset)return!0;t.save();let s=0;const e=t.save,i=t.restore;return t.save=function(){e.call(this),s++},t.restore=function(){s>0&&(i.call(this),s--)},t.reset=function(){!function(t){for(let e=s;e>-1;e--)i.call(t);s=-1}(t),this.moveTo(0,0),this.beginPath(),this.closePath(),this.resetTransform(),this.clearRect(0,0,this.canvas.width,this.canvas.height),this.save()},!1};class o{constructor(t=1,s=0,e=0,i=1,r=0,n=0){this.values=[t,s,e,i,r,n]}get m11(){return this.values[0]}get m12(){return this.values[1]}get m21(){return this.values[2]}get m22(){return this.values[3]}get ox(){return this.values[4]}get oy(){return this.values[5]}get Determinant(){return this.m11*this.m22-this.m12*this.m21}get isInvertible(){return 0!==this.Determinant}get isIdentity(){return 1===this.m11&&1===this.m22&&0===this.m12&&0===this.m21&&0===this.ox&&0===this.oy}set m11(t){this.values[0]=t}set m12(t){this.values[1]=t}set m21(t){this.values[2]=t}set m22(t){this.values[3]=t}set ox(t){this.values[4]=t}set oy(t){this.values[5]=t}translate(t,s){return this.ox+=t,this.oy+=s,this}scale(t,s){return void 0===s?this.scale(t,t):([0,1,4].forEach((s=>{this.values[s]*=t})),[2,3,5].forEach((t=>{this.values[t]*=s})),this)}linear(t,s,e,i,r,n){return this.values=[t*this.m11+s*this.m21,t*this.m12+s*this.m22,e*this.m11+i*this.m21,e*this.m12+i*this.m22,t*this.ox+s*this.oy+r,e*this.ox+i*this.oy+n],this}rotate(t){t=t*Math.PI/180;const s=Math.sin(t),e=Math.cos(t);return this.linear(e,s,-s,e,0,0)}apply(t,s){let e;if(t instanceof r)e=t,s=t.Y,t=t.X,e.X=this.m11*t+this.m12*s+this.ox,e.Y=this.m21*t+this.m22*s+this.oy;else{if(void 0===s)throw new Error("Transform#apply method requires two number parameters or one Vector2D.");e=new r(this.m11*t+this.m12*s+this.ox,this.m21*t+this.m22*s+this.oy)}return e}multiply(t){return this.linear(...t.values)}invert(){const t=this.Determinant;if(0===t)throw new Error("This transform is not invertible");const s=this.m22/t,e=-1*this.m12/t,i=(this.m12*this.oy-this.m22*this.ox)/t,r=-1*this.m21/t,n=this.m11/t,h=-1*(this.m11*this.oy-this.m21*this.ox)/t;return this.m11=s,this.m12=e,this.ox=i,this.m21=r,this.m22=n,this.oy=h,this}copy(){return new o(...this.values)}toDOM(){return new DOMMatrix([this.m11,this.m21,this.m12,this.m22,this.ox,this.oy])}}class a extends n{constructor(){super(...arguments),this.draw=(t,s)=>{t.save(),t.translate(this.AbsoluteX,this.AbsoluteY),this.transform&&t.transform(this.transform.m11,this.transform.m21,this.transform.m12,this.transform.m22,this.transform.ox,this.transform.oy),this.region&&(this.beforeClip(t,s),t.beginPath(),t.rect(0,0,this.region.Width,this.region.Height),t.clip()),this.onDraw(t,s),t.restore(),this.afterRestore(t,s);for(const e of this.Children)e instanceof a&&e.draw(t,s)}}get Transform(){return this.transform||(this.transform=new o),this.transform}get Region(){return this.region}get isSelfRegion(){return this.region===this}set Transform(t){this.transform=t}set Region(t){this.region=t}beforeClip(t,s){}afterRestore(t,s){}resetTransform(){this.transform=new o}}class l extends a{onDraw(){}}class u{constructor(t){let s;if(this.previousTimestamp=0,this.animationId=-1,this.scene=new l,this.camera=new o,this.modifiers=[],s="string"==typeof t?document.querySelector(t):t,null===s)throw new Error("Unable to identify canvas.");this.canvas=s,this.subReset=()=>{};const e=this.canvas.getContext("2d");this.context=e,(t=>{const s={context_reset:h(this.Context)};Object.freeze(s)})()}get Canvas(){return this.canvas}get Context(){return this.context}get Scene(){return this.scene}get Camera(){return this.camera}set Scene(t){t instanceof n&&t.setParent(null),this.scene=t}set Camera(t){this.camera=t}setSubResetFunction(t){this.subReset=t}resizeCanvas(t){var s,e;t instanceof r?(this.Canvas.width=t.X,this.Canvas.height=t.Y):(this.Canvas.width=null!==(s=null==t?void 0:t.w)&&void 0!==s?s:window.innerWidth,this.Canvas.height=null!==(e=null==t?void 0:t.h)&&void 0!==e?e:window.innerHeight)}start(){this.render(this.previousTimestamp)}stop(){cancelAnimationFrame(this.animationId)}registerModifier(t){t.register(),this.modifiers.push(t)}unregisterModifier(t){this.modifiers=this.modifiers.filter((s=>s===t))}render(t){var s;const e=t-this.previousTimestamp;this.previousTimestamp=t;const i=[];for(const t of this.modifiers)t.Progress<1?t.tick():i.push(t);this.modifiers=this.modifiers.filter((t=>!i.includes(t))),this.context.reset(),this.subReset(this.context),this.context.transform(this.camera.m11,this.camera.m21,this.camera.m12,this.camera.m22,this.camera.ox,this.camera.oy),null===(s=this.scene)||void 0===s||s.draw(this.context,e),this.animationId=requestAnimationFrame(this.render.bind(this))}}class c extends i{constructor(t=0,s=0,e=0){super(t,s,e)}get X(){return this.values[0]}get Y(){return this.values[1]}get Z(){return this.values[2]}set X(t){this.values[0]=t}set Y(t){this.values[1]=t}set Z(t){this.values[2]=t}}class m extends i{constructor(t=0,s=0,e=0,i=0){super(t,s,e,i)}get X(){return this.values[0]}get Y(){return this.values[1]}get Z(){return this.values[2]}get W(){return this.values[3]}set X(t){this.values[0]=t}set Y(t){this.values[1]=t}set Z(t){this.values[2]=t}set W(t){this.values[3]=t}}ArtisticEngine=s})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUNuQixDQUVXSSxNQUFFSCxHQUNYM0IsS0FBS0QsT0FBTyxHQUFLNEIsQ0FDbkIsQ0FFV29KLE1BQUVELEdBQ1g5SyxLQUFLRCxPQUFPLEdBQUsrSyxDQUNuQixFQzNCYSxNQUFNRSxVQUFpQm5MLEVBQ3BDQyxZQUFZNEIsRUFBWSxFQUFHQyxFQUFZLEVBQUdtSixFQUFZLEVBQUd4QixFQUFZLEdBQ25FMUgsTUFBTUYsRUFBR0MsRUFBR21KLEVBQUd4QixFQUNqQixDQUVXekgsUUFDVCxPQUFPN0IsS0FBS0QsT0FBTyxFQUNyQixDQUVXK0IsUUFDVCxPQUFPOUIsS0FBS0QsT0FBTyxFQUNyQixDQUVXZ0wsUUFDVCxPQUFPL0ssS0FBS0QsT0FBTyxFQUNyQixDQUVXc0MsUUFDVCxPQUFPckMsS0FBS0QsT0FBTyxFQUNyQixDQUVXOEIsTUFBRUgsR0FDWDFCLEtBQUtELE9BQU8sR0FBSzJCLENBQ25CLENBRVdJLE1BQUVILEdBQ1gzQixLQUFLRCxPQUFPLEdBQUs0QixDQUNuQixDQUVXb0osTUFBRUQsR0FDWDlLLEtBQUtELE9BQU8sR0FBSytLLENBQ25CLENBRVd6SSxNQUFFaUgsR0FDWHRKLEtBQUtELE9BQU8sR0FBS3VKLENBQ25CLEUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9BcnRpc3RpY0VuZ2luZS93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9BcnRpc3RpY0VuZ2luZS93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vQXJ0aXN0aWNFbmdpbmUvd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZCIsIndlYnBhY2s6Ly9BcnRpc3RpY0VuZ2luZS93ZWJwYWNrL3J1bnRpbWUvbWFrZSBuYW1lc3BhY2Ugb2JqZWN0Iiwid2VicGFjazovL0FydGlzdGljRW5naW5lLy4vc3JjL3ZlY3Rvci92ZWN0b3IudHMiLCJ3ZWJwYWNrOi8vQXJ0aXN0aWNFbmdpbmUvLi9zcmMvdmVjdG9yL3ZlY3RvcjJELnRzIiwid2VicGFjazovL0FydGlzdGljRW5naW5lLy4vc3JjL2VudGl0eS9lbnRpdHkudHMiLCJ3ZWJwYWNrOi8vQXJ0aXN0aWNFbmdpbmUvLi9zcmMvY29tcGF0aWJpbGl0eS9jb250ZXh0X3Jlc2V0LnRzIiwid2VicGFjazovL0FydGlzdGljRW5naW5lLy4vc3JjL3RyYW5zZm9ybS90cmFuc2Zvcm0udHMiLCJ3ZWJwYWNrOi8vQXJ0aXN0aWNFbmdpbmUvLi9zcmMvc3ByaXRlL3Nwcml0ZS50cyIsIndlYnBhY2s6Ly9BcnRpc3RpY0VuZ2luZS8uL3NyYy9zY2VuZXMvYmxhbmtfc2NlbmUudHMiLCJ3ZWJwYWNrOi8vQXJ0aXN0aWNFbmdpbmUvLi9zcmMvZW5naW5lLnRzIiwid2VicGFjazovL0FydGlzdGljRW5naW5lLy4vc3JjL2NvbXBhdGliaWxpdHkvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vQXJ0aXN0aWNFbmdpbmUvLi9zcmMvdmVjdG9yL3ZlY3RvcjNELnRzIiwid2VicGFjazovL0FydGlzdGljRW5naW5lLy4vc3JjL3ZlY3Rvci92ZWN0b3I0RC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBUaGUgcmVxdWlyZSBzY29wZVxudmFyIF9fd2VicGFja19yZXF1aXJlX18gPSB7fTtcblxuIiwiLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbnMgZm9yIGhhcm1vbnkgZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gKGV4cG9ydHMsIGRlZmluaXRpb24pID0+IHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gKG9iaiwgcHJvcCkgPT4gKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApKSIsIi8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uciA9IChleHBvcnRzKSA9PiB7XG5cdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuXHR9XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG59OyIsImV4cG9ydCBkZWZhdWx0IGFic3RyYWN0IGNsYXNzIFZlY3RvciB7XHJcbiAgcHJvdGVjdGVkIHJlYWRvbmx5IHNpemU6IG51bWJlcjtcclxuXHJcbiAgcHJvdGVjdGVkIHZhbHVlczogbnVtYmVyW107XHJcblxyXG4gIGNvbnN0cnVjdG9yKC4uLnZhbHVlczogbnVtYmVyW10pIHtcclxuICAgIHRoaXMudmFsdWVzID0gWy4uLnZhbHVlc107XHJcbiAgICB0aGlzLnNpemUgPSB2YWx1ZXMubGVuZ3RoO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGdldCBTaXplKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuc2l6ZTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBjb3B5PFQgZXh0ZW5kcyBWZWN0b3I+KHRvOiBULCBmb3JjZTogYm9vbGVhbiA9IGZhbHNlKTogVCB7XHJcbiAgICBpZiAodGhpcy5zaXplID4gdG8uc2l6ZSAmJiAhZm9yY2UpIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKFxyXG4gICAgICAgIGBDb3B5aW5nIHZlY3RvciBvZiBzaXplICR7dGhpcy5zaXplfSB0byAke3RvLnNpemV9IHdpbGwgY2F1c2UgZGF0YSBsb3NzLlxcbkluY2x1ZGUgZm9yY2Ugb3B0aW9uIGlmIGludGVuZGVkLmBcclxuICAgICAgKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRvLm92ZXJ3cml0ZSh0aGlzLnZhbHVlcyk7XHJcbiAgICAgIHJldHVybiB0bztcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHB1YmxpYyBpc2VxdWFsPFQgZXh0ZW5kcyBWZWN0b3I+KG90aGVyOiBULCBwcmVjaXNlPzogbnVtYmVyKTogYm9vbGVhbiB7XHJcbiAgICBpZiAodGhpcy5zaXplICE9PSBvdGhlci5zaXplKSByZXR1cm4gZmFsc2U7XHJcbiAgICBjb25zdCB0aGlzQXJyYXkgPSB0aGlzLnZhbHVlcy5zbGljZSgpO1xyXG4gICAgY29uc3Qgb3RoZXJBcnJheSA9IG90aGVyLnZhbHVlcy5zbGljZSgpO1xyXG4gICAgcmV0dXJuIHRoaXNBcnJheS5ldmVyeSgodiwgaSkgPT4ge1xyXG4gICAgICBpZiAocHJlY2lzZSA9PSBudWxsKSB7XHJcbiAgICAgICAgcmV0dXJuIHYgPT0gb3RoZXJBcnJheVtpXTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICByZXR1cm4gdi50b0ZpeGVkKHByZWNpc2UpID09IG90aGVyQXJyYXlbaV0udG9GaXhlZChwcmVjaXNlKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgc2hpZnQobW92ZTogbnVtYmVyID0gMSkge1xyXG4gICAgbW92ZSAlPSB0aGlzLnNpemU7XHJcbiAgICBjb25zdCB0ZW1wID0gdGhpcy52YWx1ZXMuc2xpY2UoMCwgLW1vdmUpO1xyXG4gICAgdGVtcC51bnNoaWZ0KC4uLnRoaXMudmFsdWVzLnNsaWNlKC1tb3ZlKSk7XHJcbiAgICAvLyBJdCBjaGFuZ2VzIGl0c2VsZiAocmVmZXJlbmNlKSwgZG9lcyBub3QgcmV0dXJuIG5ldyB2YWx1ZVxyXG4gICAgLy8gSWYgeW91IHdhbnQgdG8gbGV0IGl0IHJldHVybiBuZXcgdmFsdWUsIHlvdSBzaG91bGQgbW9kaWZ5IHRoaXMgc2VjdGlvblxyXG4gICAgdGhpcy52YWx1ZXMgPSB0ZW1wO1xyXG4gICAgcmV0dXJuIHRoaXM7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIG92ZXJ3cml0ZSh2YWx1ZXM6IG51bWJlcltdKSB7XHJcbiAgICBsZXQgY291bnRlciA9IDA7XHJcbiAgICB0aGlzLnZhbHVlcyA9IHRoaXMudmFsdWVzLm1hcChmdW5jdGlvbiAoKSB7XHJcbiAgICAgIGNvbnN0IG5ld1ZhbHVlID0gdmFsdWVzW2NvdW50ZXIrK107XHJcbiAgICAgIGlmIChuZXdWYWx1ZSkgcmV0dXJuIG5ld1ZhbHVlO1xyXG4gICAgICBlbHNlIHJldHVybiAwO1xyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBWZWN0b3IgZnJvbSBcIi4vdmVjdG9yXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBWZWN0b3IyRCBleHRlbmRzIFZlY3RvciB7XHJcbiAgY29uc3RydWN0b3IoeDogbnVtYmVyID0gMCwgeTogbnVtYmVyID0gMCkge1xyXG4gICAgc3VwZXIoeCwgeSk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgZ2V0IFgoKSB7XHJcbiAgICByZXR1cm4gdGhpcy52YWx1ZXNbMF07XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgZ2V0IFkoKSB7XHJcbiAgICByZXR1cm4gdGhpcy52YWx1ZXNbMV07XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgc2V0IFgoeDogbnVtYmVyKSB7XHJcbiAgICB0aGlzLnZhbHVlc1swXSA9IHg7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgc2V0IFkoeTogbnVtYmVyKSB7XHJcbiAgICB0aGlzLnZhbHVlc1sxXSA9IHk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCB7IFZlY3RvcjJEIH0gZnJvbSBcIi4uL3ZlY3RvclwiO1xyXG5pbXBvcnQgSUVudGl0eSBmcm9tIFwiLi9pZW50aXR5XCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBFbnRpdHkgaW1wbGVtZW50cyBJRW50aXR5IHtcclxuICBwcm90ZWN0ZWQgY2hpbGRyZW46IEVudGl0eVtdID0gW107XHJcblxyXG4gIHByb3RlY3RlZCBwYXJlbnQ6IEVudGl0eSB8IG51bGwgPSBudWxsO1xyXG5cclxuICBwcml2YXRlIGRpbWVuc2lvbjogVmVjdG9yMkQgPSBuZXcgVmVjdG9yMkQoKTtcclxuXHJcbiAgcHJpdmF0ZSBwb3NpdGlvbjogVmVjdG9yMkQgPSBuZXcgVmVjdG9yMkQoKTtcclxuXHJcbiAgcHVibGljIGNvbnN0cnVjdG9yKGNvbmZpZz86IElFbnRpdHkgfCB1bmRlZmluZWQpIHtcclxuICAgIGlmIChjb25maWcpIHtcclxuICAgICAgdGhpcy5kaW1lbnNpb24uWCA9IGNvbmZpZy5XID8/IDA7XHJcbiAgICAgIHRoaXMuZGltZW5zaW9uLlkgPSBjb25maWcuSCA/PyAwO1xyXG4gICAgICB0aGlzLnBvc2l0aW9uLlggPSBjb25maWcuWCA/PyAwO1xyXG4gICAgICB0aGlzLnBvc2l0aW9uLlkgPSBjb25maWcuWSA/PyAwO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHVibGljIGdldCBQb3NpdGlvbigpIHtcclxuICAgIHJldHVybiB0aGlzLnBvc2l0aW9uO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGdldCBYKCkge1xyXG4gICAgcmV0dXJuIHRoaXMucG9zaXRpb24uWDtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBnZXQgWSgpIHtcclxuICAgIHJldHVybiB0aGlzLnBvc2l0aW9uLlk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgZ2V0IEFic29sdXRlWCgpOiBudW1iZXIge1xyXG4gICAgY29uc3QgcGFyZW50WCA9IHRoaXMucGFyZW50Py5BYnNvbHV0ZVggPz8gMDtcclxuICAgIHJldHVybiBwYXJlbnRYICsgdGhpcy5wb3NpdGlvbi5YO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGdldCBBYnNvbHV0ZVkoKTogbnVtYmVyIHtcclxuICAgIGNvbnN0IHBhcmVudFkgPSB0aGlzLnBhcmVudD8uQWJzb2x1dGVZID8/IDA7XHJcbiAgICByZXR1cm4gcGFyZW50WSArIHRoaXMucG9zaXRpb24uWTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBnZXQgRGltZW5zaW9uKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuZGltZW5zaW9uO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGdldCBXKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuZGltZW5zaW9uLlg7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgZ2V0IEgoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5kaW1lbnNpb24uWTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBnZXQgV2lkdGgoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5kaW1lbnNpb24uWDtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBnZXQgSGVpZ2h0KCkge1xyXG4gICAgcmV0dXJuIHRoaXMuZGltZW5zaW9uLlk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgZ2V0IFBhcmVudCgpIHtcclxuICAgIHJldHVybiB0aGlzLnBhcmVudDtcclxuICB9XHJcblxyXG4gIHByb3RlY3RlZCBnZXQgQ2hpbGRyZW4oKSB7XHJcbiAgICByZXR1cm4gdGhpcy5jaGlsZHJlbi5zbGljZSgpO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIHNldCBQb3NpdGlvbihwb3NpdGlvbjogVmVjdG9yMkQpIHtcclxuICAgIHRoaXMucG9zaXRpb24gPSBwb3NpdGlvbjtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBzZXQgWCh4OiBudW1iZXIpIHtcclxuICAgIHRoaXMucG9zaXRpb24uWCA9IHg7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgc2V0IFkoeTogbnVtYmVyKSB7XHJcbiAgICB0aGlzLnBvc2l0aW9uLlkgPSB5O1xyXG4gIH1cclxuXHJcbiAgcHVibGljIHNldCBEaW1lbnNpb24oZGltZW5zaW9uOiBWZWN0b3IyRCkge1xyXG4gICAgdGhpcy5kaW1lbnNpb24gPSBkaW1lbnNpb247XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgc2V0IFcod2lkdGg6IG51bWJlcikge1xyXG4gICAgdGhpcy5kaW1lbnNpb24uWCA9IHdpZHRoO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIHNldCBIKGhlaWdodDogbnVtYmVyKSB7XHJcbiAgICB0aGlzLmRpbWVuc2lvbi5ZID0gaGVpZ2h0O1xyXG4gIH1cclxuXHJcbiAgcHVibGljIHNldCBXaWR0aCh3aWR0aDogbnVtYmVyKSB7XHJcbiAgICB0aGlzLmRpbWVuc2lvbi5YID0gd2lkdGg7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgc2V0IEhlaWdodChoZWlnaHQ6IG51bWJlcikge1xyXG4gICAgdGhpcy5kaW1lbnNpb24uWSA9IGhlaWdodDtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIENyZWF0ZXMgcGFyZW50LWNoaWxkIHJlbGF0aW9uIGJldHdlZW4gdGhpcyBlbnRpdHkgYW5kIGVudGl0aWVzIHBhc3NlZCB0aHJvdWdoIHRoZSBwYXJhbWV0ZXIuXHJcbiAgICogSWYgY2hpbGRyZW4gcGFzc2VkIGFscmVhZHkgaGFzIGEgcGFyZW50LCB0aGUgcHJldmlvdXMgcmVsYXRpb24gaXMgb3ZlcndyaXR0ZWQuXHJcbiAgICogel9pbmRleCBjYW4gYmUgc3BlY2lmaWVkIHRvIGNvbmZpZ3VyZSByZW5kZXJpbmcgc2VxdWVuY2UgYmV0d2VlbiBjaGlsZHJlbi5cclxuICAgKiBAcGFyYW0gY2hpbGRyZW4gU2luZ2xlIGVudGl0eSBvciBhbiBhcnJheSBvZiBlbnRpdGllcyB0byBhdHRhY2guXHJcbiAgICogQHBhcmFtIHpfaW5kZXggSW5kZXggaW4gYXJyYXkgb2YgYWxsIGNoaWxkcmVuIGluIHRoaXMgZW50aXR5LiBUaGUgaGlnaGVyIGdldHMgcmVuZGVyZCBsYXRlci5cclxuICAgKiBAcmV0dXJucyBUaGUgcG9zaXRpb24gZ2l2ZW4gY2hpbGQgZW50aXR5IGlzIHB1dC5cclxuICAgKi9cclxuICBwdWJsaWMgYXR0YWNoQ2hpbGRyZW4oXHJcbiAgICBjaGlsZHJlbjogRW50aXR5W10gfCBFbnRpdHksXHJcbiAgICB6X2luZGV4OiBudW1iZXIgPSBJbmZpbml0eVxyXG4gICk6IG51bWJlciB7XHJcbiAgICBsZXQgbGFzdEluZGV4OiBudW1iZXIgPSAtMTtcclxuICAgIGlmIChBcnJheS5pc0FycmF5KGNoaWxkcmVuKSkge1xyXG4gICAgICBjb25zdCBzYWZlSW5kZXggPSBNYXRoLm1heCgwLCBNYXRoLm1pbih6X2luZGV4LCB0aGlzLmNoaWxkcmVuLmxlbmd0aCkpO1xyXG4gICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgY2hpbGRyZW4ubGVuZ3RoOyBpbmRleCsrKSB7XHJcbiAgICAgICAgbGFzdEluZGV4ID0gdGhpcy5hdHRhY2hDaGlsZHJlbihjaGlsZHJlbltpbmRleF0sIHNhZmVJbmRleCArIGluZGV4KTtcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgZm9yIChcclxuICAgICAgICBsZXQgdGVtcFBhcmVudDogRW50aXR5IHwgbnVsbCA9IHRoaXM7XHJcbiAgICAgICAgdGVtcFBhcmVudCAhPT0gbnVsbDtcclxuICAgICAgICB0ZW1wUGFyZW50ID0gdGVtcFBhcmVudC5wYXJlbnRcclxuICAgICAgKSB7XHJcbiAgICAgICAgaWYgKHRlbXBQYXJlbnQgPT09IGNoaWxkcmVuKSB7XHJcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJMb29wIG9mIHBhcmVudC1jaGlsZCByZWxhdGlvbnNoaXBzIGRldGVjdGVkLlwiKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgY2hpbGRyZW4ucGFyZW50Py5kZXRhY2hDaGlsZHJlbihjaGlsZHJlbik7XHJcbiAgICAgIC8vIFRPRE86IE1heWJlIGdvb2QgaWYgdGhlcmUncyBvcHRpb24gd2hpY2ggZGVjaWRlc1xyXG4gICAgICAvLyAgICAgICB3aGV0aGVyIGl0IGRldGFjaGVzIGFuZCByZS1hdHRhY2hlcyBvciB0aHJvd3MgZXJyb3JcclxuICAgICAgdGhpcy5jaGlsZHJlbi5wdXNoKGNoaWxkcmVuKTtcclxuICAgICAgY2hpbGRyZW4ucGFyZW50ID0gdGhpcztcclxuICAgICAgbGFzdEluZGV4ID0gdGhpcy5zZXRDaGlsZEluZGV4KGNoaWxkcmVuLCB6X2luZGV4KTtcclxuICAgIH1cclxuICAgIHJldHVybiBsYXN0SW5kZXg7IC8vIGlmIHJldHVybnMgLTEsIGVtcHR5IGFycmF5IGhhcyBiZWVuIGlucHV0LlxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogUmVtb3ZlcyBwYXJlbnQtY2hpbGQgcmVsYXRpb24gYmV0d2VlbiB0aGlzIGVudGl0eSBhbmQgZW50aXRpZXMgcGFzc2VkIHRocm91Z2ggdGhlIHBhcmFtZXRlci5cclxuICAgKiBAcGFyYW0gY2hpbGRyZW4gU2luZ2xlIGVudGl0eSBvciBhbiBhcnJheSBvZiBlbnRpdGllcyB0byBkZXR0YWNoLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBkZXRhY2hDaGlsZHJlbihjaGlsZHJlbjogRW50aXR5W10gfCBFbnRpdHkpIHtcclxuICAgIGlmIChBcnJheS5pc0FycmF5KGNoaWxkcmVuKSkge1xyXG4gICAgICBmb3IgKGNvbnN0IGNoaWxkIG9mIGNoaWxkcmVuKSB7XHJcbiAgICAgICAgdGhpcy5kZXRhY2hDaGlsZHJlbihjaGlsZCk7XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy5jaGlsZHJlbi5pbmRleE9mKGNoaWxkcmVuKTtcclxuICAgICAgaWYgKGluZGV4ID4gLTEpIHtcclxuICAgICAgICB0aGlzLmNoaWxkcmVuLnNwbGljZShpbmRleCwgMSk7XHJcbiAgICAgICAgY2hpbGRyZW4ucGFyZW50ID0gbnVsbDtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogUmV0cmlldmVzIGNoaWxkIGluZGV4IG9mIHRoZSBlbnRpdHkgcGFzc2VkIHRocm91Z2ggdGhlIHBhcmFtZXRlciBpbiB0aGUgY2hpbGRyZW4gbGlzdCBvZiB0aGlzIGVudGl0eS5cclxuICAgKiBJZiBjaGlsZHJlbiBwYXNzZWQgaXMgbm90IGNoaWxkIG9mIHRoaXMgaW5zdGFuY2UsIGFuIGVycm9yIGlzIHRocm93bi5cclxuICAgKiBAcGFyYW0gY2hpbGQgU2luZ2xlIGVudGl0eSB3aGljaCByZXF1aXJlIHRoZSBpbmRleC5cclxuICAgKiBAcmV0dXJucyBUaGUgcG9zaXRpb24gb2YgdGhlIGdpdmVuIGNoaWxkIGVudGl0eS5cclxuICAgKi9cclxuICBwdWJsaWMgZ2V0Q2hpbGRJbmRleChjaGlsZDogRW50aXR5KTogbnVtYmVyIHtcclxuICAgIHJldHVybiB0aGlzLmNoaWxkcmVuLmluZGV4T2YoY2hpbGQpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQmFzZWQgb24gYWxyZWFkeSBleGlzdGluZyBwYXJlbnQtY2hpbGQgcmVsYXRpb24sIHRoaXMgbWV0aG9kIG1vZGlmaWVzIHRoZSBpbmRleCBvZiBnaXZlbiBjaGlsZCBpbiB0aGUgY2hpbGRyZW4gbGlzdCBvZiB0aGlzIGVudGl0eS5cclxuICAgKiBAcGFyYW0gY2hpbGQgU2luZ2xlIGVudGl0eSB0byBtb2RpZnkgaW5kZXguXHJcbiAgICogQHBhcmFtIHpfaW5kZXggSW5kZXggaW4gYXJyYXkgb2YgY2hpbGRyZW4gaW4gdGhpcyBlbnRpdHkuIFRoZSBoaWdoZXIgZ2V0cyByZW5kZXJkIGxhdGVyLlxyXG4gICAqIEByZXR1cm5zIFRoZSBwb3NpdGlvbiBnaXZlbiBjaGlsZCBlbnRpdHkgaXMgbW92ZWQgdG8uXHJcbiAgICovXHJcbiAgcHVibGljIHNldENoaWxkSW5kZXgoY2hpbGQ6IEVudGl0eSwgaW5kZXg6IG51bWJlcik6IG51bWJlciB7XHJcbiAgICBjb25zdCBjdXJyZW50SW5kZXggPSB0aGlzLmdldENoaWxkSW5kZXgoY2hpbGQpO1xyXG4gICAgaWYgKGN1cnJlbnRJbmRleCA9PT0gLTEpIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSSBBTSBOT1QgWU9VUiBGQVRIRVJcIik7IC8vIHRvZG86IGJldHRlciBlcnJvciBtZXNzYWdlP1xyXG4gICAgfVxyXG4gICAgdGhpcy5jaGlsZHJlbi5zcGxpY2UoY3VycmVudEluZGV4LCAxKTtcclxuICAgIGNvbnN0IHNhZmVJbmRleCA9IE1hdGgubWF4KDAsIE1hdGgubWluKGluZGV4LCB0aGlzLmNoaWxkcmVuLmxlbmd0aCkpO1xyXG4gICAgdGhpcy5jaGlsZHJlbi5zcGxpY2Uoc2FmZUluZGV4LCAwLCBjaGlsZCk7XHJcbiAgICByZXR1cm4gc2FmZUluZGV4O1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQWxpYXMgb2YgYXR0YWNoQ2hpbGRyZW4uIHRoaXMgZW50aXR5IGlzIGRldHRhY2hlZCBmcm9tIHBhcmVudCBpZiBudWxsIGlzIHBhc3NlZC5cclxuICAgKiBAZXhhbXBsZVxyXG4gICAqIFRoZSBmb2xsb3dpbmcgdHdvIGxpbmVzZSBvZiBjb2RlIG1lYW5zIGV4YWN0bHkgc2FtZS5cclxuICAgKiBgYGB0c1xyXG4gICAqIEEuc2V0UGFyZW50KEIpO1xyXG4gICAqIEIuYXR0YWNoQ2hpbGRyZW4oQSk7XHJcbiAgICogYGBgXHJcbiAgICogQHBhcmFtIHBhcmVudCBwYXJlbnQgaW5zdGFuY2UgdG8gc2V0IGFzIHBhcmVudCBvZiB0aGlzIGVudGl0eS5cclxuICAgKi9cclxuICBwdWJsaWMgc2V0UGFyZW50KHBhcmVudDogRW50aXR5IHwgbnVsbCA9IG51bGwpIHtcclxuICAgIGlmIChwYXJlbnQgPT0gbnVsbCkge1xyXG4gICAgICB0aGlzLnBhcmVudD8uZGV0YWNoQ2hpbGRyZW4odGhpcyk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBwYXJlbnQuYXR0YWNoQ2hpbGRyZW4odGhpcyk7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IChjb250ZXh0OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQpID0+IHtcclxuICBpZiAoKDxhbnk+Y29udGV4dCkucmVzZXQgIT0gbnVsbCkge1xyXG4gICAgcmV0dXJuIHRydWU7XHJcbiAgfVxyXG5cclxuICAvLyBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQjcmVzZXQgaXMgYSBleHBlcmltZW50YWwgbWV0aG9kLiB3aGljaCBtYXkgbm90IGJlIGluY2x1ZGVkIGluIHNvbWUgYnJvd3NlcnMgaW5jbHVkaW5nIGZpcmVmb3guXHJcbiAgLy8gVGhpcyBibG9jayB3aWxsIGNyZWF0ZSByZXNldCBtZXRob2QgbW9ja2luZyB0aGUgYmVoYXZpb3IgZGVzY3JpYmVkIGluIENocm9taXVtIHNvdXJjZSBjb2RlLlxyXG4gIC8vIEluIG9yZGVyIHRvIGtlZXAgdHJhY2sgb2YgZGVmYXVsdCBzdGF0ZSBzdGFjayBpbiBjb250ZXh0LCByZWxldmFudCBtZXRob2RzIGFyZSBtb2RpZmVpZWQvYWRkZWQgYXMgYSBzaWRlIGVmZmVjdC5cclxuICBjb250ZXh0LnNhdmUoKTtcclxuICBsZXQgc3RhdGVDb3VudCA9IDA7XHJcblxyXG4gIGNvbnN0IHRlbXBTYXZlID0gY29udGV4dC5zYXZlO1xyXG4gIGNvbnN0IHRlbXBSZXN0b3JlID0gY29udGV4dC5yZXN0b3JlO1xyXG5cclxuICBjb250ZXh0LnNhdmUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB0ZW1wU2F2ZS5jYWxsKHRoaXMpO1xyXG4gICAgc3RhdGVDb3VudCsrO1xyXG4gIH07XHJcblxyXG4gIGNvbnRleHQucmVzdG9yZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgIGlmIChzdGF0ZUNvdW50ID4gMCkge1xyXG4gICAgICB0ZW1wUmVzdG9yZS5jYWxsKHRoaXMpO1xyXG4gICAgICBzdGF0ZUNvdW50LS07XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgY29uc3QgcmVzdG9yZVJvb3QgPSBmdW5jdGlvbiAoX2NvbnRleHQ6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCkge1xyXG4gICAgZm9yIChsZXQgY291bnQgPSBzdGF0ZUNvdW50OyBjb3VudCA+IC0xOyBjb3VudC0tKSB7XHJcbiAgICAgIHRlbXBSZXN0b3JlLmNhbGwoX2NvbnRleHQpO1xyXG4gICAgfVxyXG4gICAgc3RhdGVDb3VudCA9IC0xO1xyXG4gIH07XHJcblxyXG4gICg8YW55PmNvbnRleHQpLnJlc2V0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgcmVzdG9yZVJvb3QoY29udGV4dCk7XHJcbiAgICB0aGlzLm1vdmVUbygwLCAwKTtcclxuICAgIHRoaXMuYmVnaW5QYXRoKCk7XHJcbiAgICB0aGlzLmNsb3NlUGF0aCgpO1xyXG4gICAgdGhpcy5yZXNldFRyYW5zZm9ybSgpO1xyXG4gICAgdGhpcy5jbGVhclJlY3QoMCwgMCwgdGhpcy5jYW52YXMud2lkdGgsIHRoaXMuY2FudmFzLmhlaWdodCk7XHJcbiAgICB0aGlzLnNhdmUoKTtcclxuICB9O1xyXG4gIHJldHVybiBmYWxzZTtcclxufTtcclxuIiwiaW1wb3J0IHsgVmVjdG9yMkQgfSBmcm9tIFwiLi4vdmVjdG9yXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBUcmFuc2Zvcm0ge1xyXG4gIHByaXZhdGUgdmFsdWVzOiBbbnVtYmVyLCBudW1iZXIsIG51bWJlciwgbnVtYmVyLCBudW1iZXIsIG51bWJlcl07XHJcblxyXG4gIGNvbnN0cnVjdG9yKFxyXG4gICAgbTExOiBudW1iZXIgPSAxLFxyXG4gICAgbTEyOiBudW1iZXIgPSAwLFxyXG4gICAgbTIxOiBudW1iZXIgPSAwLFxyXG4gICAgbTIyOiBudW1iZXIgPSAxLFxyXG4gICAgb3g6IG51bWJlciA9IDAsXHJcbiAgICBveTogbnVtYmVyID0gMFxyXG4gICkge1xyXG4gICAgdGhpcy52YWx1ZXMgPSBbbTExLCBtMTIsIG0yMSwgbTIyLCBveCwgb3ldO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogR2V0dGVyIHByb3BlcnR5IG9mIG0xMVxyXG4gICAqL1xyXG4gIGdldCBtMTEoKTogbnVtYmVyIHtcclxuICAgIHJldHVybiB0aGlzLnZhbHVlc1swXTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEdldHRlciBwcm9wZXJ0eSBvZiBtMTJcclxuICAgKi9cclxuICBnZXQgbTEyKCk6IG51bWJlciB7XHJcbiAgICByZXR1cm4gdGhpcy52YWx1ZXNbMV07XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBHZXR0ZXIgcHJvcGVydHkgb2YgbTIxXHJcbiAgICovXHJcbiAgZ2V0IG0yMSgpOiBudW1iZXIge1xyXG4gICAgcmV0dXJuIHRoaXMudmFsdWVzWzJdO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogR2V0dGVyIHByb3BlcnR5IG9mIG0yMlxyXG4gICAqL1xyXG4gIGdldCBtMjIoKTogbnVtYmVyIHtcclxuICAgIHJldHVybiB0aGlzLnZhbHVlc1szXTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEdldHRlciBwcm9wZXJ0eSBvZiBvZmZzZXQgeFxyXG4gICAqL1xyXG4gIGdldCBveCgpOiBudW1iZXIge1xyXG4gICAgcmV0dXJuIHRoaXMudmFsdWVzWzRdO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogR2V0dGVyIHByb3BlcnR5IG9mIG9mZnNldCB5XHJcbiAgICovXHJcbiAgZ2V0IG95KCk6IG51bWJlciB7XHJcbiAgICByZXR1cm4gdGhpcy52YWx1ZXNbNV07XHJcbiAgfVxyXG5cclxuICBnZXQgRGV0ZXJtaW5hbnQoKTogbnVtYmVyIHtcclxuICAgIHJldHVybiB0aGlzLm0xMSAqIHRoaXMubTIyIC0gdGhpcy5tMTIgKiB0aGlzLm0yMTtcclxuICB9XHJcblxyXG4gIGdldCBpc0ludmVydGlibGUoKTogYm9vbGVhbiB7XHJcbiAgICByZXR1cm4gdGhpcy5EZXRlcm1pbmFudCAhPT0gMDtcclxuICB9XHJcblxyXG4gIGdldCBpc0lkZW50aXR5KCk6IGJvb2xlYW4ge1xyXG4gICAgcmV0dXJuIChcclxuICAgICAgdGhpcy5tMTEgPT09IDEgJiZcclxuICAgICAgdGhpcy5tMjIgPT09IDEgJiZcclxuICAgICAgdGhpcy5tMTIgPT09IDAgJiZcclxuICAgICAgdGhpcy5tMjEgPT09IDAgJiZcclxuICAgICAgdGhpcy5veCA9PT0gMCAmJlxyXG4gICAgICB0aGlzLm95ID09PSAwXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogU2V0dGVyIHByb3BlcnR5IG9mIG0xMVxyXG4gICAqL1xyXG4gIHNldCBtMTEodmFsdWU6IG51bWJlcikge1xyXG4gICAgdGhpcy52YWx1ZXNbMF0gPSB2YWx1ZTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFNldHRlciBwcm9wZXJ0eSBvZiBtMTJcclxuICAgKi9cclxuICBzZXQgbTEyKHZhbHVlOiBudW1iZXIpIHtcclxuICAgIHRoaXMudmFsdWVzWzFdID0gdmFsdWU7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBTZXR0ZXIgcHJvcGVydHkgb2YgbTIxXHJcbiAgICovXHJcbiAgc2V0IG0yMSh2YWx1ZTogbnVtYmVyKSB7XHJcbiAgICB0aGlzLnZhbHVlc1syXSA9IHZhbHVlO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogU2V0dGVyIHByb3BlcnR5IG9mIG0yMlxyXG4gICAqL1xyXG4gIHNldCBtMjIodmFsdWU6IG51bWJlcikge1xyXG4gICAgdGhpcy52YWx1ZXNbM10gPSB2YWx1ZTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFNldHRlciBwcm9wZXJ0eSBvZiBvZmZzZXQgeFxyXG4gICAqL1xyXG4gIHNldCBveCh2YWx1ZTogbnVtYmVyKSB7XHJcbiAgICB0aGlzLnZhbHVlc1s0XSA9IHZhbHVlO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogU2V0dGVyIHByb3BlcnR5IG9mIG9mZnNldCB5XHJcbiAgICovXHJcbiAgc2V0IG95KHZhbHVlOiBudW1iZXIpIHtcclxuICAgIHRoaXMudmFsdWVzWzVdID0gdmFsdWU7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBUcmFuc2xhdGUgY3VycmVudCBjb29yZGluYXRlIHN5c3RlbSBieSBnaXZlbiBvZmZzZXQuXHJcbiAgICogQHBhcmFtIHggLSBYIHZhbHVlIG9mIHRoZSBtb3ZlbWVudC5cclxuICAgKiBAcGFyYW0geSAtIFkgdmFsdWUgb2YgdGhlIG1vdmVtZW50LlxyXG4gICAqIEByZXR1cm5zIEl0c2VsZiB3aGljaCBnb3QgbW92ZWQuXHJcbiAgICovXHJcbiAgcHVibGljIHRyYW5zbGF0ZSh4OiBudW1iZXIsIHk6IG51bWJlcik6IHRoaXMge1xyXG4gICAgdGhpcy5veCArPSB4O1xyXG4gICAgdGhpcy5veSArPSB5O1xyXG4gICAgcmV0dXJuIHRoaXM7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBTY2FsZXMgdGhlIHdob2xlIHNjZW5lLiBCaWdnZXIgdGhlIHZhbHVlIGlzLCBCaWdnZXIgdGhlIGVudGl0aWVzIHNob3cuXHJcbiAgICogQHBhcmFtIHZhbHVlIC0gU2NhbGUgcmF0aW8gb2YgYm90aCBkaXJlY3Rpb24uXHJcbiAgICogQHJldHVybnMgSXRzZWxmIHdoaWNoIGdvdCBzY2FsZWQuXHJcbiAgICovXHJcbiAgcHVibGljIHNjYWxlKHZhbHVlOiBudW1iZXIpOiB0aGlzO1xyXG4gIC8qKlxyXG4gICAqIFNjYWxlcyB0aGUgd2hvbGUgc2NlbmUuIEJpZ2dlciB0aGUgdmFsdWUgaXMsIEJpZ2dlciB0aGUgb2JqZWN0cyBzaG93LlxyXG4gICAqIEBwYXJhbSB4IC0gU2NhbGUgcmF0aW8gb2YgWCBkaXJlY3Rpb24uXHJcbiAgICogQHBhcmFtIHkgLSBTY2FsZSByYXRpbyBvZiBZIGRpcmVjdGlvbi5cclxuICAgKiBAcmV0dXJucyBJdHNlbGYgd2hpY2ggZ290IHNjYWxlZC5cclxuICAgKi9cclxuICBwdWJsaWMgc2NhbGUoeDogbnVtYmVyLCB5OiBudW1iZXIpOiB0aGlzO1xyXG4gIHB1YmxpYyBzY2FsZSh4OiBudW1iZXIsIHk/OiBudW1iZXIpOiB0aGlzIHtcclxuICAgIGlmICh5ID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgcmV0dXJuIHRoaXMuc2NhbGUoeCwgeCk7XHJcbiAgICB9XHJcbiAgICBbMCwgMSwgNF0uZm9yRWFjaCgodikgPT4ge1xyXG4gICAgICB0aGlzLnZhbHVlc1t2XSAqPSB4O1xyXG4gICAgfSk7XHJcbiAgICBbMiwgMywgNV0uZm9yRWFjaCgodikgPT4ge1xyXG4gICAgICB0aGlzLnZhbHVlc1t2XSAqPSB5O1xyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gdGhpcztcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEFwcGx5IGxpbmVhciB0cmFuc2Zvcm1hdGlvbi5cclxuICAgKiBAcGFyYW0gbTExIC0gRWxlbWVudCBvZiB0aGUgbWF0cml4IGF0IGAoMSwgMSlgLlxyXG4gICAqIEBwYXJhbSBtMTIgLSBFbGVtZW50IG9mIHRoZSBtYXRyaXggYXQgYCgxLCAyKWAuXHJcbiAgICogQHBhcmFtIG0yMSAtIEVsZW1lbnQgb2YgdGhlIG1hdHJpeCBhdCBgKDIsIDEpYC5cclxuICAgKiBAcGFyYW0gbTIyIC0gRWxlbWVudCBvZiB0aGUgbWF0cml4IGF0IGAoMiwgMilgLlxyXG4gICAqIEBwYXJhbSBveCAtIEVsZW1lbnQgb2YgdGhlIG1hdHJpeCBhdCBgKDMsIDEpYC5cclxuICAgKiBAcGFyYW0gb3kgLSBFbGVtZW50IG9mIHRoZSBtYXRyaXggYXQgYCgzLCAyKWAuXHJcbiAgICogQHJldHVybnMgSXRzZWxmIHdoaWNoIGdvdCBhcHBsaWVkLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBsaW5lYXIoXHJcbiAgICBtMTE6IG51bWJlcixcclxuICAgIG0xMjogbnVtYmVyLFxyXG4gICAgbTIxOiBudW1iZXIsXHJcbiAgICBtMjI6IG51bWJlcixcclxuICAgIG94OiBudW1iZXIsXHJcbiAgICBveTogbnVtYmVyXHJcbiAgKTogdGhpcyB7XHJcbiAgICB0aGlzLnZhbHVlcyA9IFtcclxuICAgICAgbTExICogdGhpcy5tMTEgKyBtMTIgKiB0aGlzLm0yMSxcclxuICAgICAgbTExICogdGhpcy5tMTIgKyBtMTIgKiB0aGlzLm0yMixcclxuICAgICAgbTIxICogdGhpcy5tMTEgKyBtMjIgKiB0aGlzLm0yMSxcclxuICAgICAgbTIxICogdGhpcy5tMTIgKyBtMjIgKiB0aGlzLm0yMixcclxuICAgICAgbTExICogdGhpcy5veCArIG0xMiAqIHRoaXMub3kgKyBveCxcclxuICAgICAgbTIxICogdGhpcy5veCArIG0yMiAqIHRoaXMub3kgKyBveSxcclxuICAgIF07XHJcbiAgICByZXR1cm4gdGhpcztcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFJvdGF0ZSB0aGUgY2FtZXJhIGNvdW50Y2xvY2t3aXNlLlxyXG4gICAqIEBwYXJhbSBhbmdsZSAtIFRoZSByb3RhdGlvbiBhbmdsZSB5b3Ugd2FudC4gKGluICpkZWdyZWVzKilcclxuICAgKiBAcmV0dXJucyBJdHNlbGYgd2hpY2ggZ290IHJvdGF0ZWQuXHJcbiAgICovXHJcbiAgcHVibGljIHJvdGF0ZShhbmdsZTogbnVtYmVyKTogdGhpcyB7XHJcbiAgICBhbmdsZSA9IChhbmdsZSAqIE1hdGguUEkpIC8gMTgwO1xyXG4gICAgY29uc3Qgc2luVmFsdWUgPSBNYXRoLnNpbihhbmdsZSk7XHJcbiAgICBjb25zdCBjb3NWYWx1ZSA9IE1hdGguY29zKGFuZ2xlKTtcclxuICAgIHJldHVybiB0aGlzLmxpbmVhcihjb3NWYWx1ZSwgc2luVmFsdWUsIC1zaW5WYWx1ZSwgY29zVmFsdWUsIDAsIDApO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQXBwbHkgdHJhbnNmb3JtIHRvIHRoZSBnaWVuIGNvb3JkaW5hdGUgdmFsdWVzLlxyXG4gICAqIEBwYXJhbSB4IC0gWCB2YWx1ZSBvZiB0aGUgY29vcmRpbmF0ZS5cclxuICAgKiBAcGFyYW0geSAtIFkgdmFsdWUgb2YgdGhlIGNvb3JkaW5hdGUuXHJcbiAgICogQHJldHVybnMgQWN0dWFsIGNvb3JkaW5hdGUgdmFsdWVzIHlvdXIgY29vcmRpbmF0ZSB3aWxsIGFwcGVhciBhdC5cclxuICAgKi9cclxuICBwdWJsaWMgYXBwbHkoeDogbnVtYmVyIHwgVmVjdG9yMkQsIHk/OiBudW1iZXIpOiBWZWN0b3IyRCB7XHJcbiAgICBsZXQgdjogVmVjdG9yMkQ7XHJcbiAgICBpZiAoeCBpbnN0YW5jZW9mIFZlY3RvcjJEKSB7XHJcbiAgICAgIHYgPSB4O1xyXG4gICAgICB5ID0geC5ZO1xyXG4gICAgICB4ID0geC5YO1xyXG4gICAgICB2LlggPSB0aGlzLm0xMSAqIHggKyB0aGlzLm0xMiAqIHkgKyB0aGlzLm94O1xyXG4gICAgICB2LlkgPSB0aGlzLm0yMSAqIHggKyB0aGlzLm0yMiAqIHkgKyB0aGlzLm95O1xyXG4gICAgfSBlbHNlIGlmICh5ICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgdiA9IG5ldyBWZWN0b3IyRChcclxuICAgICAgICB0aGlzLm0xMSAqIHggKyB0aGlzLm0xMiAqIHkgKyB0aGlzLm94LFxyXG4gICAgICAgIHRoaXMubTIxICogeCArIHRoaXMubTIyICogeSArIHRoaXMub3lcclxuICAgICAgKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcihcclxuICAgICAgICBcIlRyYW5zZm9ybSNhcHBseSBtZXRob2QgcmVxdWlyZXMgdHdvIG51bWJlciBwYXJhbWV0ZXJzIG9yIG9uZSBWZWN0b3IyRC5cIlxyXG4gICAgICApO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHY7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBNdWx0aXBseSBnaXZlbiB0cmFuc2Zvcm0gdG8gdGhpcyB0cmFuc2Zvcm0uIEEgPSBBQiB3aGVyZSB0aGlzIGlzIEEgYW5kIGdpdmVuIHBhcmFtIGlzIEIuXHJcbiAgICogQHBhcmFtIEIgLSBYIHZhbHVlIG9mIHRoZSBjb29yZGluYXRlLlxyXG4gICAqIEByZXR1cm5zIHRoaXMgdHJhbnNmb3JtIGFmdGVyIHRyYW5zZm9ybWF0aW9uLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBtdWx0aXBseShCOiBUcmFuc2Zvcm0pOiB0aGlzIHtcclxuICAgIHJldHVybiB0aGlzLmxpbmVhciguLi5CLnZhbHVlcyk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBJbnZlcnQgdGhpcyBtYXRyaXggaWYgaW52ZXJ0aWJsZS5cclxuICAgKiBAcmV0dXJucyB0aGlzIHRyYW5zZm9ybS5cclxuICAgKi9cclxuICBwdWJsaWMgaW52ZXJ0KCkge1xyXG4gICAgY29uc3QgZGV0ID0gdGhpcy5EZXRlcm1pbmFudDtcclxuICAgIGlmIChkZXQgPT09IDApIHRocm93IG5ldyBFcnJvcihcIlRoaXMgdHJhbnNmb3JtIGlzIG5vdCBpbnZlcnRpYmxlXCIpO1xyXG4gICAgY29uc3QgbTExID0gdGhpcy5tMjIgLyBkZXQ7XHJcbiAgICBjb25zdCBtMTIgPSAodGhpcy5tMTIgKiAtMSkgLyBkZXQ7XHJcbiAgICBjb25zdCBveCA9ICh0aGlzLm0xMiAqIHRoaXMub3kgLSB0aGlzLm0yMiAqIHRoaXMub3gpIC8gZGV0O1xyXG4gICAgY29uc3QgbTIxID0gKHRoaXMubTIxICogLTEpIC8gZGV0O1xyXG4gICAgY29uc3QgbTIyID0gdGhpcy5tMTEgLyBkZXQ7XHJcbiAgICBjb25zdCBveSA9ICgodGhpcy5tMTEgKiB0aGlzLm95IC0gdGhpcy5tMjEgKiB0aGlzLm94KSAqIC0xKSAvIGRldDtcclxuXHJcbiAgICB0aGlzLm0xMSA9IG0xMTtcclxuICAgIHRoaXMubTEyID0gbTEyO1xyXG4gICAgdGhpcy5veCA9IG94O1xyXG4gICAgdGhpcy5tMjEgPSBtMjE7XHJcbiAgICB0aGlzLm0yMiA9IG0yMjtcclxuICAgIHRoaXMub3kgPSBveTtcclxuICAgIHJldHVybiB0aGlzO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogTWFrZXMgYSBjb3B5IG9mIHRoaXMgdHJhbnNmb3JtLlxyXG4gICAqIEByZXR1cm5zIGEgY29weSBvZiB0aGlzIG1hdHJpeFxyXG4gICAqL1xyXG4gIHB1YmxpYyBjb3B5KCk6IFRyYW5zZm9ybSB7XHJcbiAgICByZXR1cm4gbmV3IFRyYW5zZm9ybSguLi50aGlzLnZhbHVlcyk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBbYERPTU1hdHJpeGBdOiBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvRE9NTWF0cml4XHJcbiAgICogW2BET01NYXRyaXhgXSBnZXR0ZXIgbWV0aG9kLlxyXG4gICAqIEByZXR1cm5zIFtgRE9NTWF0cml4YF0gb2JqZWN0IG1hZGUgZnJvbSB0aGlzIHZhbHVlcy5cclxuICAgKi9cclxuICBwdWJsaWMgdG9ET00oKTogRE9NTWF0cml4IHtcclxuICAgIHJldHVybiBuZXcgRE9NTWF0cml4KFtcclxuICAgICAgdGhpcy5tMTEsXHJcbiAgICAgIHRoaXMubTIxLFxyXG4gICAgICB0aGlzLm0xMixcclxuICAgICAgdGhpcy5tMjIsXHJcbiAgICAgIHRoaXMub3gsXHJcbiAgICAgIHRoaXMub3ksXHJcbiAgICBdKTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgRW50aXR5IH0gZnJvbSBcIi4uL2VudGl0eVwiO1xyXG5pbXBvcnQgeyBUcmFuc2Zvcm0gfSBmcm9tIFwiLi4vdHJhbnNmb3JtXCI7XHJcbmltcG9ydCBJRHJhd2FibGUgZnJvbSBcIi4vaWRyYXdhYmxlXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBhYnN0cmFjdCBjbGFzcyBTcHJpdGUgZXh0ZW5kcyBFbnRpdHkgaW1wbGVtZW50cyBJRHJhd2FibGUge1xyXG4gIHByaXZhdGUgcmVnaW9uOiBFbnRpdHkgfCB1bmRlZmluZWQ7XHJcblxyXG4gIHByaXZhdGUgdHJhbnNmb3JtOiBUcmFuc2Zvcm0gfCB1bmRlZmluZWQ7XHJcblxyXG4gIC8qKlxyXG4gICAqIEdldHRlciBwcm9wZXJ0eSBmb3IgdHJhbnNmb3JtLlxyXG4gICAqIEByZXR1cm5zIFRoZSBtYXRyaXggdHJhbnNmb3JtIGFwcGxpZWQgdG8gdGhpcyBzcHJpdGUuXHJcbiAgICovXHJcbiAgcHVibGljIGdldCBUcmFuc2Zvcm0oKTogVHJhbnNmb3JtIHtcclxuICAgIGlmICghdGhpcy50cmFuc2Zvcm0pIHRoaXMudHJhbnNmb3JtID0gbmV3IFRyYW5zZm9ybSgpO1xyXG4gICAgcmV0dXJuIHRoaXMudHJhbnNmb3JtO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogR2V0dGVyIHByb3BlcnR5IGZvciByZWdpb24uXHJcbiAgICogQHJldHVybnMgVGhlIGRyYXdpbmcgcmVnaW9uIHRoaXMgc3ByaXRlIGlzIGluZGljYXRpbmcuIFNwcml0ZXMgYXJlIGNsaXBwZWQgYnkgdGhlaXIgcmVnaW9uLlxyXG4gICAqIEBzZWUgW0NhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCNjbGlwXShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEL2NsaXApXHJcbiAgICovXHJcbiAgcHVibGljIGdldCBSZWdpb24oKTogRW50aXR5IHwgdW5kZWZpbmVkIHtcclxuICAgIHJldHVybiB0aGlzLnJlZ2lvbjtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEByZXR1cm5zIEJvb2xlYW4gdGhhdCBkZXRlcm1pbmVzIHdoZXRoZXIgdGhlIHJlZ2lvbiBvZiB0aGlzIHNwcml0ZSBpbmRpY2F0ZXMgaXQgc2VsZi5cclxuICAgKiBAc2VlIHtAbGluayBSZWdpb259XHJcbiAgICovXHJcbiAgcHVibGljIGdldCBpc1NlbGZSZWdpb24oKTogYm9vbGVhbiB7XHJcbiAgICByZXR1cm4gdGhpcy5yZWdpb24gPT09IHRoaXM7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBTZXR0ZXIgcHJvcGVydHkgZm9yIHRyYW5zZm9ybS5cclxuICAgKi9cclxuICBwdWJsaWMgc2V0IFRyYW5zZm9ybSh0cmFuc2Zvcm06IFRyYW5zZm9ybSkge1xyXG4gICAgdGhpcy50cmFuc2Zvcm0gPSB0cmFuc2Zvcm07XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBTZXR0ZXIgcHJvcGVydHkgZm9yIHJlZ2lvbi5cclxuICAgKi9cclxuICBwdWJsaWMgc2V0IFJlZ2lvbihyZWdpb246IEVudGl0eSB8IHVuZGVmaW5lZCkge1xyXG4gICAgdGhpcy5yZWdpb24gPSByZWdpb247XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBAaW5oZXJpdGRvY1xyXG4gICAqL1xyXG4gIHB1YmxpYyByZWFkb25seSBkcmF3ID0gKGNvbnRleHQ6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCwgZGVsYXk6IG51bWJlcikgPT4ge1xyXG4gICAgY29udGV4dC5zYXZlKCk7XHJcblxyXG4gICAgY29udGV4dC50cmFuc2xhdGUodGhpcy5BYnNvbHV0ZVgsIHRoaXMuQWJzb2x1dGVZKTtcclxuXHJcbiAgICBpZiAodGhpcy50cmFuc2Zvcm0pIHtcclxuICAgICAgY29udGV4dC50cmFuc2Zvcm0oXHJcbiAgICAgICAgdGhpcy50cmFuc2Zvcm0ubTExLFxyXG4gICAgICAgIHRoaXMudHJhbnNmb3JtLm0yMSxcclxuICAgICAgICB0aGlzLnRyYW5zZm9ybS5tMTIsXHJcbiAgICAgICAgdGhpcy50cmFuc2Zvcm0ubTIyLFxyXG4gICAgICAgIHRoaXMudHJhbnNmb3JtLm94LFxyXG4gICAgICAgIHRoaXMudHJhbnNmb3JtLm95XHJcbiAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHRoaXMucmVnaW9uKSB7XHJcbiAgICAgIHRoaXMuYmVmb3JlQ2xpcChjb250ZXh0LCBkZWxheSk7XHJcbiAgICAgIGNvbnRleHQuYmVnaW5QYXRoKCk7XHJcbiAgICAgIGNvbnRleHQucmVjdCgwLCAwLCB0aGlzLnJlZ2lvbi5XaWR0aCwgdGhpcy5yZWdpb24uSGVpZ2h0KTtcclxuICAgICAgY29udGV4dC5jbGlwKCk7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5vbkRyYXcoY29udGV4dCwgZGVsYXkpO1xyXG5cclxuICAgIGNvbnRleHQucmVzdG9yZSgpO1xyXG5cclxuICAgIHRoaXMuYWZ0ZXJSZXN0b3JlKGNvbnRleHQsIGRlbGF5KTtcclxuICAgIGZvciAoY29uc3QgY2hpbGQgb2YgdGhpcy5DaGlsZHJlbikge1xyXG4gICAgICBpZiAoIShjaGlsZCBpbnN0YW5jZW9mIFNwcml0ZSkpIGNvbnRpbnVlO1xyXG4gICAgICBjaGlsZC5kcmF3KGNvbnRleHQsIGRlbGF5KTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICAvKipcclxuICAgKiBQcmUtY2xpcCB0YXNrcyBwZXJmb3JtZWQgZm9yIGNhbnZhcyBjb250ZXh0IHJlc2V0LlxyXG4gICAqIHRoaXMgbWV0aG9kIGlzIGNhbGxlZCBhdXRvbWF0aWNhbGx5IGJ5IGVuZ2luZSBpZiBhdHRhY2hlZC5cclxuICAgKiBAcGFyYW0gY29udGV4dCBDYW52YXMgY29udGV4dCB0byBwZXJmb3JtIHJlc2V0IG9uLlxyXG4gICAqIEBwYXJhbSBkZWxheSB0aW1lIGluIG1pbGxpc2Vjb25kcyBwYXNzZWQgZnJvbSB0aGUgcHJldmlvdXMgZnJhbWUgY2FsbC5cclxuICAgKi9cclxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVudXNlZC12YXJzXHJcbiAgcHVibGljIGJlZm9yZUNsaXAoY29udGV4dDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJELCBkZWxheTogbnVtYmVyKSB7fVxyXG5cclxuICAvKipcclxuICAgKiBQb3N0LXJlc3RvcmUgdGFza3MgcGVyZm9ybWVkIGZvciBjYW52YXMgY29udGV4dCByZXN0b3JlLlxyXG4gICAqIHRoaXMgbWV0aG9kIGlzIGNhbGxlZCBhdXRvbWF0aWNhbGx5IGJ5IGVuZ2luZSBpZiBhdHRhY2hlZC5cclxuICAgKiBAcGFyYW0gY29udGV4dCBDYW52YXMgY29udGV4dCB0byBwZXJmb3JtIHJlc2V0IG9uLlxyXG4gICAqIEBwYXJhbSBkZWxheSB0aW1lIGluIG1pbGxpc2Vjb25kcyBwYXNzZWQgZnJvbSB0aGUgcHJldmlvdXMgZnJhbWUgY2FsbC5cclxuICAgKi9cclxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVudXNlZC12YXJzXHJcbiAgcHVibGljIGFmdGVyUmVzdG9yZShjb250ZXh0OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQsIGRlbGF5OiBudW1iZXIpIHt9XHJcblxyXG4gIHB1YmxpYyByZXNldFRyYW5zZm9ybSgpIHtcclxuICAgIHRoaXMudHJhbnNmb3JtID0gbmV3IFRyYW5zZm9ybSgpO1xyXG4gIH1cclxuICAvKipcclxuICAgKiBSZW5kZXIgdGFza3MgcGVyZm9ybWVkIGZvciBjYW52YXMgY29udGV4dC5cclxuICAgKiB0aGlzIG1ldGhvZCBpcyBjYWxsZWQgYXV0b21hdGljYWxseSBieSBlbmdpbmUgaWYgYXR0YWNoZWQuXHJcbiAgICogQHBhcmFtIGNvbnRleHQgQ2FudmFzIGNvbnRleHQgdG8gcGVyZm9ybSByZXNldCBvbi5cclxuICAgKiBAcGFyYW0gZGVsYXkgdGltZSBpbiBtaWxsaXNlY29uZHMgcGFzc2VkIGZyb20gdGhlIHByZXZpb3VzIGZyYW1lIGNhbGwuXHJcbiAgICovXHJcbiAgcHVibGljIGFic3RyYWN0IG9uRHJhdyhcclxuICAgIGNvbnRleHQ6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCxcclxuICAgIGRlbGF5OiBudW1iZXJcclxuICApOiB2b2lkO1xyXG59XHJcbiIsImltcG9ydCB7IFNwcml0ZSB9IGZyb20gXCIuLi9zcHJpdGVcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEJsYW5rU2NlbmUgZXh0ZW5kcyBTcHJpdGUge1xyXG4gIHB1YmxpYyBvbkRyYXcoKTogdm9pZCB7fVxyXG59XHJcbiIsImltcG9ydCBDYW52YXNDb25maWcgZnJvbSBcIi4vY2FudmFzX2NvbmZpZ1wiO1xyXG5pbXBvcnQgeyBFbnRpdHkgfSBmcm9tIFwiLi9lbnRpdHlcIjtcclxuaW1wb3J0IHsgSURyYXdhYmxlIH0gZnJvbSBcIi4vc3ByaXRlXCI7XHJcbmltcG9ydCB7IFZlY3RvcjJEIH0gZnJvbSBcIi4vdmVjdG9yXCI7XHJcbmltcG9ydCBjaGVja0NvbXBhdGliaWxpdHkgZnJvbSBcIi4vY29tcGF0aWJpbGl0eVwiO1xyXG5pbXBvcnQgeyBCbGFua1NjZW5lIH0gZnJvbSBcIi4vc2NlbmVzXCI7XHJcbmltcG9ydCB7IE1vZGlmaWVyIH0gZnJvbSBcIi4vbW9kaWZpZXJcIjtcclxuaW1wb3J0IHsgVHJhbnNmb3JtIH0gZnJvbSBcIi4vdHJhbnNmb3JtXCI7XHJcblxyXG5pbnRlcmZhY2UgRXh0ZW5kZWRDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQgZXh0ZW5kcyBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQge1xyXG4gIHJlc2V0KCk6IHZvaWQ7XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEVuZ2luZSB7XHJcbiAgcHJpdmF0ZSBjYW52YXM6IEhUTUxDYW52YXNFbGVtZW50O1xyXG5cclxuICBwcml2YXRlIGNvbnRleHQ6IEV4dGVuZGVkQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEO1xyXG5cclxuICBwcml2YXRlIHByZXZpb3VzVGltZXN0YW1wOiBudW1iZXIgPSAwO1xyXG5cclxuICBwcml2YXRlIGFuaW1hdGlvbklkOiBudW1iZXIgPSAtMTtcclxuXHJcbiAgcHJpdmF0ZSBzY2VuZTogSURyYXdhYmxlID0gbmV3IEJsYW5rU2NlbmUoKTtcclxuXHJcbiAgcHJpdmF0ZSBzdWJSZXNldDogKGNvbnRleHQ6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCkgPT4gdm9pZDtcclxuXHJcbiAgcHJpdmF0ZSBjYW1lcmE6IFRyYW5zZm9ybSA9IG5ldyBUcmFuc2Zvcm0oKTtcclxuXHJcbiAgcHJpdmF0ZSBtb2RpZmllcnM6IE1vZGlmaWVyW10gPSBbXTtcclxuXHJcbiAgLyoqXHJcbiAgICogQ29uc3RydWN0b3Igd2lsbCBiaW5kIEVuZ2luZSBvYmplY3QgdG8gYSBnaXZlbiBjYW52YXMgYW5kIGNoZWNrIGZvciBpbmNvbXBhdGlibGUgY2FudmFzIGZlYXR1cmVzIGFuZCBjb3Zlci5cclxuICAgKiBAcGFyYW0gY2FudmFzSWRlbnRpZmllciBvbmUgb2YgSFRNTENuYXZhc0VsZW1lbnQgb3IgY3NzIHNlbGVjdG9yIHN0cmluZyB0aGF0IGluZGljYXRlcyBjYW52YXMgZWxlbWVudC5cclxuICAgKi9cclxuICBwdWJsaWMgY29uc3RydWN0b3IoY2FudmFzSWRlbnRpZmllcjogSFRNTENhbnZhc0VsZW1lbnQgfCBzdHJpbmcgfCBudWxsKSB7XHJcbiAgICAvLyBsb2NhdGUgY2FudmFzIGJ5IEhUTUxDYW52YXNFbGVtZW50IG9yIENTUyBzZWxlY3RvclxyXG4gICAgbGV0IGNhbnZhczogSFRNTENhbnZhc0VsZW1lbnQgfCBudWxsO1xyXG4gICAgaWYgKHR5cGVvZiBjYW52YXNJZGVudGlmaWVyID09PSBcInN0cmluZ1wiKSB7XHJcbiAgICAgIGNhbnZhcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgICAgY2FudmFzSWRlbnRpZmllclxyXG4gICAgICApIGFzIEhUTUxDYW52YXNFbGVtZW50IHwgbnVsbDtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGNhbnZhcyA9IGNhbnZhc0lkZW50aWZpZXI7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGNhbnZhcyA9PT0gbnVsbCkge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJVbmFibGUgdG8gaWRlbnRpZnkgY2FudmFzLlwiKTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLmNhbnZhcyA9IGNhbnZhcztcclxuICAgIHRoaXMuc3ViUmVzZXQgPSAoKSA9PiB7fTtcclxuXHJcbiAgICAvLyByZXF1ZXN0IGNvbnRleHQgZnJvbSBnaXZlbiBjYW52YXNcclxuICAgIGNvbnN0IGNvbnRleHQgPSB0aGlzLmNhbnZhcy5nZXRDb250ZXh0KFxyXG4gICAgICBcIjJkXCJcclxuICAgICkgYXMgRXh0ZW5kZWRDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQ7XHJcblxyXG4gICAgdGhpcy5jb250ZXh0ID0gY29udGV4dDtcclxuXHJcbiAgICBjaGVja0NvbXBhdGliaWxpdHkodGhpcyk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgZ2V0IENhbnZhcygpIHtcclxuICAgIHJldHVybiB0aGlzLmNhbnZhcztcclxuICB9XHJcblxyXG4gIHB1YmxpYyBnZXQgQ29udGV4dCgpIHtcclxuICAgIHJldHVybiB0aGlzLmNvbnRleHQ7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgZ2V0IFNjZW5lKCk6IElEcmF3YWJsZSB7XHJcbiAgICByZXR1cm4gdGhpcy5zY2VuZTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBnZXQgQ2FtZXJhKCk6IFRyYW5zZm9ybSB7XHJcbiAgICByZXR1cm4gdGhpcy5jYW1lcmE7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgc2V0IFNjZW5lKHNjZW5lOiBJRHJhd2FibGUpIHtcclxuICAgIGlmIChzY2VuZSBpbnN0YW5jZW9mIEVudGl0eSkge1xyXG4gICAgICBzY2VuZS5zZXRQYXJlbnQobnVsbCk7XHJcbiAgICB9XHJcbiAgICB0aGlzLnNjZW5lID0gc2NlbmU7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgc2V0IENhbWVyYShjYW1lcmE6IFRyYW5zZm9ybSkge1xyXG4gICAgdGhpcy5jYW1lcmEgPSBjYW1lcmE7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBSZWdpc3RlciBhIGNhbGxiYWNrIHRoYXQgd2lsbCBiZSBjYWxsZWQgb24gZWFjaCBmcmFtZS5cclxuICAgKiBAcGFyYW0gZnVuYyBVc2VyIGRlZmluZWQgY2FsbGJhY2sgdGhhdCB3aWxsIGJlIGV4ZWN1dGVkIGFmdGVyIGVhY2ggZnJhbWUgaXMgcmVzZXQgY29tcGxldGVseVxyXG4gICAqL1xyXG4gIHB1YmxpYyBzZXRTdWJSZXNldEZ1bmN0aW9uKFxyXG4gICAgZnVuYzogKGNvbnRleHQ6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCkgPT4gdm9pZFxyXG4gICkge1xyXG4gICAgdGhpcy5zdWJSZXNldCA9IGZ1bmM7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBTZXQgY2FudmFzIHdpZHRoIGFuZCBoZWlnaHQgdG8gZ2l2ZW4gZGltZW5zaW9uLiBDYW52YXMgd2lsbCB0cnkgdG8gbWF0Y2ggd2luZG93IHNpemUgd2hlbiBubyBhcmd1bWVudHMgYXJlIHBhc3NlZC5cclxuICAgKiBAcGFyYW0gY29uZmlnIENhbnZhcyBzaXplIGRpbWVuc2lvbi5cclxuICAgKi9cclxuICBwdWJsaWMgcmVzaXplQ2FudmFzKGNvbmZpZz86IENhbnZhc0NvbmZpZyB8IFZlY3RvcjJEKSB7XHJcbiAgICBpZiAoY29uZmlnIGluc3RhbmNlb2YgVmVjdG9yMkQpIHtcclxuICAgICAgdGhpcy5DYW52YXMud2lkdGggPSBjb25maWcuWDtcclxuICAgICAgdGhpcy5DYW52YXMuaGVpZ2h0ID0gY29uZmlnLlk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLkNhbnZhcy53aWR0aCA9IGNvbmZpZz8udyA/PyB3aW5kb3cuaW5uZXJXaWR0aDtcclxuICAgICAgdGhpcy5DYW52YXMuaGVpZ2h0ID0gY29uZmlnPy5oID8/IHdpbmRvdy5pbm5lckhlaWdodDtcclxuICAgIH1cclxuICAgIC8vIFRPRE86IGVtaXQgY2FudmFzIHJlc2l6ZSBldmVudFxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogTWFrZXMgYm91bmQgY2FudmFzIGJlZ2luIHJlZnJlc2hpbmcgd2l0aCBnaXZlbiBjb250ZXh0LiBUaGlzIHdpbGwgYWxzbyBzdGFydCBtb2RpZmllcnMgdG8gdXBkYXRlLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGFydCgpIHtcclxuICAgIC8vIG1heSBiZSBlcnJvciBjaGVjay5cclxuICAgIHRoaXMucmVuZGVyKHRoaXMucHJldmlvdXNUaW1lc3RhbXApO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogTWFrZXMgYm91bmQgY2FudmFzIHRvIHN0b3AgcmVmcmVzaGluZy4gVGhpcyB3aWxsIGFsc28gc3RvcCBtb2RpZmllcnMgdG8gdXBkYXRlLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdG9wKCkge1xyXG4gICAgY2FuY2VsQW5pbWF0aW9uRnJhbWUodGhpcy5hbmltYXRpb25JZCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiByZWdpc3RlciBhbmQgc3RhcnQgZ2l2ZW4gbW9kaWZpZXIgZnJvbSB0aGlzIGVuZ2luZS5cclxuICAgKiBAcGFyYW0gbW9kaWZpZXIgTW9kaWZpZXIgdG8gaHVsdCBleGVjdXRpb24uXHJcbiAgICovXHJcbiAgcHVibGljIHJlZ2lzdGVyTW9kaWZpZXIobW9kaWZpZXI6IE1vZGlmaWVyKSB7XHJcbiAgICBtb2RpZmllci5yZWdpc3RlcigpO1xyXG4gICAgdGhpcy5tb2RpZmllcnMucHVzaChtb2RpZmllcik7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBTdG9wcyBhbmQgcmVtb3ZlcyBnaXZlbiBtb2RpZmllciBmcm9tIHVwZGF0ZSBwb29sIGluIHRoaXMgZW5naW5lLlxyXG4gICAqIEBwYXJhbSBtb2RpZmllciBNb2RpZmllciB0byBodWx0IGV4ZWN1dGlvbi5cclxuICAgKi9cclxuICBwdWJsaWMgdW5yZWdpc3Rlck1vZGlmaWVyKG1vZGlmaWVyOiBNb2RpZmllcikge1xyXG4gICAgdGhpcy5tb2RpZmllcnMgPSB0aGlzLm1vZGlmaWVycy5maWx0ZXIoKG0pID0+IG0gPT09IG1vZGlmaWVyKTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgcmVuZGVyKHRpbWVzdGFtcDogbnVtYmVyKSB7XHJcbiAgICBjb25zdCBlbGFwc2VkVGltZSA9IHRpbWVzdGFtcCAtIHRoaXMucHJldmlvdXNUaW1lc3RhbXA7XHJcbiAgICB0aGlzLnByZXZpb3VzVGltZXN0YW1wID0gdGltZXN0YW1wO1xyXG5cclxuICAgIGNvbnN0IG1vZGlmaWVyc1RvUmVtb3ZlOiBNb2RpZmllcltdID0gW107XHJcbiAgICBmb3IgKGNvbnN0IG1vZGlmaWVyIG9mIHRoaXMubW9kaWZpZXJzKSB7XHJcbiAgICAgIGlmIChtb2RpZmllci5Qcm9ncmVzcyA8IDEpIHtcclxuICAgICAgICBtb2RpZmllci50aWNrKCk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgbW9kaWZpZXJzVG9SZW1vdmUucHVzaChtb2RpZmllcik7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHRoaXMubW9kaWZpZXJzID0gdGhpcy5tb2RpZmllcnMuZmlsdGVyKFxyXG4gICAgICAobSkgPT4gIW1vZGlmaWVyc1RvUmVtb3ZlLmluY2x1ZGVzKG0pXHJcbiAgICApO1xyXG5cclxuICAgIHRoaXMuY29udGV4dC5yZXNldCgpO1xyXG4gICAgdGhpcy5zdWJSZXNldCh0aGlzLmNvbnRleHQpO1xyXG5cclxuICAgIHRoaXMuY29udGV4dC50cmFuc2Zvcm0oXHJcbiAgICAgIHRoaXMuY2FtZXJhLm0xMSxcclxuICAgICAgdGhpcy5jYW1lcmEubTIxLFxyXG4gICAgICB0aGlzLmNhbWVyYS5tMTIsXHJcbiAgICAgIHRoaXMuY2FtZXJhLm0yMixcclxuICAgICAgdGhpcy5jYW1lcmEub3gsXHJcbiAgICAgIHRoaXMuY2FtZXJhLm95XHJcbiAgICApO1xyXG5cclxuICAgIHRoaXMuc2NlbmU/LmRyYXcodGhpcy5jb250ZXh0LCBlbGFwc2VkVGltZSk7XHJcblxyXG4gICAgdGhpcy5hbmltYXRpb25JZCA9IHJlcXVlc3RBbmltYXRpb25GcmFtZSh0aGlzLnJlbmRlci5iaW5kKHRoaXMpKTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IEVuZ2luZSBmcm9tIFwiLi4vZW5naW5lXCI7XHJcbmltcG9ydCBjb250ZXh0UmVzZXQgZnJvbSBcIi4vY29udGV4dF9yZXNldFwiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgKGVuZ2luZTogRW5naW5lKSA9PiB7XHJcbiAgY29uc3QgY29tcGF0T2JqZWN0ID0ge1xyXG4gICAgY29udGV4dF9yZXNldDogY29udGV4dFJlc2V0KGVuZ2luZS5Db250ZXh0KSxcclxuICB9O1xyXG4gIE9iamVjdC5mcmVlemUoY29tcGF0T2JqZWN0KTtcclxuICByZXR1cm4gY29tcGF0T2JqZWN0O1xyXG59O1xyXG4iLCJpbXBvcnQgVmVjdG9yIGZyb20gXCIuL3ZlY3RvclwiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVmVjdG9yM0QgZXh0ZW5kcyBWZWN0b3Ige1xyXG4gIGNvbnN0cnVjdG9yKHg6IG51bWJlciA9IDAsIHk6IG51bWJlciA9IDAsIHo6IG51bWJlciA9IDApIHtcclxuICAgIHN1cGVyKHgsIHksIHopO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGdldCBYKCkge1xyXG4gICAgcmV0dXJuIHRoaXMudmFsdWVzWzBdO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGdldCBZKCkge1xyXG4gICAgcmV0dXJuIHRoaXMudmFsdWVzWzFdO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGdldCBaKCkge1xyXG4gICAgcmV0dXJuIHRoaXMudmFsdWVzWzJdO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIHNldCBYKHg6IG51bWJlcikge1xyXG4gICAgdGhpcy52YWx1ZXNbMF0gPSB4O1xyXG4gIH1cclxuXHJcbiAgcHVibGljIHNldCBZKHk6IG51bWJlcikge1xyXG4gICAgdGhpcy52YWx1ZXNbMV0gPSB5O1xyXG4gIH1cclxuXHJcbiAgcHVibGljIHNldCBaKHo6IG51bWJlcikge1xyXG4gICAgdGhpcy52YWx1ZXNbMl0gPSB6O1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgVmVjdG9yIGZyb20gXCIuL3ZlY3RvclwiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVmVjdG9yNEQgZXh0ZW5kcyBWZWN0b3Ige1xyXG4gIGNvbnN0cnVjdG9yKHg6IG51bWJlciA9IDAsIHk6IG51bWJlciA9IDAsIHo6IG51bWJlciA9IDAsIHc6IG51bWJlciA9IDApIHtcclxuICAgIHN1cGVyKHgsIHksIHosIHcpO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGdldCBYKCkge1xyXG4gICAgcmV0dXJuIHRoaXMudmFsdWVzWzBdO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGdldCBZKCkge1xyXG4gICAgcmV0dXJuIHRoaXMudmFsdWVzWzFdO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGdldCBaKCkge1xyXG4gICAgcmV0dXJuIHRoaXMudmFsdWVzWzJdO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGdldCBXKCkge1xyXG4gICAgcmV0dXJuIHRoaXMudmFsdWVzWzNdO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIHNldCBYKHg6IG51bWJlcikge1xyXG4gICAgdGhpcy52YWx1ZXNbMF0gPSB4O1xyXG4gIH1cclxuXHJcbiAgcHVibGljIHNldCBZKHk6IG51bWJlcikge1xyXG4gICAgdGhpcy52YWx1ZXNbMV0gPSB5O1xyXG4gIH1cclxuXHJcbiAgcHVibGljIHNldCBaKHo6IG51bWJlcikge1xyXG4gICAgdGhpcy52YWx1ZXNbMl0gPSB6O1xyXG4gIH1cclxuXHJcbiAgcHVibGljIHNldCBXKHc6IG51bWJlcikge1xyXG4gICAgdGhpcy52YWx1ZXNbM10gPSB3O1xyXG4gIH1cclxufVxyXG4iXSwibmFtZXMiOlsiX193ZWJwYWNrX3JlcXVpcmVfXyIsImV4cG9ydHMiLCJkZWZpbml0aW9uIiwia2V5IiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsIm9iaiIsInByb3AiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwiVmVjdG9yIiwiY29uc3RydWN0b3IiLCJ2YWx1ZXMiLCJ0aGlzIiwic2l6ZSIsImxlbmd0aCIsIlNpemUiLCJjb3B5IiwidG8iLCJmb3JjZSIsIkVycm9yIiwib3ZlcndyaXRlIiwiaXNlcXVhbCIsIm90aGVyIiwicHJlY2lzZSIsInRoaXNBcnJheSIsInNsaWNlIiwib3RoZXJBcnJheSIsImV2ZXJ5IiwidiIsImkiLCJ0b0ZpeGVkIiwic2hpZnQiLCJtb3ZlIiwidGVtcCIsInVuc2hpZnQiLCJjb3VudGVyIiwibWFwIiwiVmVjdG9yMkQiLCJ4IiwieSIsInN1cGVyIiwiWCIsIlkiLCJFbnRpdHkiLCJjb25maWciLCJjaGlsZHJlbiIsInBhcmVudCIsImRpbWVuc2lvbiIsInBvc2l0aW9uIiwiVyIsIkgiLCJQb3NpdGlvbiIsIkFic29sdXRlWCIsIkFic29sdXRlWSIsIkRpbWVuc2lvbiIsIldpZHRoIiwiSGVpZ2h0IiwiUGFyZW50IiwiQ2hpbGRyZW4iLCJ3aWR0aCIsImhlaWdodCIsImF0dGFjaENoaWxkcmVuIiwiel9pbmRleCIsIkluZmluaXR5IiwibGFzdEluZGV4IiwiQXJyYXkiLCJpc0FycmF5Iiwic2FmZUluZGV4IiwiTWF0aCIsIm1heCIsIm1pbiIsImluZGV4IiwidGVtcFBhcmVudCIsImRldGFjaENoaWxkcmVuIiwicHVzaCIsInNldENoaWxkSW5kZXgiLCJjaGlsZCIsImluZGV4T2YiLCJzcGxpY2UiLCJnZXRDaGlsZEluZGV4IiwiY3VycmVudEluZGV4Iiwic2V0UGFyZW50IiwiY29udGV4dCIsInJlc2V0Iiwic2F2ZSIsInN0YXRlQ291bnQiLCJ0ZW1wU2F2ZSIsInRlbXBSZXN0b3JlIiwicmVzdG9yZSIsIl9jb250ZXh0IiwiY291bnQiLCJyZXN0b3JlUm9vdCIsIm1vdmVUbyIsImJlZ2luUGF0aCIsImNsb3NlUGF0aCIsInJlc2V0VHJhbnNmb3JtIiwiY2xlYXJSZWN0IiwiY2FudmFzIiwiVHJhbnNmb3JtIiwibTExIiwibTEyIiwibTIxIiwibTIyIiwib3giLCJveSIsIkRldGVybWluYW50IiwiaXNJbnZlcnRpYmxlIiwiaXNJZGVudGl0eSIsInRyYW5zbGF0ZSIsInNjYWxlIiwidW5kZWZpbmVkIiwiZm9yRWFjaCIsImxpbmVhciIsInJvdGF0ZSIsImFuZ2xlIiwiUEkiLCJzaW5WYWx1ZSIsInNpbiIsImNvc1ZhbHVlIiwiY29zIiwiYXBwbHkiLCJtdWx0aXBseSIsIkIiLCJpbnZlcnQiLCJkZXQiLCJ0b0RPTSIsIkRPTU1hdHJpeCIsIlNwcml0ZSIsImRyYXciLCJkZWxheSIsInRyYW5zZm9ybSIsInJlZ2lvbiIsImJlZm9yZUNsaXAiLCJyZWN0IiwiY2xpcCIsIm9uRHJhdyIsImFmdGVyUmVzdG9yZSIsIlJlZ2lvbiIsImlzU2VsZlJlZ2lvbiIsIkJsYW5rU2NlbmUiLCJFbmdpbmUiLCJjYW52YXNJZGVudGlmaWVyIiwicHJldmlvdXNUaW1lc3RhbXAiLCJhbmltYXRpb25JZCIsInNjZW5lIiwiY2FtZXJhIiwibW9kaWZpZXJzIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwic3ViUmVzZXQiLCJnZXRDb250ZXh0IiwiZW5naW5lIiwiY29tcGF0T2JqZWN0IiwiY29udGV4dF9yZXNldCIsIkNvbnRleHQiLCJmcmVlemUiLCJDYW52YXMiLCJTY2VuZSIsIkNhbWVyYSIsInNldFN1YlJlc2V0RnVuY3Rpb24iLCJmdW5jIiwicmVzaXplQ2FudmFzIiwidyIsIndpbmRvdyIsImlubmVyV2lkdGgiLCJoIiwiaW5uZXJIZWlnaHQiLCJzdGFydCIsInJlbmRlciIsInN0b3AiLCJjYW5jZWxBbmltYXRpb25GcmFtZSIsInJlZ2lzdGVyTW9kaWZpZXIiLCJtb2RpZmllciIsInJlZ2lzdGVyIiwidW5yZWdpc3Rlck1vZGlmaWVyIiwiZmlsdGVyIiwibSIsInRpbWVzdGFtcCIsImVsYXBzZWRUaW1lIiwibW9kaWZpZXJzVG9SZW1vdmUiLCJQcm9ncmVzcyIsInRpY2siLCJpbmNsdWRlcyIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsImJpbmQiLCJWZWN0b3IzRCIsInoiLCJaIiwiVmVjdG9yNEQiXSwic291cmNlUm9vdCI6IiJ9