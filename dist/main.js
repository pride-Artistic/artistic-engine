!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var s=e();for(var i in s)("object"==typeof exports?exports:t)[i]=s[i]}}(self,(()=>(()=>{"use strict";var t={d:(e,s)=>{for(var i in s)t.o(s,i)&&!t.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:s[i]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};t.r(e),t.d(e,{Engine:()=>m,Entity:()=>o,Scenes:()=>s,Sprite:()=>u,Transform:()=>l,Vector:()=>i});var s={};t.r(s),t.d(s,{BlankScene:()=>c});var i={};t.r(i),t.d(i,{Vector2D:()=>n,Vector3D:()=>d,Vector4D:()=>v});class r{constructor(...t){this.values=[...t],this.size=t.length}get Size(){return this.size}copy(t,e=!1){if(this.size>t.size&&!e)throw new Error(`Copying vector of size ${this.size} to ${t.size} will cause data loss.\nInclude force option if intended.`);return t.overwrite(this.values),t}isequal(t,e){if(this.size!==t.size)return!1;const s=this.values.slice(),i=t.values.slice();return s.every(((t,s)=>null==e?t==i[s]:t.toFixed(e)==i[s].toFixed(e)))}shift(t=1){t%=this.size;const e=this.values.slice(0,-t);return e.unshift(...this.values.slice(-t)),this.values=e,this}overwrite(t){let e=0;this.values=this.values.map((function(){return t[e++]||0}))}}class n extends r{constructor(t=0,e=0){super(t,e)}get X(){return this.values[0]}get Y(){return this.values[1]}set X(t){this.values[0]=t}set Y(t){this.values[1]=t}}class h{constructor(){this.children=[],this.parent=null}get Parent(){return this.parent}get Children(){return this.children.slice()}attachChildren(t,e=1/0){var s;let i=-1;if(Array.isArray(t)){const s=Math.max(0,Math.min(e,this.children.length));for(let e=0;e<t.length;e++)i=this.attachChildren(t[e],s+e)}else{for(let e=this;null!==e;e=e.parent)if(e===t)throw new Error("Loop of parent-child relationships detected.");null===(s=t.parent)||void 0===s||s.detachChildren(t),this.children.push(t),t.parent=this,i=this.setChildIndex(t,e)}return i}detachChildren(t){if(Array.isArray(t))for(const e of t)this.detachChildren(e);else{const e=this.children.indexOf(t);e>-1&&(this.children.splice(e,1),t.parent=null)}}getChildIndex(t){return this.children.indexOf(t)}setChildIndex(t,e){const s=this.getChildIndex(t);if(-1===s)throw new Error("I AM NOT YOUR FATHER");this.children.splice(s,1);const i=Math.max(0,Math.min(e,this.children.length));return this.children.splice(i,0,t),i}setParent(t=null){var e;null==t?null===(e=this.parent)||void 0===e||e.detachChildren(this):t.attachChildren(this)}}class o extends h{constructor(t){var e,s,i,r;super(),this.dimension=new n,this.position=new n,t&&(this.dimension.X=null!==(e=t.W)&&void 0!==e?e:0,this.dimension.Y=null!==(s=t.H)&&void 0!==s?s:0,this.position.X=null!==(i=t.X)&&void 0!==i?i:0,this.position.Y=null!==(r=t.Y)&&void 0!==r?r:0)}get Position(){return this.position}get X(){return this.position.X}get Y(){return this.position.Y}get Dimension(){return this.dimension}get W(){return this.dimension.X}get H(){return this.dimension.Y}get Width(){return this.dimension.X}get Height(){return this.dimension.Y}get AbsoluteX(){var t,e;return(null!==(e=null===(t=this.parent)||void 0===t?void 0:t.AbsoluteX)&&void 0!==e?e:0)+this.position.X}get AbsoluteY(){var t,e;return(null!==(e=null===(t=this.parent)||void 0===t?void 0:t.AbsoluteY)&&void 0!==e?e:0)+this.position.Y}set Position(t){this.position=t}set X(t){this.position.X=t}set Y(t){this.position.Y=t}set Dimension(t){this.dimension=t}set W(t){this.dimension.X=t}set H(t){this.dimension.Y=t}set Width(t){this.dimension.X=t}set Height(t){this.dimension.Y=t}}const a=t=>{if(null!=t.reset)return!0;t.save();let e=0;const s=t.save,i=t.restore;return t.save=function(){s.call(this),e++},t.restore=function(){e>0&&(i.call(this),e--)},t.reset=function(){!function(t){for(let s=e;s>-1;s--)i.call(t);e=-1}(t),this.moveTo(0,0),this.beginPath(),this.closePath(),this.resetTransform(),this.clearRect(0,0,this.canvas.width,this.canvas.height),this.save()},!1};class l{constructor(t=1,e=0,s=0,i=1,r=0,n=0){this.values=[t,e,s,i,r,n]}get m11(){return this.values[0]}get m12(){return this.values[1]}get m21(){return this.values[2]}get m22(){return this.values[3]}get ox(){return this.values[4]}get oy(){return this.values[5]}get Determinant(){return this.m11*this.m22-this.m12*this.m21}get isInvertible(){return 0!==this.Determinant}get isIdentity(){return 1===this.m11&&1===this.m22&&0===this.m12&&0===this.m21&&0===this.ox&&0===this.oy}set m11(t){this.values[0]=t}set m12(t){this.values[1]=t}set m21(t){this.values[2]=t}set m22(t){this.values[3]=t}set ox(t){this.values[4]=t}set oy(t){this.values[5]=t}static fromDOM(t){return new this(t.a,t.c,t.b,t.d,t.e,t.f)}translate(t,e){return this.ox+=t,this.oy+=e,this}scale(t,e){return void 0===e?this.scale(t,t):([0,1,4].forEach((e=>{this.values[e]*=t})),[2,3,5].forEach((t=>{this.values[t]*=e})),this)}linear(t,e,s,i,r,n){return this.values=[t*this.m11+e*this.m21,t*this.m12+e*this.m22,s*this.m11+i*this.m21,s*this.m12+i*this.m22,t*this.ox+e*this.oy+r,s*this.ox+i*this.oy+n],this}rotate(t,e=0,s=0){t=t*Math.PI/180;const i=Math.sin(t),r=Math.cos(t);return this.translate(-e,-s).linear(r,i,-i,r,0,0).translate(e,s)}apply(t,e){let s;if(t instanceof n)s=t,e=t.Y,t=t.X,s.X=this.m11*t+this.m12*e+this.ox,s.Y=this.m21*t+this.m22*e+this.oy;else{if(void 0===e)throw new Error("Transform#apply method requires two number parameters or one Vector2D.");s=new n(this.m11*t+this.m12*e+this.ox,this.m21*t+this.m22*e+this.oy)}return s}multiply(t){return this.linear(...t.values)}invert(){const t=this.Determinant;if(0===t)throw new Error("This transform is not invertible");const e=this.m22/t,s=-1*this.m12/t,i=(this.m12*this.oy-this.m22*this.ox)/t,r=-1*this.m21/t,n=this.m11/t,h=-1*(this.m11*this.oy-this.m21*this.ox)/t;return this.m11=e,this.m12=s,this.ox=i,this.m21=r,this.m22=n,this.oy=h,this}skew(t=0,e=0){return this.linear(1,t,e,1,0,0),this}copy(){return new l(...this.values)}toDOM(){return new DOMMatrix([this.m11,this.m21,this.m12,this.m22,this.ox,this.oy])}}class u extends o{constructor(){super(...arguments),this.draw=(t,e)=>{t.save(),t.translate(this.AbsoluteX,this.AbsoluteY),this.transform&&t.transform(this.transform.m11,this.transform.m21,this.transform.m12,this.transform.m22,this.transform.ox,this.transform.oy),this.region&&(this.beforeClip(t,e),t.beginPath(),t.rect(0,0,this.region.Width,this.region.Height),t.clip()),this.onDraw(t,e),t.restore(),this.afterRestore(t,e);for(const s of this.Children)s instanceof u&&s.draw(t,e)}}get Transform(){return this.transform||(this.transform=new l),this.transform}get Region(){return this.region}get isSelfRegion(){return this.region===this}set Transform(t){this.transform=t}set Region(t){this.region=t}beforeClip(t,e){}afterRestore(t,e){}resetTransform(){this.transform=new l}}class c extends u{onDraw(){}}class m{constructor(t){let e;if(this.previousTimestamp=0,this.animationId=-1,this.scene=new c,this.camera=new l,this.modifiers=[],e="string"==typeof t?document.querySelector(t):t,null===e)throw new Error("Unable to identify canvas.");this.canvas=e,this.subReset=()=>{};const s=this.canvas.getContext("2d");this.context=s,(t=>{const e={context_reset:a(this.Context)};Object.freeze(e)})()}get Canvas(){return this.canvas}get Context(){return this.context}get Scene(){return this.scene}get Camera(){return this.camera}set Scene(t){t instanceof o&&t.setParent(null),this.scene=t}set Camera(t){this.camera=t}setSubResetFunction(t){this.subReset=t}resizeCanvas(t){var e,s;t instanceof n?(this.Canvas.width=t.X,this.Canvas.height=t.Y):(this.Canvas.width=null!==(e=null==t?void 0:t.w)&&void 0!==e?e:window.innerWidth,this.Canvas.height=null!==(s=null==t?void 0:t.h)&&void 0!==s?s:window.innerHeight)}start(){this.render(this.previousTimestamp)}stop(){cancelAnimationFrame(this.animationId)}registerModifier(t){t.register(),this.modifiers.push(t)}unregisterModifier(t){this.modifiers=this.modifiers.filter((e=>e===t))}render(t){var e;const s=t-this.previousTimestamp;this.previousTimestamp=t;const i=[];for(const t of this.modifiers)t.Progress<1?t.tick():i.push(t);this.modifiers=this.modifiers.filter((t=>!i.includes(t))),this.context.reset(),this.subReset(this.context),this.context.transform(this.camera.m11,this.camera.m21,this.camera.m12,this.camera.m22,this.camera.ox,this.camera.oy),null===(e=this.scene)||void 0===e||e.draw(this.context,s),this.animationId=requestAnimationFrame(this.render.bind(this))}}class d extends r{constructor(t=0,e=0,s=0){super(t,e,s)}get X(){return this.values[0]}get Y(){return this.values[1]}get Z(){return this.values[2]}set X(t){this.values[0]=t}set Y(t){this.values[1]=t}set Z(t){this.values[2]=t}}class v extends r{constructor(t=0,e=0,s=0,i=0){super(t,e,s,i)}get X(){return this.values[0]}get Y(){return this.values[1]}get Z(){return this.values[2]}get W(){return this.values[3]}set X(t){this.values[0]=t}set Y(t){this.values[1]=t}set Z(t){this.values[2]=t}set W(t){this.values[3]=t}}return e})()));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RVc2RCxRQUNULE9BQU81RCxLQUFLRCxPQUFPLEVBQ3JCLENBRVc2QixNQUFFSCxHQUNYekIsS0FBS0QsT0FBTyxHQUFLMEIsQ0FDbkIsQ0FFV0ksTUFBRUgsR0FDWDFCLEtBQUtELE9BQU8sR0FBSzJCLENBQ25CLENBRVdpSyxNQUFFRCxHQUNYMUwsS0FBS0QsT0FBTyxHQUFLMkwsQ0FDbkIsQ0FFVzlILE1BQUVzRyxHQUNYbEssS0FBS0QsT0FBTyxHQUFLbUssQ0FDbkIsRSIsInNvdXJjZXMiOlsid2VicGFjazovL2FydGlzdGljLWVuZ2luZS93ZWJwYWNrL3VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24iLCJ3ZWJwYWNrOi8vYXJ0aXN0aWMtZW5naW5lL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL2FydGlzdGljLWVuZ2luZS93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vYXJ0aXN0aWMtZW5naW5lL3dlYnBhY2svcnVudGltZS9oYXNPd25Qcm9wZXJ0eSBzaG9ydGhhbmQiLCJ3ZWJwYWNrOi8vYXJ0aXN0aWMtZW5naW5lL3dlYnBhY2svcnVudGltZS9tYWtlIG5hbWVzcGFjZSBvYmplY3QiLCJ3ZWJwYWNrOi8vYXJ0aXN0aWMtZW5naW5lLy4vc3JjL3ZlY3Rvci92ZWN0b3IudHMiLCJ3ZWJwYWNrOi8vYXJ0aXN0aWMtZW5naW5lLy4vc3JjL3ZlY3Rvci92ZWN0b3IyRC50cyIsIndlYnBhY2s6Ly9hcnRpc3RpYy1lbmdpbmUvLi9zcmMvdHJlZWl0ZW0vaW5kZXgudHMiLCJ3ZWJwYWNrOi8vYXJ0aXN0aWMtZW5naW5lLy4vc3JjL2VudGl0eS9lbnRpdHkudHMiLCJ3ZWJwYWNrOi8vYXJ0aXN0aWMtZW5naW5lLy4vc3JjL2NvbXBhdGliaWxpdHkvY29udGV4dF9yZXNldC50cyIsIndlYnBhY2s6Ly9hcnRpc3RpYy1lbmdpbmUvLi9zcmMvdHJhbnNmb3JtL3RyYW5zZm9ybS50cyIsIndlYnBhY2s6Ly9hcnRpc3RpYy1lbmdpbmUvLi9zcmMvc3ByaXRlL3Nwcml0ZS50cyIsIndlYnBhY2s6Ly9hcnRpc3RpYy1lbmdpbmUvLi9zcmMvc2NlbmVzL2JsYW5rX3NjZW5lLnRzIiwid2VicGFjazovL2FydGlzdGljLWVuZ2luZS8uL3NyYy9lbmdpbmUudHMiLCJ3ZWJwYWNrOi8vYXJ0aXN0aWMtZW5naW5lLy4vc3JjL2NvbXBhdGliaWxpdHkvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vYXJ0aXN0aWMtZW5naW5lLy4vc3JjL3ZlY3Rvci92ZWN0b3IzRC50cyIsIndlYnBhY2s6Ly9hcnRpc3RpYy1lbmdpbmUvLi9zcmMvdmVjdG9yL3ZlY3RvcjRELnRzIl0sInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiB3ZWJwYWNrVW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbihyb290LCBmYWN0b3J5KSB7XG5cdGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlID09PSAnb2JqZWN0Jylcblx0XHRtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoKTtcblx0ZWxzZSBpZih0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpXG5cdFx0ZGVmaW5lKFtdLCBmYWN0b3J5KTtcblx0ZWxzZSB7XG5cdFx0dmFyIGEgPSBmYWN0b3J5KCk7XG5cdFx0Zm9yKHZhciBpIGluIGEpICh0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgPyBleHBvcnRzIDogcm9vdClbaV0gPSBhW2ldO1xuXHR9XG59KShzZWxmLCAoKSA9PiB7XG5yZXR1cm4gIiwiLy8gVGhlIHJlcXVpcmUgc2NvcGVcbnZhciBfX3dlYnBhY2tfcmVxdWlyZV9fID0ge307XG5cbiIsIi8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb25zIGZvciBoYXJtb255IGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uZCA9IChleHBvcnRzLCBkZWZpbml0aW9uKSA9PiB7XG5cdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBkZWZpbml0aW9uW2tleV0gfSk7XG5cdFx0fVxuXHR9XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IChvYmosIHByb3ApID0+IChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKSkiLCIvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSAoZXhwb3J0cykgPT4ge1xuXHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcblx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcblx0fVxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xufTsiLCJleHBvcnQgZGVmYXVsdCBhYnN0cmFjdCBjbGFzcyBWZWN0b3Ige1xyXG4gIHByb3RlY3RlZCByZWFkb25seSBzaXplOiBudW1iZXI7XHJcblxyXG4gIHByb3RlY3RlZCB2YWx1ZXM6IG51bWJlcltdO1xyXG5cclxuICBjb25zdHJ1Y3RvciguLi52YWx1ZXM6IG51bWJlcltdKSB7XHJcbiAgICB0aGlzLnZhbHVlcyA9IFsuLi52YWx1ZXNdO1xyXG4gICAgdGhpcy5zaXplID0gdmFsdWVzLmxlbmd0aDtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBnZXQgU2l6ZSgpIHtcclxuICAgIHJldHVybiB0aGlzLnNpemU7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgY29weTxUIGV4dGVuZHMgVmVjdG9yPih0bzogVCwgZm9yY2U6IGJvb2xlYW4gPSBmYWxzZSk6IFQge1xyXG4gICAgaWYgKHRoaXMuc2l6ZSA+IHRvLnNpemUgJiYgIWZvcmNlKSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcihcclxuICAgICAgICBgQ29weWluZyB2ZWN0b3Igb2Ygc2l6ZSAke3RoaXMuc2l6ZX0gdG8gJHt0by5zaXplfSB3aWxsIGNhdXNlIGRhdGEgbG9zcy5cXG5JbmNsdWRlIGZvcmNlIG9wdGlvbiBpZiBpbnRlbmRlZC5gXHJcbiAgICAgICk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0by5vdmVyd3JpdGUodGhpcy52YWx1ZXMpO1xyXG4gICAgICByZXR1cm4gdG87XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgaXNlcXVhbDxUIGV4dGVuZHMgVmVjdG9yPihvdGhlcjogVCwgcHJlY2lzZT86IG51bWJlcik6IGJvb2xlYW4ge1xyXG4gICAgaWYgKHRoaXMuc2l6ZSAhPT0gb3RoZXIuc2l6ZSkgcmV0dXJuIGZhbHNlO1xyXG4gICAgY29uc3QgdGhpc0FycmF5ID0gdGhpcy52YWx1ZXMuc2xpY2UoKTtcclxuICAgIGNvbnN0IG90aGVyQXJyYXkgPSBvdGhlci52YWx1ZXMuc2xpY2UoKTtcclxuICAgIHJldHVybiB0aGlzQXJyYXkuZXZlcnkoKHYsIGkpID0+IHtcclxuICAgICAgaWYgKHByZWNpc2UgPT0gbnVsbCkge1xyXG4gICAgICAgIHJldHVybiB2ID09IG90aGVyQXJyYXlbaV07XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIHYudG9GaXhlZChwcmVjaXNlKSA9PSBvdGhlckFycmF5W2ldLnRvRml4ZWQocHJlY2lzZSk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIHNoaWZ0KG1vdmU6IG51bWJlciA9IDEpIHtcclxuICAgIG1vdmUgJT0gdGhpcy5zaXplO1xyXG4gICAgY29uc3QgdGVtcCA9IHRoaXMudmFsdWVzLnNsaWNlKDAsIC1tb3ZlKTtcclxuICAgIHRlbXAudW5zaGlmdCguLi50aGlzLnZhbHVlcy5zbGljZSgtbW92ZSkpO1xyXG4gICAgLy8gSXQgY2hhbmdlcyBpdHNlbGYgKHJlZmVyZW5jZSksIGRvZXMgbm90IHJldHVybiBuZXcgdmFsdWVcclxuICAgIC8vIElmIHlvdSB3YW50IHRvIGxldCBpdCByZXR1cm4gbmV3IHZhbHVlLCB5b3Ugc2hvdWxkIG1vZGlmeSB0aGlzIHNlY3Rpb25cclxuICAgIHRoaXMudmFsdWVzID0gdGVtcDtcclxuICAgIHJldHVybiB0aGlzO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBvdmVyd3JpdGUodmFsdWVzOiBudW1iZXJbXSkge1xyXG4gICAgbGV0IGNvdW50ZXIgPSAwO1xyXG4gICAgdGhpcy52YWx1ZXMgPSB0aGlzLnZhbHVlcy5tYXAoZnVuY3Rpb24gKCkge1xyXG4gICAgICBjb25zdCBuZXdWYWx1ZSA9IHZhbHVlc1tjb3VudGVyKytdO1xyXG4gICAgICBpZiAobmV3VmFsdWUpIHJldHVybiBuZXdWYWx1ZTtcclxuICAgICAgZWxzZSByZXR1cm4gMDtcclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgVmVjdG9yIGZyb20gXCIuL3ZlY3RvclwiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVmVjdG9yMkQgZXh0ZW5kcyBWZWN0b3Ige1xyXG4gIGNvbnN0cnVjdG9yKHg6IG51bWJlciA9IDAsIHk6IG51bWJlciA9IDApIHtcclxuICAgIHN1cGVyKHgsIHkpO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGdldCBYKCkge1xyXG4gICAgcmV0dXJuIHRoaXMudmFsdWVzWzBdO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGdldCBZKCkge1xyXG4gICAgcmV0dXJuIHRoaXMudmFsdWVzWzFdO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIHNldCBYKHg6IG51bWJlcikge1xyXG4gICAgdGhpcy52YWx1ZXNbMF0gPSB4O1xyXG4gIH1cclxuXHJcbiAgcHVibGljIHNldCBZKHk6IG51bWJlcikge1xyXG4gICAgdGhpcy52YWx1ZXNbMV0gPSB5O1xyXG4gIH1cclxufVxyXG4iLCJ0eXBlIFRyZWU8VD4gPSBUICYgVHJlZUl0ZW08VD47XHJcblxyXG5leHBvcnQgZGVmYXVsdCBhYnN0cmFjdCBjbGFzcyBUcmVlSXRlbTxUPiB7XHJcbiAgcHJvdGVjdGVkIGNoaWxkcmVuOiBUcmVlPFQ+W10gPSBbXTtcclxuXHJcbiAgcHJvdGVjdGVkIHBhcmVudDogVHJlZTxUPiB8IG51bGwgPSBudWxsO1xyXG5cclxuICBwdWJsaWMgZ2V0IFBhcmVudCgpIHtcclxuICAgIHJldHVybiB0aGlzLnBhcmVudDtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBnZXQgQ2hpbGRyZW4oKSB7XHJcbiAgICByZXR1cm4gdGhpcy5jaGlsZHJlbi5zbGljZSgpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQ3JlYXRlcyBwYXJlbnQtY2hpbGQgcmVsYXRpb24gYmV0d2VlbiB0aGlzIGVudGl0eSBhbmQgZW50aXRpZXMgcGFzc2VkIHRocm91Z2ggdGhlIHBhcmFtZXRlci5cclxuICAgKiBJZiBjaGlsZHJlbiBwYXNzZWQgYWxyZWFkeSBoYXMgYSBwYXJlbnQsIHRoZSBwcmV2aW91cyByZWxhdGlvbiBpcyBvdmVyd3JpdHRlZC5cclxuICAgKiB6X2luZGV4IGNhbiBiZSBzcGVjaWZpZWQgdG8gY29uZmlndXJlIHJlbmRlcmluZyBzZXF1ZW5jZSBiZXR3ZWVuIGNoaWxkcmVuLlxyXG4gICAqIEBwYXJhbSBjaGlsZHJlbiBTaW5nbGUgZW50aXR5IG9yIGFuIGFycmF5IG9mIGVudGl0aWVzIHRvIGF0dGFjaC5cclxuICAgKiBAcGFyYW0gel9pbmRleCBJbmRleCBpbiBhcnJheSBvZiBhbGwgY2hpbGRyZW4gaW4gdGhpcyBlbnRpdHkuIFRoZSBoaWdoZXIgZ2V0cyByZW5kZXJkIGxhdGVyLlxyXG4gICAqIEByZXR1cm5zIFRoZSBwb3NpdGlvbiBnaXZlbiBjaGlsZCBlbnRpdHkgaXMgcHV0LlxyXG4gICAqL1xyXG4gIHB1YmxpYyBhdHRhY2hDaGlsZHJlbihcclxuICAgIHRoaXM6IFRyZWU8VD4sXHJcbiAgICBjaGlsZHJlbjogVHJlZTxUPltdIHwgVHJlZTxUPixcclxuICAgIHpfaW5kZXg6IG51bWJlciA9IEluZmluaXR5XHJcbiAgKTogbnVtYmVyIHtcclxuICAgIGxldCBsYXN0SW5kZXg6IG51bWJlciA9IC0xO1xyXG4gICAgaWYgKEFycmF5LmlzQXJyYXkoY2hpbGRyZW4pKSB7XHJcbiAgICAgIGNvbnN0IHNhZmVJbmRleCA9IE1hdGgubWF4KDAsIE1hdGgubWluKHpfaW5kZXgsIHRoaXMuY2hpbGRyZW4ubGVuZ3RoKSk7XHJcbiAgICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCBjaGlsZHJlbi5sZW5ndGg7IGluZGV4KyspIHtcclxuICAgICAgICBsYXN0SW5kZXggPSB0aGlzLmF0dGFjaENoaWxkcmVuKGNoaWxkcmVuW2luZGV4XSwgc2FmZUluZGV4ICsgaW5kZXgpO1xyXG4gICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBmb3IgKFxyXG4gICAgICAgIGxldCB0ZW1wUGFyZW50OiBUcmVlPFQ+IHwgbnVsbCA9IHRoaXM7XHJcbiAgICAgICAgdGVtcFBhcmVudCAhPT0gbnVsbDtcclxuICAgICAgICB0ZW1wUGFyZW50ID0gdGVtcFBhcmVudC5wYXJlbnRcclxuICAgICAgKSB7XHJcbiAgICAgICAgaWYgKHRlbXBQYXJlbnQgPT09IGNoaWxkcmVuKSB7XHJcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJMb29wIG9mIHBhcmVudC1jaGlsZCByZWxhdGlvbnNoaXBzIGRldGVjdGVkLlwiKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgY2hpbGRyZW4ucGFyZW50Py5kZXRhY2hDaGlsZHJlbihjaGlsZHJlbik7XHJcbiAgICAgIC8vIFRPRE86IE1heWJlIGdvb2QgaWYgdGhlcmUncyBvcHRpb24gd2hpY2ggZGVjaWRlc1xyXG4gICAgICAvLyAgICAgICB3aGV0aGVyIGl0IGRldGFjaGVzIGFuZCByZS1hdHRhY2hlcyBvciB0aHJvd3MgZXJyb3JcclxuICAgICAgdGhpcy5jaGlsZHJlbi5wdXNoKGNoaWxkcmVuKTtcclxuICAgICAgY2hpbGRyZW4ucGFyZW50ID0gdGhpcztcclxuICAgICAgbGFzdEluZGV4ID0gdGhpcy5zZXRDaGlsZEluZGV4KGNoaWxkcmVuLCB6X2luZGV4KTtcclxuICAgIH1cclxuICAgIHJldHVybiBsYXN0SW5kZXg7IC8vIGlmIHJldHVybnMgLTEsIGVtcHR5IGFycmF5IGhhcyBiZWVuIGlucHV0LlxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogUmVtb3ZlcyBwYXJlbnQtY2hpbGQgcmVsYXRpb24gYmV0d2VlbiB0aGlzIGVudGl0eSBhbmQgZW50aXRpZXMgcGFzc2VkIHRocm91Z2ggdGhlIHBhcmFtZXRlci5cclxuICAgKiBAcGFyYW0gY2hpbGRyZW4gU2luZ2xlIGVudGl0eSBvciBhbiBhcnJheSBvZiBlbnRpdGllcyB0byBkZXR0YWNoLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBkZXRhY2hDaGlsZHJlbihjaGlsZHJlbjogVHJlZTxUPltdIHwgVHJlZTxUPikge1xyXG4gICAgaWYgKEFycmF5LmlzQXJyYXkoY2hpbGRyZW4pKSB7XHJcbiAgICAgIGZvciAoY29uc3QgY2hpbGQgb2YgY2hpbGRyZW4pIHtcclxuICAgICAgICB0aGlzLmRldGFjaENoaWxkcmVuKGNoaWxkKTtcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgY29uc3QgaW5kZXggPSB0aGlzLmNoaWxkcmVuLmluZGV4T2YoY2hpbGRyZW4pO1xyXG4gICAgICBpZiAoaW5kZXggPiAtMSkge1xyXG4gICAgICAgIHRoaXMuY2hpbGRyZW4uc3BsaWNlKGluZGV4LCAxKTtcclxuICAgICAgICBjaGlsZHJlbi5wYXJlbnQgPSBudWxsO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBSZXRyaWV2ZXMgY2hpbGQgaW5kZXggb2YgdGhlIGVudGl0eSBwYXNzZWQgdGhyb3VnaCB0aGUgcGFyYW1ldGVyIGluIHRoZSBjaGlsZHJlbiBsaXN0IG9mIHRoaXMgZW50aXR5LlxyXG4gICAqIElmIGNoaWxkcmVuIHBhc3NlZCBpcyBub3QgY2hpbGQgb2YgdGhpcyBpbnN0YW5jZSwgYW4gZXJyb3IgaXMgdGhyb3duLlxyXG4gICAqIEBwYXJhbSBjaGlsZCBTaW5nbGUgZW50aXR5IHdoaWNoIHJlcXVpcmUgdGhlIGluZGV4LlxyXG4gICAqIEByZXR1cm5zIFRoZSBwb3NpdGlvbiBvZiB0aGUgZ2l2ZW4gY2hpbGQgZW50aXR5LlxyXG4gICAqL1xyXG4gIHB1YmxpYyBnZXRDaGlsZEluZGV4KGNoaWxkOiBUcmVlPFQ+KTogbnVtYmVyIHtcclxuICAgIHJldHVybiB0aGlzLmNoaWxkcmVuLmluZGV4T2YoY2hpbGQpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQmFzZWQgb24gYWxyZWFkeSBleGlzdGluZyBwYXJlbnQtY2hpbGQgcmVsYXRpb24sIHRoaXMgbWV0aG9kIG1vZGlmaWVzIHRoZSBpbmRleCBvZiBnaXZlbiBjaGlsZCBpbiB0aGUgY2hpbGRyZW4gbGlzdCBvZiB0aGlzIGVudGl0eS5cclxuICAgKiBAcGFyYW0gY2hpbGQgU2luZ2xlIGVudGl0eSB0byBtb2RpZnkgaW5kZXguXHJcbiAgICogQHBhcmFtIHpfaW5kZXggSW5kZXggaW4gYXJyYXkgb2YgY2hpbGRyZW4gaW4gdGhpcyBlbnRpdHkuIFRoZSBoaWdoZXIgZ2V0cyByZW5kZXJkIGxhdGVyLlxyXG4gICAqIEByZXR1cm5zIFRoZSBwb3NpdGlvbiBnaXZlbiBjaGlsZCBlbnRpdHkgaXMgbW92ZWQgdG8uXHJcbiAgICovXHJcbiAgcHVibGljIHNldENoaWxkSW5kZXgoY2hpbGQ6IFRyZWU8VD4sIGluZGV4OiBudW1iZXIpOiBudW1iZXIge1xyXG4gICAgY29uc3QgY3VycmVudEluZGV4ID0gdGhpcy5nZXRDaGlsZEluZGV4KGNoaWxkKTtcclxuICAgIGlmIChjdXJyZW50SW5kZXggPT09IC0xKSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkkgQU0gTk9UIFlPVVIgRkFUSEVSXCIpOyAvLyB0b2RvOiBiZXR0ZXIgZXJyb3IgbWVzc2FnZT9cclxuICAgIH1cclxuICAgIHRoaXMuY2hpbGRyZW4uc3BsaWNlKGN1cnJlbnRJbmRleCwgMSk7XHJcbiAgICBjb25zdCBzYWZlSW5kZXggPSBNYXRoLm1heCgwLCBNYXRoLm1pbihpbmRleCwgdGhpcy5jaGlsZHJlbi5sZW5ndGgpKTtcclxuICAgIHRoaXMuY2hpbGRyZW4uc3BsaWNlKHNhZmVJbmRleCwgMCwgY2hpbGQpO1xyXG4gICAgcmV0dXJuIHNhZmVJbmRleDtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEFsaWFzIG9mIGF0dGFjaENoaWxkcmVuLiB0aGlzIGVudGl0eSBpcyBkZXR0YWNoZWQgZnJvbSBwYXJlbnQgaWYgbnVsbCBpcyBwYXNzZWQuXHJcbiAgICogQGV4YW1wbGVcclxuICAgKiBUaGUgZm9sbG93aW5nIHR3byBsaW5lc2Ugb2YgY29kZSBtZWFucyBleGFjdGx5IHNhbWUuXHJcbiAgICogYGBgdHNcclxuICAgKiBBLnNldFBhcmVudChCKTtcclxuICAgKiBCLmF0dGFjaENoaWxkcmVuKEEpO1xyXG4gICAqIGBgYFxyXG4gICAqIEBwYXJhbSBwYXJlbnQgcGFyZW50IGluc3RhbmNlIHRvIHNldCBhcyBwYXJlbnQgb2YgdGhpcyBlbnRpdHkuXHJcbiAgICovXHJcbiAgcHVibGljIHNldFBhcmVudCh0aGlzOiBUcmVlPFQ+LCBwYXJlbnQ6IFRyZWU8VD4gfCBudWxsID0gbnVsbCkge1xyXG4gICAgaWYgKHBhcmVudCA9PSBudWxsKSB7XHJcbiAgICAgIHRoaXMucGFyZW50Py5kZXRhY2hDaGlsZHJlbih0aGlzKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHBhcmVudC5hdHRhY2hDaGlsZHJlbih0aGlzKTtcclxuICAgIH1cclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgVmVjdG9yMkQgfSBmcm9tIFwiLi4vdmVjdG9yXCI7XHJcbmltcG9ydCBJRW50aXR5IGZyb20gXCIuL2llbnRpdHlcIjtcclxuaW1wb3J0IFRyZWVJdGVtIGZyb20gXCIuLi90cmVlaXRlbVwiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRW50aXR5IGV4dGVuZHMgVHJlZUl0ZW08RW50aXR5PiBpbXBsZW1lbnRzIElFbnRpdHkge1xyXG4gIHByb3RlY3RlZCBkaW1lbnNpb246IFZlY3RvcjJEID0gbmV3IFZlY3RvcjJEKCk7XHJcblxyXG4gIHByb3RlY3RlZCBwb3NpdGlvbjogVmVjdG9yMkQgPSBuZXcgVmVjdG9yMkQoKTtcclxuXHJcbiAgcHVibGljIGNvbnN0cnVjdG9yKGNvbmZpZz86IElFbnRpdHkgfCB1bmRlZmluZWQpIHtcclxuICAgIHN1cGVyKCk7XHJcbiAgICBpZiAoY29uZmlnKSB7XHJcbiAgICAgIHRoaXMuZGltZW5zaW9uLlggPSBjb25maWcuVyA/PyAwO1xyXG4gICAgICB0aGlzLmRpbWVuc2lvbi5ZID0gY29uZmlnLkggPz8gMDtcclxuICAgICAgdGhpcy5wb3NpdGlvbi5YID0gY29uZmlnLlggPz8gMDtcclxuICAgICAgdGhpcy5wb3NpdGlvbi5ZID0gY29uZmlnLlkgPz8gMDtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHB1YmxpYyBnZXQgUG9zaXRpb24oKSB7XHJcbiAgICByZXR1cm4gdGhpcy5wb3NpdGlvbjtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBnZXQgWCgpIHtcclxuICAgIHJldHVybiB0aGlzLnBvc2l0aW9uLlg7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgZ2V0IFkoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5wb3NpdGlvbi5ZO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGdldCBEaW1lbnNpb24oKSB7XHJcbiAgICByZXR1cm4gdGhpcy5kaW1lbnNpb247XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgZ2V0IFcoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5kaW1lbnNpb24uWDtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBnZXQgSCgpIHtcclxuICAgIHJldHVybiB0aGlzLmRpbWVuc2lvbi5ZO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGdldCBXaWR0aCgpIHtcclxuICAgIHJldHVybiB0aGlzLmRpbWVuc2lvbi5YO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGdldCBIZWlnaHQoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5kaW1lbnNpb24uWTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBnZXQgQWJzb2x1dGVYKCk6IG51bWJlciB7XHJcbiAgICBjb25zdCBwYXJlbnRYID0gdGhpcy5wYXJlbnQ/LkFic29sdXRlWCA/PyAwO1xyXG4gICAgcmV0dXJuIHBhcmVudFggKyB0aGlzLnBvc2l0aW9uLlg7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgZ2V0IEFic29sdXRlWSgpOiBudW1iZXIge1xyXG4gICAgY29uc3QgcGFyZW50WSA9IHRoaXMucGFyZW50Py5BYnNvbHV0ZVkgPz8gMDtcclxuICAgIHJldHVybiBwYXJlbnRZICsgdGhpcy5wb3NpdGlvbi5ZO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIHNldCBQb3NpdGlvbihwb3NpdGlvbjogVmVjdG9yMkQpIHtcclxuICAgIHRoaXMucG9zaXRpb24gPSBwb3NpdGlvbjtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBzZXQgWCh4OiBudW1iZXIpIHtcclxuICAgIHRoaXMucG9zaXRpb24uWCA9IHg7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgc2V0IFkoeTogbnVtYmVyKSB7XHJcbiAgICB0aGlzLnBvc2l0aW9uLlkgPSB5O1xyXG4gIH1cclxuXHJcbiAgcHVibGljIHNldCBEaW1lbnNpb24oZGltZW5zaW9uOiBWZWN0b3IyRCkge1xyXG4gICAgdGhpcy5kaW1lbnNpb24gPSBkaW1lbnNpb247XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgc2V0IFcod2lkdGg6IG51bWJlcikge1xyXG4gICAgdGhpcy5kaW1lbnNpb24uWCA9IHdpZHRoO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIHNldCBIKGhlaWdodDogbnVtYmVyKSB7XHJcbiAgICB0aGlzLmRpbWVuc2lvbi5ZID0gaGVpZ2h0O1xyXG4gIH1cclxuXHJcbiAgcHVibGljIHNldCBXaWR0aCh3aWR0aDogbnVtYmVyKSB7XHJcbiAgICB0aGlzLmRpbWVuc2lvbi5YID0gd2lkdGg7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgc2V0IEhlaWdodChoZWlnaHQ6IG51bWJlcikge1xyXG4gICAgdGhpcy5kaW1lbnNpb24uWSA9IGhlaWdodDtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgKGNvbnRleHQ6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCkgPT4ge1xyXG4gIGlmICgoPGFueT5jb250ZXh0KS5yZXNldCAhPSBudWxsKSB7XHJcbiAgICByZXR1cm4gdHJ1ZTtcclxuICB9XHJcblxyXG4gIC8vIENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCNyZXNldCBpcyBhIGV4cGVyaW1lbnRhbCBtZXRob2QuIHdoaWNoIG1heSBub3QgYmUgaW5jbHVkZWQgaW4gc29tZSBicm93c2VycyBpbmNsdWRpbmcgZmlyZWZveC5cclxuICAvLyBUaGlzIGJsb2NrIHdpbGwgY3JlYXRlIHJlc2V0IG1ldGhvZCBtb2NraW5nIHRoZSBiZWhhdmlvciBkZXNjcmliZWQgaW4gQ2hyb21pdW0gc291cmNlIGNvZGUuXHJcbiAgLy8gSW4gb3JkZXIgdG8ga2VlcCB0cmFjayBvZiBkZWZhdWx0IHN0YXRlIHN0YWNrIGluIGNvbnRleHQsIHJlbGV2YW50IG1ldGhvZHMgYXJlIG1vZGlmZWllZC9hZGRlZCBhcyBhIHNpZGUgZWZmZWN0LlxyXG4gIGNvbnRleHQuc2F2ZSgpO1xyXG4gIGxldCBzdGF0ZUNvdW50ID0gMDtcclxuXHJcbiAgY29uc3QgdGVtcFNhdmUgPSBjb250ZXh0LnNhdmU7XHJcbiAgY29uc3QgdGVtcFJlc3RvcmUgPSBjb250ZXh0LnJlc3RvcmU7XHJcblxyXG4gIGNvbnRleHQuc2F2ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHRlbXBTYXZlLmNhbGwodGhpcyk7XHJcbiAgICBzdGF0ZUNvdW50Kys7XHJcbiAgfTtcclxuXHJcbiAgY29udGV4dC5yZXN0b3JlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgaWYgKHN0YXRlQ291bnQgPiAwKSB7XHJcbiAgICAgIHRlbXBSZXN0b3JlLmNhbGwodGhpcyk7XHJcbiAgICAgIHN0YXRlQ291bnQtLTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICBjb25zdCByZXN0b3JlUm9vdCA9IGZ1bmN0aW9uIChfY29udGV4dDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEKSB7XHJcbiAgICBmb3IgKGxldCBjb3VudCA9IHN0YXRlQ291bnQ7IGNvdW50ID4gLTE7IGNvdW50LS0pIHtcclxuICAgICAgdGVtcFJlc3RvcmUuY2FsbChfY29udGV4dCk7XHJcbiAgICB9XHJcbiAgICBzdGF0ZUNvdW50ID0gLTE7XHJcbiAgfTtcclxuXHJcbiAgKDxhbnk+Y29udGV4dCkucmVzZXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICByZXN0b3JlUm9vdChjb250ZXh0KTtcclxuICAgIHRoaXMubW92ZVRvKDAsIDApO1xyXG4gICAgdGhpcy5iZWdpblBhdGgoKTtcclxuICAgIHRoaXMuY2xvc2VQYXRoKCk7XHJcbiAgICB0aGlzLnJlc2V0VHJhbnNmb3JtKCk7XHJcbiAgICB0aGlzLmNsZWFyUmVjdCgwLCAwLCB0aGlzLmNhbnZhcy53aWR0aCwgdGhpcy5jYW52YXMuaGVpZ2h0KTtcclxuICAgIHRoaXMuc2F2ZSgpO1xyXG4gIH07XHJcbiAgcmV0dXJuIGZhbHNlO1xyXG59O1xyXG4iLCJpbXBvcnQgeyBWZWN0b3IyRCB9IGZyb20gXCIuLi92ZWN0b3JcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFRyYW5zZm9ybSB7XHJcbiAgcHJpdmF0ZSB2YWx1ZXM6IFtudW1iZXIsIG51bWJlciwgbnVtYmVyLCBudW1iZXIsIG51bWJlciwgbnVtYmVyXTtcclxuXHJcbiAgY29uc3RydWN0b3IoXHJcbiAgICBtMTE6IG51bWJlciA9IDEsXHJcbiAgICBtMTI6IG51bWJlciA9IDAsXHJcbiAgICBtMjE6IG51bWJlciA9IDAsXHJcbiAgICBtMjI6IG51bWJlciA9IDEsXHJcbiAgICBveDogbnVtYmVyID0gMCxcclxuICAgIG95OiBudW1iZXIgPSAwXHJcbiAgKSB7XHJcbiAgICB0aGlzLnZhbHVlcyA9IFttMTEsIG0xMiwgbTIxLCBtMjIsIG94LCBveV07XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBHZXR0ZXIgcHJvcGVydHkgb2YgbTExXHJcbiAgICovXHJcbiAgZ2V0IG0xMSgpOiBudW1iZXIge1xyXG4gICAgcmV0dXJuIHRoaXMudmFsdWVzWzBdO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogR2V0dGVyIHByb3BlcnR5IG9mIG0xMlxyXG4gICAqL1xyXG4gIGdldCBtMTIoKTogbnVtYmVyIHtcclxuICAgIHJldHVybiB0aGlzLnZhbHVlc1sxXTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEdldHRlciBwcm9wZXJ0eSBvZiBtMjFcclxuICAgKi9cclxuICBnZXQgbTIxKCk6IG51bWJlciB7XHJcbiAgICByZXR1cm4gdGhpcy52YWx1ZXNbMl07XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBHZXR0ZXIgcHJvcGVydHkgb2YgbTIyXHJcbiAgICovXHJcbiAgZ2V0IG0yMigpOiBudW1iZXIge1xyXG4gICAgcmV0dXJuIHRoaXMudmFsdWVzWzNdO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogR2V0dGVyIHByb3BlcnR5IG9mIG9mZnNldCB4XHJcbiAgICovXHJcbiAgZ2V0IG94KCk6IG51bWJlciB7XHJcbiAgICByZXR1cm4gdGhpcy52YWx1ZXNbNF07XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBHZXR0ZXIgcHJvcGVydHkgb2Ygb2Zmc2V0IHlcclxuICAgKi9cclxuICBnZXQgb3koKTogbnVtYmVyIHtcclxuICAgIHJldHVybiB0aGlzLnZhbHVlc1s1XTtcclxuICB9XHJcblxyXG4gIGdldCBEZXRlcm1pbmFudCgpOiBudW1iZXIge1xyXG4gICAgcmV0dXJuIHRoaXMubTExICogdGhpcy5tMjIgLSB0aGlzLm0xMiAqIHRoaXMubTIxO1xyXG4gIH1cclxuXHJcbiAgZ2V0IGlzSW52ZXJ0aWJsZSgpOiBib29sZWFuIHtcclxuICAgIHJldHVybiB0aGlzLkRldGVybWluYW50ICE9PSAwO1xyXG4gIH1cclxuXHJcbiAgZ2V0IGlzSWRlbnRpdHkoKTogYm9vbGVhbiB7XHJcbiAgICByZXR1cm4gKFxyXG4gICAgICB0aGlzLm0xMSA9PT0gMSAmJlxyXG4gICAgICB0aGlzLm0yMiA9PT0gMSAmJlxyXG4gICAgICB0aGlzLm0xMiA9PT0gMCAmJlxyXG4gICAgICB0aGlzLm0yMSA9PT0gMCAmJlxyXG4gICAgICB0aGlzLm94ID09PSAwICYmXHJcbiAgICAgIHRoaXMub3kgPT09IDBcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBTZXR0ZXIgcHJvcGVydHkgb2YgbTExXHJcbiAgICovXHJcbiAgc2V0IG0xMSh2YWx1ZTogbnVtYmVyKSB7XHJcbiAgICB0aGlzLnZhbHVlc1swXSA9IHZhbHVlO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogU2V0dGVyIHByb3BlcnR5IG9mIG0xMlxyXG4gICAqL1xyXG4gIHNldCBtMTIodmFsdWU6IG51bWJlcikge1xyXG4gICAgdGhpcy52YWx1ZXNbMV0gPSB2YWx1ZTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFNldHRlciBwcm9wZXJ0eSBvZiBtMjFcclxuICAgKi9cclxuICBzZXQgbTIxKHZhbHVlOiBudW1iZXIpIHtcclxuICAgIHRoaXMudmFsdWVzWzJdID0gdmFsdWU7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBTZXR0ZXIgcHJvcGVydHkgb2YgbTIyXHJcbiAgICovXHJcbiAgc2V0IG0yMih2YWx1ZTogbnVtYmVyKSB7XHJcbiAgICB0aGlzLnZhbHVlc1szXSA9IHZhbHVlO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogU2V0dGVyIHByb3BlcnR5IG9mIG9mZnNldCB4XHJcbiAgICovXHJcbiAgc2V0IG94KHZhbHVlOiBudW1iZXIpIHtcclxuICAgIHRoaXMudmFsdWVzWzRdID0gdmFsdWU7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBTZXR0ZXIgcHJvcGVydHkgb2Ygb2Zmc2V0IHlcclxuICAgKi9cclxuICBzZXQgb3kodmFsdWU6IG51bWJlcikge1xyXG4gICAgdGhpcy52YWx1ZXNbNV0gPSB2YWx1ZTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBzdGF0aWMgZnJvbURPTShkb206IERPTU1hdHJpeCkge1xyXG4gICAgcmV0dXJuIG5ldyB0aGlzKGRvbS5hLCBkb20uYywgZG9tLmIsIGRvbS5kLCBkb20uZSwgZG9tLmYpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogVHJhbnNsYXRlIGN1cnJlbnQgY29vcmRpbmF0ZSBzeXN0ZW0gYnkgZ2l2ZW4gb2Zmc2V0LlxyXG4gICAqIEBwYXJhbSB4IC0gWCB2YWx1ZSBvZiB0aGUgbW92ZW1lbnQuXHJcbiAgICogQHBhcmFtIHkgLSBZIHZhbHVlIG9mIHRoZSBtb3ZlbWVudC5cclxuICAgKiBAcmV0dXJucyBJdHNlbGYgd2hpY2ggZ290IG1vdmVkLlxyXG4gICAqL1xyXG4gIHB1YmxpYyB0cmFuc2xhdGUoeDogbnVtYmVyLCB5OiBudW1iZXIpOiB0aGlzIHtcclxuICAgIHRoaXMub3ggKz0geDtcclxuICAgIHRoaXMub3kgKz0geTtcclxuICAgIHJldHVybiB0aGlzO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogU2NhbGVzIHRoZSB3aG9sZSBzY2VuZS4gQmlnZ2VyIHRoZSB2YWx1ZSBpcywgQmlnZ2VyIHRoZSBlbnRpdGllcyBzaG93LlxyXG4gICAqIEBwYXJhbSB2YWx1ZSAtIFNjYWxlIHJhdGlvIG9mIGJvdGggZGlyZWN0aW9uLlxyXG4gICAqIEByZXR1cm5zIEl0c2VsZiB3aGljaCBnb3Qgc2NhbGVkLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBzY2FsZSh2YWx1ZTogbnVtYmVyKTogdGhpcztcclxuICAvKipcclxuICAgKiBTY2FsZXMgdGhlIHdob2xlIHNjZW5lLiBCaWdnZXIgdGhlIHZhbHVlIGlzLCBCaWdnZXIgdGhlIG9iamVjdHMgc2hvdy5cclxuICAgKiBAcGFyYW0geCAtIFNjYWxlIHJhdGlvIG9mIFggZGlyZWN0aW9uLlxyXG4gICAqIEBwYXJhbSB5IC0gU2NhbGUgcmF0aW8gb2YgWSBkaXJlY3Rpb24uXHJcbiAgICogQHJldHVybnMgSXRzZWxmIHdoaWNoIGdvdCBzY2FsZWQuXHJcbiAgICovXHJcbiAgcHVibGljIHNjYWxlKHg6IG51bWJlciwgeTogbnVtYmVyKTogdGhpcztcclxuICBwdWJsaWMgc2NhbGUoeDogbnVtYmVyLCB5PzogbnVtYmVyKTogdGhpcyB7XHJcbiAgICBpZiAoeSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgIHJldHVybiB0aGlzLnNjYWxlKHgsIHgpO1xyXG4gICAgfVxyXG4gICAgWzAsIDEsIDRdLmZvckVhY2goKHYpID0+IHtcclxuICAgICAgdGhpcy52YWx1ZXNbdl0gKj0geDtcclxuICAgIH0pO1xyXG4gICAgWzIsIDMsIDVdLmZvckVhY2goKHYpID0+IHtcclxuICAgICAgdGhpcy52YWx1ZXNbdl0gKj0geTtcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIHRoaXM7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBBcHBseSBsaW5lYXIgdHJhbnNmb3JtYXRpb24uXHJcbiAgICogQHBhcmFtIG0xMSAtIEVsZW1lbnQgb2YgdGhlIG1hdHJpeCBhdCBgKDEsIDEpYC5cclxuICAgKiBAcGFyYW0gbTEyIC0gRWxlbWVudCBvZiB0aGUgbWF0cml4IGF0IGAoMSwgMilgLlxyXG4gICAqIEBwYXJhbSBtMjEgLSBFbGVtZW50IG9mIHRoZSBtYXRyaXggYXQgYCgyLCAxKWAuXHJcbiAgICogQHBhcmFtIG0yMiAtIEVsZW1lbnQgb2YgdGhlIG1hdHJpeCBhdCBgKDIsIDIpYC5cclxuICAgKiBAcGFyYW0gb3ggLSBFbGVtZW50IG9mIHRoZSBtYXRyaXggYXQgYCgzLCAxKWAuXHJcbiAgICogQHBhcmFtIG95IC0gRWxlbWVudCBvZiB0aGUgbWF0cml4IGF0IGAoMywgMilgLlxyXG4gICAqIEByZXR1cm5zIEl0c2VsZiB3aGljaCBnb3QgYXBwbGllZC5cclxuICAgKi9cclxuICBwdWJsaWMgbGluZWFyKFxyXG4gICAgbTExOiBudW1iZXIsXHJcbiAgICBtMTI6IG51bWJlcixcclxuICAgIG0yMTogbnVtYmVyLFxyXG4gICAgbTIyOiBudW1iZXIsXHJcbiAgICBveDogbnVtYmVyLFxyXG4gICAgb3k6IG51bWJlclxyXG4gICk6IHRoaXMge1xyXG4gICAgdGhpcy52YWx1ZXMgPSBbXHJcbiAgICAgIG0xMSAqIHRoaXMubTExICsgbTEyICogdGhpcy5tMjEsXHJcbiAgICAgIG0xMSAqIHRoaXMubTEyICsgbTEyICogdGhpcy5tMjIsXHJcbiAgICAgIG0yMSAqIHRoaXMubTExICsgbTIyICogdGhpcy5tMjEsXHJcbiAgICAgIG0yMSAqIHRoaXMubTEyICsgbTIyICogdGhpcy5tMjIsXHJcbiAgICAgIG0xMSAqIHRoaXMub3ggKyBtMTIgKiB0aGlzLm95ICsgb3gsXHJcbiAgICAgIG0yMSAqIHRoaXMub3ggKyBtMjIgKiB0aGlzLm95ICsgb3ksXHJcbiAgICBdO1xyXG4gICAgcmV0dXJuIHRoaXM7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBSb3RhdGUgdGhlIGNhbWVyYSBjb3VudGNsb2Nrd2lzZS5cclxuICAgKiBAcGFyYW0gYW5nbGUgLSBUaGUgcm90YXRpb24gYW5nbGUgeW91IHdhbnQuIChpbiAqZGVncmVlcyopXHJcbiAgICogQHJldHVybnMgSXRzZWxmIHdoaWNoIGdvdCByb3RhdGVkLlxyXG4gICAqL1xyXG4gIHB1YmxpYyByb3RhdGUoYW5nbGU6IG51bWJlciwgcG9pbnRYOiBudW1iZXIgPSAwLCBwb2ludFk6IG51bWJlciA9IDApOiB0aGlzIHtcclxuICAgIGFuZ2xlID0gKGFuZ2xlICogTWF0aC5QSSkgLyAxODA7XHJcbiAgICBjb25zdCBzaW5WYWx1ZSA9IE1hdGguc2luKGFuZ2xlKTtcclxuICAgIGNvbnN0IGNvc1ZhbHVlID0gTWF0aC5jb3MoYW5nbGUpO1xyXG4gICAgcmV0dXJuIHRoaXMudHJhbnNsYXRlKC1wb2ludFgsIC1wb2ludFkpXHJcbiAgICAgIC5saW5lYXIoY29zVmFsdWUsIHNpblZhbHVlLCAtc2luVmFsdWUsIGNvc1ZhbHVlLCAwLCAwKVxyXG4gICAgICAudHJhbnNsYXRlKHBvaW50WCwgcG9pbnRZKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEFwcGx5IHRyYW5zZm9ybSB0byB0aGUgZ2llbiBjb29yZGluYXRlIHZhbHVlcy5cclxuICAgKiBAcGFyYW0geCAtIFggdmFsdWUgb2YgdGhlIGNvb3JkaW5hdGUuXHJcbiAgICogQHBhcmFtIHkgLSBZIHZhbHVlIG9mIHRoZSBjb29yZGluYXRlLlxyXG4gICAqIEByZXR1cm5zIEFjdHVhbCBjb29yZGluYXRlIHZhbHVlcyB5b3VyIGNvb3JkaW5hdGUgd2lsbCBhcHBlYXIgYXQuXHJcbiAgICovXHJcbiAgcHVibGljIGFwcGx5KHg6IG51bWJlciB8IFZlY3RvcjJELCB5PzogbnVtYmVyKTogVmVjdG9yMkQge1xyXG4gICAgbGV0IHY6IFZlY3RvcjJEO1xyXG4gICAgaWYgKHggaW5zdGFuY2VvZiBWZWN0b3IyRCkge1xyXG4gICAgICB2ID0geDtcclxuICAgICAgeSA9IHguWTtcclxuICAgICAgeCA9IHguWDtcclxuICAgICAgdi5YID0gdGhpcy5tMTEgKiB4ICsgdGhpcy5tMTIgKiB5ICsgdGhpcy5veDtcclxuICAgICAgdi5ZID0gdGhpcy5tMjEgKiB4ICsgdGhpcy5tMjIgKiB5ICsgdGhpcy5veTtcclxuICAgIH0gZWxzZSBpZiAoeSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgIHYgPSBuZXcgVmVjdG9yMkQoXHJcbiAgICAgICAgdGhpcy5tMTEgKiB4ICsgdGhpcy5tMTIgKiB5ICsgdGhpcy5veCxcclxuICAgICAgICB0aGlzLm0yMSAqIHggKyB0aGlzLm0yMiAqIHkgKyB0aGlzLm95XHJcbiAgICAgICk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXHJcbiAgICAgICAgXCJUcmFuc2Zvcm0jYXBwbHkgbWV0aG9kIHJlcXVpcmVzIHR3byBudW1iZXIgcGFyYW1ldGVycyBvciBvbmUgVmVjdG9yMkQuXCJcclxuICAgICAgKTtcclxuICAgIH1cclxuICAgIHJldHVybiB2O1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogTXVsdGlwbHkgZ2l2ZW4gdHJhbnNmb3JtIHRvIHRoaXMgdHJhbnNmb3JtLiBBID0gQUIgd2hlcmUgdGhpcyBpcyBBIGFuZCBnaXZlbiBwYXJhbSBpcyBCLlxyXG4gICAqIEBwYXJhbSBCIC0gWCB2YWx1ZSBvZiB0aGUgY29vcmRpbmF0ZS5cclxuICAgKiBAcmV0dXJucyB0aGlzIHRyYW5zZm9ybSBhZnRlciB0cmFuc2Zvcm1hdGlvbi5cclxuICAgKi9cclxuICBwdWJsaWMgbXVsdGlwbHkoQjogVHJhbnNmb3JtKTogdGhpcyB7XHJcbiAgICByZXR1cm4gdGhpcy5saW5lYXIoLi4uQi52YWx1ZXMpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogSW52ZXJ0IHRoaXMgbWF0cml4IGlmIGludmVydGlibGUuXHJcbiAgICogQHJldHVybnMgdGhpcyB0cmFuc2Zvcm0uXHJcbiAgICovXHJcbiAgcHVibGljIGludmVydCgpIHtcclxuICAgIGNvbnN0IGRldCA9IHRoaXMuRGV0ZXJtaW5hbnQ7XHJcbiAgICBpZiAoZGV0ID09PSAwKSB0aHJvdyBuZXcgRXJyb3IoXCJUaGlzIHRyYW5zZm9ybSBpcyBub3QgaW52ZXJ0aWJsZVwiKTtcclxuICAgIGNvbnN0IG0xMSA9IHRoaXMubTIyIC8gZGV0O1xyXG4gICAgY29uc3QgbTEyID0gKHRoaXMubTEyICogLTEpIC8gZGV0O1xyXG4gICAgY29uc3Qgb3ggPSAodGhpcy5tMTIgKiB0aGlzLm95IC0gdGhpcy5tMjIgKiB0aGlzLm94KSAvIGRldDtcclxuICAgIGNvbnN0IG0yMSA9ICh0aGlzLm0yMSAqIC0xKSAvIGRldDtcclxuICAgIGNvbnN0IG0yMiA9IHRoaXMubTExIC8gZGV0O1xyXG4gICAgY29uc3Qgb3kgPSAoKHRoaXMubTExICogdGhpcy5veSAtIHRoaXMubTIxICogdGhpcy5veCkgKiAtMSkgLyBkZXQ7XHJcblxyXG4gICAgdGhpcy5tMTEgPSBtMTE7XHJcbiAgICB0aGlzLm0xMiA9IG0xMjtcclxuICAgIHRoaXMub3ggPSBveDtcclxuICAgIHRoaXMubTIxID0gbTIxO1xyXG4gICAgdGhpcy5tMjIgPSBtMjI7XHJcbiAgICB0aGlzLm95ID0gb3k7XHJcbiAgICByZXR1cm4gdGhpcztcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFNrZXdzIHRoZSBzcHJpdGUuXHJcbiAgICogQHBhcmFtIHhfc2xvcGUgLSBIb3cgbXVjaCB5b3Ugd2FudCB0byBza2V3IHRvIFgtYXhpcy5cclxuICAgKiBAcGFyYW0geV9zbG9wZSAtIEhvdyBtdWNoIHlvdSB3YW50IHRvIHNrZXcgdG8gWS1heGlzLlxyXG4gICAqIEByZXR1cm5zIEl0c2VsZiBza2V3ZWQuXHJcbiAgICovXHJcbiAgcHVibGljIHNrZXcoeF9zbG9wZTogbnVtYmVyID0gMCwgeV9zbG9wZTogbnVtYmVyID0gMCk6IHRoaXMge1xyXG4gICAgdGhpcy5saW5lYXIoMSwgeF9zbG9wZSwgeV9zbG9wZSwgMSwgMCwgMCk7XHJcbiAgICByZXR1cm4gdGhpcztcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIE1ha2VzIGEgY29weSBvZiB0aGlzIHRyYW5zZm9ybS5cclxuICAgKiBAcmV0dXJucyBhIGNvcHkgb2YgdGhpcyBtYXRyaXhcclxuICAgKi9cclxuICBwdWJsaWMgY29weSgpOiBUcmFuc2Zvcm0ge1xyXG4gICAgcmV0dXJuIG5ldyBUcmFuc2Zvcm0oLi4udGhpcy52YWx1ZXMpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogW2BET01NYXRyaXhgXTogaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL0RPTU1hdHJpeFxyXG4gICAqIFtgRE9NTWF0cml4YF0gZ2V0dGVyIG1ldGhvZC5cclxuICAgKiBAcmV0dXJucyBbYERPTU1hdHJpeGBdIG9iamVjdCBtYWRlIGZyb20gdGhpcyB2YWx1ZXMuXHJcbiAgICovXHJcbiAgcHVibGljIHRvRE9NKCk6IERPTU1hdHJpeCB7XHJcbiAgICByZXR1cm4gbmV3IERPTU1hdHJpeChbXHJcbiAgICAgIHRoaXMubTExLFxyXG4gICAgICB0aGlzLm0yMSxcclxuICAgICAgdGhpcy5tMTIsXHJcbiAgICAgIHRoaXMubTIyLFxyXG4gICAgICB0aGlzLm94LFxyXG4gICAgICB0aGlzLm95LFxyXG4gICAgXSk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCB7IEVudGl0eSB9IGZyb20gXCIuLi9lbnRpdHlcIjtcclxuaW1wb3J0IHsgVHJhbnNmb3JtIH0gZnJvbSBcIi4uL3RyYW5zZm9ybVwiO1xyXG5pbXBvcnQgSURyYXdhYmxlIGZyb20gXCIuL2lkcmF3YWJsZVwiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgYWJzdHJhY3QgY2xhc3MgU3ByaXRlIGV4dGVuZHMgRW50aXR5IGltcGxlbWVudHMgSURyYXdhYmxlIHtcclxuICBwcml2YXRlIHJlZ2lvbjogRW50aXR5IHwgdW5kZWZpbmVkO1xyXG5cclxuICBwcml2YXRlIHRyYW5zZm9ybTogVHJhbnNmb3JtIHwgdW5kZWZpbmVkO1xyXG5cclxuICAvKipcclxuICAgKiBHZXR0ZXIgcHJvcGVydHkgZm9yIHRyYW5zZm9ybS5cclxuICAgKiBAcmV0dXJucyBUaGUgbWF0cml4IHRyYW5zZm9ybSBhcHBsaWVkIHRvIHRoaXMgc3ByaXRlLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBnZXQgVHJhbnNmb3JtKCk6IFRyYW5zZm9ybSB7XHJcbiAgICBpZiAoIXRoaXMudHJhbnNmb3JtKSB0aGlzLnRyYW5zZm9ybSA9IG5ldyBUcmFuc2Zvcm0oKTtcclxuICAgIHJldHVybiB0aGlzLnRyYW5zZm9ybTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEdldHRlciBwcm9wZXJ0eSBmb3IgcmVnaW9uLlxyXG4gICAqIEByZXR1cm5zIFRoZSBkcmF3aW5nIHJlZ2lvbiB0aGlzIHNwcml0ZSBpcyBpbmRpY2F0aW5nLiBTcHJpdGVzIGFyZSBjbGlwcGVkIGJ5IHRoZWlyIHJlZ2lvbi5cclxuICAgKiBAc2VlIFtDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQjY2xpcF0oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL0NhbnZhc1JlbmRlcmluZ0NvbnRleHQyRC9jbGlwKVxyXG4gICAqL1xyXG4gIHB1YmxpYyBnZXQgUmVnaW9uKCk6IEVudGl0eSB8IHVuZGVmaW5lZCB7XHJcbiAgICByZXR1cm4gdGhpcy5yZWdpb247XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBAcmV0dXJucyBCb29sZWFuIHRoYXQgZGV0ZXJtaW5lcyB3aGV0aGVyIHRoZSByZWdpb24gb2YgdGhpcyBzcHJpdGUgaW5kaWNhdGVzIGl0IHNlbGYuXHJcbiAgICogQHNlZSB7QGxpbmsgUmVnaW9ufVxyXG4gICAqL1xyXG4gIHB1YmxpYyBnZXQgaXNTZWxmUmVnaW9uKCk6IGJvb2xlYW4ge1xyXG4gICAgcmV0dXJuIHRoaXMucmVnaW9uID09PSB0aGlzO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogU2V0dGVyIHByb3BlcnR5IGZvciB0cmFuc2Zvcm0uXHJcbiAgICovXHJcbiAgcHVibGljIHNldCBUcmFuc2Zvcm0odHJhbnNmb3JtOiBUcmFuc2Zvcm0pIHtcclxuICAgIHRoaXMudHJhbnNmb3JtID0gdHJhbnNmb3JtO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogU2V0dGVyIHByb3BlcnR5IGZvciByZWdpb24uXHJcbiAgICovXHJcbiAgcHVibGljIHNldCBSZWdpb24ocmVnaW9uOiBFbnRpdHkgfCB1bmRlZmluZWQpIHtcclxuICAgIHRoaXMucmVnaW9uID0gcmVnaW9uO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQGluaGVyaXRkb2NcclxuICAgKi9cclxuICBwdWJsaWMgcmVhZG9ubHkgZHJhdyA9IChjb250ZXh0OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQsIGRlbGF5OiBudW1iZXIpID0+IHtcclxuICAgIGNvbnRleHQuc2F2ZSgpO1xyXG5cclxuICAgIGNvbnRleHQudHJhbnNsYXRlKHRoaXMuQWJzb2x1dGVYLCB0aGlzLkFic29sdXRlWSk7XHJcblxyXG4gICAgaWYgKHRoaXMudHJhbnNmb3JtKSB7XHJcbiAgICAgIGNvbnRleHQudHJhbnNmb3JtKFxyXG4gICAgICAgIHRoaXMudHJhbnNmb3JtLm0xMSxcclxuICAgICAgICB0aGlzLnRyYW5zZm9ybS5tMjEsXHJcbiAgICAgICAgdGhpcy50cmFuc2Zvcm0ubTEyLFxyXG4gICAgICAgIHRoaXMudHJhbnNmb3JtLm0yMixcclxuICAgICAgICB0aGlzLnRyYW5zZm9ybS5veCxcclxuICAgICAgICB0aGlzLnRyYW5zZm9ybS5veVxyXG4gICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICh0aGlzLnJlZ2lvbikge1xyXG4gICAgICB0aGlzLmJlZm9yZUNsaXAoY29udGV4dCwgZGVsYXkpO1xyXG4gICAgICBjb250ZXh0LmJlZ2luUGF0aCgpO1xyXG4gICAgICBjb250ZXh0LnJlY3QoMCwgMCwgdGhpcy5yZWdpb24uV2lkdGgsIHRoaXMucmVnaW9uLkhlaWdodCk7XHJcbiAgICAgIGNvbnRleHQuY2xpcCgpO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMub25EcmF3KGNvbnRleHQsIGRlbGF5KTtcclxuXHJcbiAgICBjb250ZXh0LnJlc3RvcmUoKTtcclxuXHJcbiAgICB0aGlzLmFmdGVyUmVzdG9yZShjb250ZXh0LCBkZWxheSk7XHJcbiAgICBmb3IgKGNvbnN0IGNoaWxkIG9mIHRoaXMuQ2hpbGRyZW4pIHtcclxuICAgICAgaWYgKCEoY2hpbGQgaW5zdGFuY2VvZiBTcHJpdGUpKSBjb250aW51ZTtcclxuICAgICAgY2hpbGQuZHJhdyhjb250ZXh0LCBkZWxheSk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgLyoqXHJcbiAgICogUHJlLWNsaXAgdGFza3MgcGVyZm9ybWVkIGZvciBjYW52YXMgY29udGV4dCByZXNldC5cclxuICAgKiB0aGlzIG1ldGhvZCBpcyBjYWxsZWQgYXV0b21hdGljYWxseSBieSBlbmdpbmUgaWYgYXR0YWNoZWQuXHJcbiAgICogQHBhcmFtIGNvbnRleHQgQ2FudmFzIGNvbnRleHQgdG8gcGVyZm9ybSByZXNldCBvbi5cclxuICAgKiBAcGFyYW0gZGVsYXkgdGltZSBpbiBtaWxsaXNlY29uZHMgcGFzc2VkIGZyb20gdGhlIHByZXZpb3VzIGZyYW1lIGNhbGwuXHJcbiAgICovXHJcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnVzZWQtdmFyc1xyXG4gIHB1YmxpYyBiZWZvcmVDbGlwKGNvbnRleHQ6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCwgZGVsYXk6IG51bWJlcikge31cclxuXHJcbiAgLyoqXHJcbiAgICogUG9zdC1yZXN0b3JlIHRhc2tzIHBlcmZvcm1lZCBmb3IgY2FudmFzIGNvbnRleHQgcmVzdG9yZS5cclxuICAgKiB0aGlzIG1ldGhvZCBpcyBjYWxsZWQgYXV0b21hdGljYWxseSBieSBlbmdpbmUgaWYgYXR0YWNoZWQuXHJcbiAgICogQHBhcmFtIGNvbnRleHQgQ2FudmFzIGNvbnRleHQgdG8gcGVyZm9ybSByZXNldCBvbi5cclxuICAgKiBAcGFyYW0gZGVsYXkgdGltZSBpbiBtaWxsaXNlY29uZHMgcGFzc2VkIGZyb20gdGhlIHByZXZpb3VzIGZyYW1lIGNhbGwuXHJcbiAgICovXHJcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnVzZWQtdmFyc1xyXG4gIHB1YmxpYyBhZnRlclJlc3RvcmUoY29udGV4dDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJELCBkZWxheTogbnVtYmVyKSB7fVxyXG5cclxuICBwdWJsaWMgcmVzZXRUcmFuc2Zvcm0oKSB7XHJcbiAgICB0aGlzLnRyYW5zZm9ybSA9IG5ldyBUcmFuc2Zvcm0oKTtcclxuICB9XHJcbiAgLyoqXHJcbiAgICogUmVuZGVyIHRhc2tzIHBlcmZvcm1lZCBmb3IgY2FudmFzIGNvbnRleHQuXHJcbiAgICogdGhpcyBtZXRob2QgaXMgY2FsbGVkIGF1dG9tYXRpY2FsbHkgYnkgZW5naW5lIGlmIGF0dGFjaGVkLlxyXG4gICAqIEBwYXJhbSBjb250ZXh0IENhbnZhcyBjb250ZXh0IHRvIHBlcmZvcm0gcmVzZXQgb24uXHJcbiAgICogQHBhcmFtIGRlbGF5IHRpbWUgaW4gbWlsbGlzZWNvbmRzIHBhc3NlZCBmcm9tIHRoZSBwcmV2aW91cyBmcmFtZSBjYWxsLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBhYnN0cmFjdCBvbkRyYXcoXHJcbiAgICBjb250ZXh0OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQsXHJcbiAgICBkZWxheTogbnVtYmVyXHJcbiAgKTogdm9pZDtcclxufVxyXG4iLCJpbXBvcnQgeyBTcHJpdGUgfSBmcm9tIFwiLi4vc3ByaXRlXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBCbGFua1NjZW5lIGV4dGVuZHMgU3ByaXRlIHtcclxuICBwdWJsaWMgb25EcmF3KCk6IHZvaWQge31cclxufVxyXG4iLCJpbXBvcnQgQ2FudmFzQ29uZmlnIGZyb20gXCIuL2NhbnZhc19jb25maWdcIjtcclxuaW1wb3J0IHsgRW50aXR5IH0gZnJvbSBcIi4vZW50aXR5XCI7XHJcbmltcG9ydCB7IElEcmF3YWJsZSB9IGZyb20gXCIuL3Nwcml0ZVwiO1xyXG5pbXBvcnQgeyBWZWN0b3IyRCB9IGZyb20gXCIuL3ZlY3RvclwiO1xyXG5pbXBvcnQgY2hlY2tDb21wYXRpYmlsaXR5IGZyb20gXCIuL2NvbXBhdGliaWxpdHlcIjtcclxuaW1wb3J0IHsgQmxhbmtTY2VuZSB9IGZyb20gXCIuL3NjZW5lc1wiO1xyXG5pbXBvcnQgeyBNb2RpZmllciB9IGZyb20gXCIuL21vZGlmaWVycy9tb2RpZmllcnNcIjtcclxuaW1wb3J0IHsgVHJhbnNmb3JtIH0gZnJvbSBcIi4vdHJhbnNmb3JtXCI7XHJcblxyXG5pbnRlcmZhY2UgRXh0ZW5kZWRDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQgZXh0ZW5kcyBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQge1xyXG4gIHJlc2V0KCk6IHZvaWQ7XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEVuZ2luZSB7XHJcbiAgcHJpdmF0ZSBjYW52YXM6IEhUTUxDYW52YXNFbGVtZW50O1xyXG5cclxuICBwcml2YXRlIGNvbnRleHQ6IEV4dGVuZGVkQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEO1xyXG5cclxuICBwcml2YXRlIHByZXZpb3VzVGltZXN0YW1wOiBudW1iZXIgPSAwO1xyXG5cclxuICBwcml2YXRlIGFuaW1hdGlvbklkOiBudW1iZXIgPSAtMTtcclxuXHJcbiAgcHJpdmF0ZSBzY2VuZTogSURyYXdhYmxlID0gbmV3IEJsYW5rU2NlbmUoKTtcclxuXHJcbiAgcHJpdmF0ZSBzdWJSZXNldDogKGNvbnRleHQ6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCkgPT4gdm9pZDtcclxuXHJcbiAgcHJpdmF0ZSBjYW1lcmE6IFRyYW5zZm9ybSA9IG5ldyBUcmFuc2Zvcm0oKTtcclxuXHJcbiAgcHJpdmF0ZSBtb2RpZmllcnM6IE1vZGlmaWVyW10gPSBbXTtcclxuXHJcbiAgLyoqXHJcbiAgICogQ29uc3RydWN0b3Igd2lsbCBiaW5kIEVuZ2luZSBvYmplY3QgdG8gYSBnaXZlbiBjYW52YXMgYW5kIGNoZWNrIGZvciBpbmNvbXBhdGlibGUgY2FudmFzIGZlYXR1cmVzIGFuZCBjb3Zlci5cclxuICAgKiBAcGFyYW0gY2FudmFzSWRlbnRpZmllciBvbmUgb2YgSFRNTENuYXZhc0VsZW1lbnQgb3IgY3NzIHNlbGVjdG9yIHN0cmluZyB0aGF0IGluZGljYXRlcyBjYW52YXMgZWxlbWVudC5cclxuICAgKi9cclxuICBwdWJsaWMgY29uc3RydWN0b3IoY2FudmFzSWRlbnRpZmllcjogSFRNTENhbnZhc0VsZW1lbnQgfCBzdHJpbmcgfCBudWxsKSB7XHJcbiAgICAvLyBsb2NhdGUgY2FudmFzIGJ5IEhUTUxDYW52YXNFbGVtZW50IG9yIENTUyBzZWxlY3RvclxyXG4gICAgbGV0IGNhbnZhczogSFRNTENhbnZhc0VsZW1lbnQgfCBudWxsO1xyXG4gICAgaWYgKHR5cGVvZiBjYW52YXNJZGVudGlmaWVyID09PSBcInN0cmluZ1wiKSB7XHJcbiAgICAgIGNhbnZhcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgICAgY2FudmFzSWRlbnRpZmllclxyXG4gICAgICApIGFzIEhUTUxDYW52YXNFbGVtZW50IHwgbnVsbDtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGNhbnZhcyA9IGNhbnZhc0lkZW50aWZpZXI7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGNhbnZhcyA9PT0gbnVsbCkge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJVbmFibGUgdG8gaWRlbnRpZnkgY2FudmFzLlwiKTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLmNhbnZhcyA9IGNhbnZhcztcclxuICAgIHRoaXMuc3ViUmVzZXQgPSAoKSA9PiB7fTtcclxuXHJcbiAgICAvLyByZXF1ZXN0IGNvbnRleHQgZnJvbSBnaXZlbiBjYW52YXNcclxuICAgIGNvbnN0IGNvbnRleHQgPSB0aGlzLmNhbnZhcy5nZXRDb250ZXh0KFxyXG4gICAgICBcIjJkXCJcclxuICAgICkgYXMgRXh0ZW5kZWRDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQ7XHJcblxyXG4gICAgdGhpcy5jb250ZXh0ID0gY29udGV4dDtcclxuXHJcbiAgICBjaGVja0NvbXBhdGliaWxpdHkodGhpcyk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgZ2V0IENhbnZhcygpIHtcclxuICAgIHJldHVybiB0aGlzLmNhbnZhcztcclxuICB9XHJcblxyXG4gIHB1YmxpYyBnZXQgQ29udGV4dCgpIHtcclxuICAgIHJldHVybiB0aGlzLmNvbnRleHQ7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgZ2V0IFNjZW5lKCk6IElEcmF3YWJsZSB7XHJcbiAgICByZXR1cm4gdGhpcy5zY2VuZTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBnZXQgQ2FtZXJhKCk6IFRyYW5zZm9ybSB7XHJcbiAgICByZXR1cm4gdGhpcy5jYW1lcmE7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgc2V0IFNjZW5lKHNjZW5lOiBJRHJhd2FibGUpIHtcclxuICAgIGlmIChzY2VuZSBpbnN0YW5jZW9mIEVudGl0eSkge1xyXG4gICAgICBzY2VuZS5zZXRQYXJlbnQobnVsbCk7XHJcbiAgICB9XHJcbiAgICB0aGlzLnNjZW5lID0gc2NlbmU7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgc2V0IENhbWVyYShjYW1lcmE6IFRyYW5zZm9ybSkge1xyXG4gICAgdGhpcy5jYW1lcmEgPSBjYW1lcmE7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBSZWdpc3RlciBhIGNhbGxiYWNrIHRoYXQgd2lsbCBiZSBjYWxsZWQgb24gZWFjaCBmcmFtZS5cclxuICAgKiBAcGFyYW0gZnVuYyBVc2VyIGRlZmluZWQgY2FsbGJhY2sgdGhhdCB3aWxsIGJlIGV4ZWN1dGVkIGFmdGVyIGVhY2ggZnJhbWUgaXMgcmVzZXQgY29tcGxldGVseVxyXG4gICAqL1xyXG4gIHB1YmxpYyBzZXRTdWJSZXNldEZ1bmN0aW9uKFxyXG4gICAgZnVuYzogKGNvbnRleHQ6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCkgPT4gdm9pZFxyXG4gICkge1xyXG4gICAgdGhpcy5zdWJSZXNldCA9IGZ1bmM7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBTZXQgY2FudmFzIHdpZHRoIGFuZCBoZWlnaHQgdG8gZ2l2ZW4gZGltZW5zaW9uLiBDYW52YXMgd2lsbCB0cnkgdG8gbWF0Y2ggd2luZG93IHNpemUgd2hlbiBubyBhcmd1bWVudHMgYXJlIHBhc3NlZC5cclxuICAgKiBAcGFyYW0gY29uZmlnIENhbnZhcyBzaXplIGRpbWVuc2lvbi5cclxuICAgKi9cclxuICBwdWJsaWMgcmVzaXplQ2FudmFzKGNvbmZpZz86IENhbnZhc0NvbmZpZyB8IFZlY3RvcjJEKSB7XHJcbiAgICBpZiAoY29uZmlnIGluc3RhbmNlb2YgVmVjdG9yMkQpIHtcclxuICAgICAgdGhpcy5DYW52YXMud2lkdGggPSBjb25maWcuWDtcclxuICAgICAgdGhpcy5DYW52YXMuaGVpZ2h0ID0gY29uZmlnLlk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLkNhbnZhcy53aWR0aCA9IGNvbmZpZz8udyA/PyB3aW5kb3cuaW5uZXJXaWR0aDtcclxuICAgICAgdGhpcy5DYW52YXMuaGVpZ2h0ID0gY29uZmlnPy5oID8/IHdpbmRvdy5pbm5lckhlaWdodDtcclxuICAgIH1cclxuICAgIC8vIFRPRE86IGVtaXQgY2FudmFzIHJlc2l6ZSBldmVudFxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogTWFrZXMgYm91bmQgY2FudmFzIGJlZ2luIHJlZnJlc2hpbmcgd2l0aCBnaXZlbiBjb250ZXh0LiBUaGlzIHdpbGwgYWxzbyBzdGFydCBtb2RpZmllcnMgdG8gdXBkYXRlLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGFydCgpIHtcclxuICAgIC8vIG1heSBiZSBlcnJvciBjaGVjay5cclxuICAgIHRoaXMucmVuZGVyKHRoaXMucHJldmlvdXNUaW1lc3RhbXApO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogTWFrZXMgYm91bmQgY2FudmFzIHRvIHN0b3AgcmVmcmVzaGluZy4gVGhpcyB3aWxsIGFsc28gc3RvcCBtb2RpZmllcnMgdG8gdXBkYXRlLlxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdG9wKCkge1xyXG4gICAgY2FuY2VsQW5pbWF0aW9uRnJhbWUodGhpcy5hbmltYXRpb25JZCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiByZWdpc3RlciBhbmQgc3RhcnQgZ2l2ZW4gbW9kaWZpZXIgZnJvbSB0aGlzIGVuZ2luZS5cclxuICAgKiBAcGFyYW0gbW9kaWZpZXIgTW9kaWZpZXIgdG8gaHVsdCBleGVjdXRpb24uXHJcbiAgICovXHJcbiAgcHVibGljIHJlZ2lzdGVyTW9kaWZpZXIobW9kaWZpZXI6IE1vZGlmaWVyKSB7XHJcbiAgICBtb2RpZmllci5yZWdpc3RlcigpO1xyXG4gICAgdGhpcy5tb2RpZmllcnMucHVzaChtb2RpZmllcik7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBTdG9wcyBhbmQgcmVtb3ZlcyBnaXZlbiBtb2RpZmllciBmcm9tIHVwZGF0ZSBwb29sIGluIHRoaXMgZW5naW5lLlxyXG4gICAqIEBwYXJhbSBtb2RpZmllciBNb2RpZmllciB0byBodWx0IGV4ZWN1dGlvbi5cclxuICAgKi9cclxuICBwdWJsaWMgdW5yZWdpc3Rlck1vZGlmaWVyKG1vZGlmaWVyOiBNb2RpZmllcikge1xyXG4gICAgdGhpcy5tb2RpZmllcnMgPSB0aGlzLm1vZGlmaWVycy5maWx0ZXIoKG0pID0+IG0gPT09IG1vZGlmaWVyKTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgcmVuZGVyKHRpbWVzdGFtcDogbnVtYmVyKSB7XHJcbiAgICBjb25zdCBlbGFwc2VkVGltZSA9IHRpbWVzdGFtcCAtIHRoaXMucHJldmlvdXNUaW1lc3RhbXA7XHJcbiAgICB0aGlzLnByZXZpb3VzVGltZXN0YW1wID0gdGltZXN0YW1wO1xyXG5cclxuICAgIGNvbnN0IG1vZGlmaWVyc1RvUmVtb3ZlOiBNb2RpZmllcltdID0gW107XHJcbiAgICBmb3IgKGNvbnN0IG1vZGlmaWVyIG9mIHRoaXMubW9kaWZpZXJzKSB7XHJcbiAgICAgIGlmIChtb2RpZmllci5Qcm9ncmVzcyA8IDEpIHtcclxuICAgICAgICBtb2RpZmllci50aWNrKCk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgbW9kaWZpZXJzVG9SZW1vdmUucHVzaChtb2RpZmllcik7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHRoaXMubW9kaWZpZXJzID0gdGhpcy5tb2RpZmllcnMuZmlsdGVyKFxyXG4gICAgICAobSkgPT4gIW1vZGlmaWVyc1RvUmVtb3ZlLmluY2x1ZGVzKG0pXHJcbiAgICApO1xyXG5cclxuICAgIHRoaXMuY29udGV4dC5yZXNldCgpO1xyXG4gICAgdGhpcy5zdWJSZXNldCh0aGlzLmNvbnRleHQpO1xyXG5cclxuICAgIHRoaXMuY29udGV4dC50cmFuc2Zvcm0oXHJcbiAgICAgIHRoaXMuY2FtZXJhLm0xMSxcclxuICAgICAgdGhpcy5jYW1lcmEubTIxLFxyXG4gICAgICB0aGlzLmNhbWVyYS5tMTIsXHJcbiAgICAgIHRoaXMuY2FtZXJhLm0yMixcclxuICAgICAgdGhpcy5jYW1lcmEub3gsXHJcbiAgICAgIHRoaXMuY2FtZXJhLm95XHJcbiAgICApO1xyXG5cclxuICAgIHRoaXMuc2NlbmU/LmRyYXcodGhpcy5jb250ZXh0LCBlbGFwc2VkVGltZSk7XHJcblxyXG4gICAgdGhpcy5hbmltYXRpb25JZCA9IHJlcXVlc3RBbmltYXRpb25GcmFtZSh0aGlzLnJlbmRlci5iaW5kKHRoaXMpKTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IEVuZ2luZSBmcm9tIFwiLi4vZW5naW5lXCI7XHJcbmltcG9ydCBjb250ZXh0UmVzZXQgZnJvbSBcIi4vY29udGV4dF9yZXNldFwiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgKGVuZ2luZTogRW5naW5lKSA9PiB7XHJcbiAgY29uc3QgY29tcGF0T2JqZWN0ID0ge1xyXG4gICAgY29udGV4dF9yZXNldDogY29udGV4dFJlc2V0KGVuZ2luZS5Db250ZXh0KSxcclxuICB9O1xyXG4gIE9iamVjdC5mcmVlemUoY29tcGF0T2JqZWN0KTtcclxuICByZXR1cm4gY29tcGF0T2JqZWN0O1xyXG59O1xyXG4iLCJpbXBvcnQgVmVjdG9yIGZyb20gXCIuL3ZlY3RvclwiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVmVjdG9yM0QgZXh0ZW5kcyBWZWN0b3Ige1xyXG4gIGNvbnN0cnVjdG9yKHg6IG51bWJlciA9IDAsIHk6IG51bWJlciA9IDAsIHo6IG51bWJlciA9IDApIHtcclxuICAgIHN1cGVyKHgsIHksIHopO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGdldCBYKCkge1xyXG4gICAgcmV0dXJuIHRoaXMudmFsdWVzWzBdO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGdldCBZKCkge1xyXG4gICAgcmV0dXJuIHRoaXMudmFsdWVzWzFdO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGdldCBaKCkge1xyXG4gICAgcmV0dXJuIHRoaXMudmFsdWVzWzJdO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIHNldCBYKHg6IG51bWJlcikge1xyXG4gICAgdGhpcy52YWx1ZXNbMF0gPSB4O1xyXG4gIH1cclxuXHJcbiAgcHVibGljIHNldCBZKHk6IG51bWJlcikge1xyXG4gICAgdGhpcy52YWx1ZXNbMV0gPSB5O1xyXG4gIH1cclxuXHJcbiAgcHVibGljIHNldCBaKHo6IG51bWJlcikge1xyXG4gICAgdGhpcy52YWx1ZXNbMl0gPSB6O1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgVmVjdG9yIGZyb20gXCIuL3ZlY3RvclwiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVmVjdG9yNEQgZXh0ZW5kcyBWZWN0b3Ige1xyXG4gIGNvbnN0cnVjdG9yKHg6IG51bWJlciA9IDAsIHk6IG51bWJlciA9IDAsIHo6IG51bWJlciA9IDAsIHc6IG51bWJlciA9IDApIHtcclxuICAgIHN1cGVyKHgsIHksIHosIHcpO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGdldCBYKCkge1xyXG4gICAgcmV0dXJuIHRoaXMudmFsdWVzWzBdO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGdldCBZKCkge1xyXG4gICAgcmV0dXJuIHRoaXMudmFsdWVzWzFdO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGdldCBaKCkge1xyXG4gICAgcmV0dXJuIHRoaXMudmFsdWVzWzJdO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGdldCBXKCkge1xyXG4gICAgcmV0dXJuIHRoaXMudmFsdWVzWzNdO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIHNldCBYKHg6IG51bWJlcikge1xyXG4gICAgdGhpcy52YWx1ZXNbMF0gPSB4O1xyXG4gIH1cclxuXHJcbiAgcHVibGljIHNldCBZKHk6IG51bWJlcikge1xyXG4gICAgdGhpcy52YWx1ZXNbMV0gPSB5O1xyXG4gIH1cclxuXHJcbiAgcHVibGljIHNldCBaKHo6IG51bWJlcikge1xyXG4gICAgdGhpcy52YWx1ZXNbMl0gPSB6O1xyXG4gIH1cclxuXHJcbiAgcHVibGljIHNldCBXKHc6IG51bWJlcikge1xyXG4gICAgdGhpcy52YWx1ZXNbM10gPSB3O1xyXG4gIH1cclxufVxyXG4iXSwibmFtZXMiOlsicm9vdCIsImZhY3RvcnkiLCJleHBvcnRzIiwibW9kdWxlIiwiZGVmaW5lIiwiYW1kIiwiYSIsImkiLCJzZWxmIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsImRlZmluaXRpb24iLCJrZXkiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0Iiwib2JqIiwicHJvcCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJWZWN0b3IiLCJjb25zdHJ1Y3RvciIsInZhbHVlcyIsInRoaXMiLCJzaXplIiwibGVuZ3RoIiwiU2l6ZSIsImNvcHkiLCJ0byIsImZvcmNlIiwiRXJyb3IiLCJvdmVyd3JpdGUiLCJpc2VxdWFsIiwib3RoZXIiLCJwcmVjaXNlIiwidGhpc0FycmF5Iiwic2xpY2UiLCJvdGhlckFycmF5IiwiZXZlcnkiLCJ2IiwidG9GaXhlZCIsInNoaWZ0IiwibW92ZSIsInRlbXAiLCJ1bnNoaWZ0IiwiY291bnRlciIsIm1hcCIsIlZlY3RvcjJEIiwieCIsInkiLCJzdXBlciIsIlgiLCJZIiwiVHJlZUl0ZW0iLCJjaGlsZHJlbiIsInBhcmVudCIsIlBhcmVudCIsIkNoaWxkcmVuIiwiYXR0YWNoQ2hpbGRyZW4iLCJ6X2luZGV4IiwiSW5maW5pdHkiLCJsYXN0SW5kZXgiLCJBcnJheSIsImlzQXJyYXkiLCJzYWZlSW5kZXgiLCJNYXRoIiwibWF4IiwibWluIiwiaW5kZXgiLCJ0ZW1wUGFyZW50IiwiZGV0YWNoQ2hpbGRyZW4iLCJwdXNoIiwic2V0Q2hpbGRJbmRleCIsImNoaWxkIiwiaW5kZXhPZiIsInNwbGljZSIsImdldENoaWxkSW5kZXgiLCJjdXJyZW50SW5kZXgiLCJzZXRQYXJlbnQiLCJFbnRpdHkiLCJjb25maWciLCJkaW1lbnNpb24iLCJwb3NpdGlvbiIsIlciLCJIIiwiUG9zaXRpb24iLCJEaW1lbnNpb24iLCJXaWR0aCIsIkhlaWdodCIsIkFic29sdXRlWCIsIkFic29sdXRlWSIsIndpZHRoIiwiaGVpZ2h0IiwiY29udGV4dCIsInJlc2V0Iiwic2F2ZSIsInN0YXRlQ291bnQiLCJ0ZW1wU2F2ZSIsInRlbXBSZXN0b3JlIiwicmVzdG9yZSIsIl9jb250ZXh0IiwiY291bnQiLCJyZXN0b3JlUm9vdCIsIm1vdmVUbyIsImJlZ2luUGF0aCIsImNsb3NlUGF0aCIsInJlc2V0VHJhbnNmb3JtIiwiY2xlYXJSZWN0IiwiY2FudmFzIiwiVHJhbnNmb3JtIiwibTExIiwibTEyIiwibTIxIiwibTIyIiwib3giLCJveSIsIkRldGVybWluYW50IiwiaXNJbnZlcnRpYmxlIiwiaXNJZGVudGl0eSIsInN0YXRpYyIsImRvbSIsImMiLCJiIiwiZCIsImUiLCJmIiwidHJhbnNsYXRlIiwic2NhbGUiLCJ1bmRlZmluZWQiLCJmb3JFYWNoIiwibGluZWFyIiwicm90YXRlIiwiYW5nbGUiLCJwb2ludFgiLCJwb2ludFkiLCJQSSIsInNpblZhbHVlIiwic2luIiwiY29zVmFsdWUiLCJjb3MiLCJhcHBseSIsIm11bHRpcGx5IiwiQiIsImludmVydCIsImRldCIsInNrZXciLCJ4X3Nsb3BlIiwieV9zbG9wZSIsInRvRE9NIiwiRE9NTWF0cml4IiwiU3ByaXRlIiwiZHJhdyIsImRlbGF5IiwidHJhbnNmb3JtIiwicmVnaW9uIiwiYmVmb3JlQ2xpcCIsInJlY3QiLCJjbGlwIiwib25EcmF3IiwiYWZ0ZXJSZXN0b3JlIiwiUmVnaW9uIiwiaXNTZWxmUmVnaW9uIiwiQmxhbmtTY2VuZSIsIkVuZ2luZSIsImNhbnZhc0lkZW50aWZpZXIiLCJwcmV2aW91c1RpbWVzdGFtcCIsImFuaW1hdGlvbklkIiwic2NlbmUiLCJjYW1lcmEiLCJtb2RpZmllcnMiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJzdWJSZXNldCIsImdldENvbnRleHQiLCJlbmdpbmUiLCJjb21wYXRPYmplY3QiLCJjb250ZXh0X3Jlc2V0IiwiQ29udGV4dCIsImZyZWV6ZSIsIkNhbnZhcyIsIlNjZW5lIiwiQ2FtZXJhIiwic2V0U3ViUmVzZXRGdW5jdGlvbiIsImZ1bmMiLCJyZXNpemVDYW52YXMiLCJ3Iiwid2luZG93IiwiaW5uZXJXaWR0aCIsImgiLCJpbm5lckhlaWdodCIsInN0YXJ0IiwicmVuZGVyIiwic3RvcCIsImNhbmNlbEFuaW1hdGlvbkZyYW1lIiwicmVnaXN0ZXJNb2RpZmllciIsIm1vZGlmaWVyIiwicmVnaXN0ZXIiLCJ1bnJlZ2lzdGVyTW9kaWZpZXIiLCJmaWx0ZXIiLCJtIiwidGltZXN0YW1wIiwiZWxhcHNlZFRpbWUiLCJtb2RpZmllcnNUb1JlbW92ZSIsIlByb2dyZXNzIiwidGljayIsImluY2x1ZGVzIiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwiYmluZCIsIlZlY3RvcjNEIiwieiIsIloiLCJWZWN0b3I0RCJdLCJzb3VyY2VSb290IjoiIn0=